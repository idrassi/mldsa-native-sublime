/* Copyright (c) The mldsa-native project authors
 * SPDX-License-Identifier: Apache-2.0 OR ISC OR MIT
 */

#include "../../../common.h"
#if defined(MLD_ARITH_BACKEND_AARCH64)

/*
 * WARNING: This file is auto-derived from the mldsa-native source file
 *   dev/aarch64_opt/src/mld_polyvecl_pointwise_acc_montgomery_l5.S using scripts/simpasm. Do not modify it directly.
 */


.text
.balign 4
.global MLD_ASM_NAMESPACE(polyvecl_pointwise_acc_montgomery_l5_asm)
MLD_ASM_FN_SYMBOL(polyvecl_pointwise_acc_montgomery_l5_asm)

        .cfi_startproc
        mov	w3, #0xe001             // =57345
        movk	w3, #0x7f, lsl #16
        dup	v0.4s, w3
        mov	w3, #0x2001             // =8193
        movk	w3, #0x380, lsl #16
        dup	v1.4s, w3
        mov	x3, #0x40               // =64
        ldr	q26, [x2, #0x10]
        ldr	q4, [x1, #0x10]
        ldr	q30, [x2, #0x410]
        ldr	q5, [x1, #0x810]
        ldr	q19, [x2, #0x810]
        ldr	q24, [x1, #0x410]
        ldr	q2, [x2, #0x430]
        ldr	q27, [x2, #0x830]
        smull2	v18.2d, v4.4s, v26.4s
        ldr	q17, [x2, #0x30]
        ldr	q22, [x1, #0x430]
        smull	v16.2d, v4.2s, v26.2s
        smlal	v16.2d, v24.2s, v30.2s
        ldr	q26, [x1, #0x30]
        ldr	q3, [x1, #0x400]
        smlal2	v18.2d, v24.4s, v30.4s
        ldr	q31, [x2, #0xc30]
        smlal2	v18.2d, v5.4s, v19.4s
        ldr	q23, [x1, #0x830]
        smlal	v16.2d, v5.2s, v19.2s
        smull2	v4.2d, v26.4s, v17.4s
        ldr	q19, [x2, #0x1030]
        smull	v21.2d, v26.2s, v17.2s
        ldr	q25, [x1, #0xc30]
        ldr	q29, [x1, #0x1030]
        smlal	v21.2d, v22.2s, v2.2s
        ldr	q7, [x2], #0x40
        smlal2	v4.2d, v22.4s, v2.4s
        ldr	q5, [x2, #0x3c0]
        smlal	v21.2d, v23.2s, v27.2s
        smlal2	v4.2d, v23.4s, v27.4s
        ldr	q2, [x1, #0xc10]
        ldr	q28, [x2, #0xbd0]
        smlal2	v4.2d, v25.4s, v31.4s
        smlal2	v4.2d, v29.4s, v19.4s
        ldr	q6, [x1], #0x40
        smlal	v21.2d, v25.2s, v31.2s
        ldr	q30, [x2, #0x7c0]
        smlal	v21.2d, v29.2s, v19.2s
        ldr	q27, [x1, #0x7c0]
        ldr	q25, [x1, #0x3e0]
        smlal	v16.2d, v2.2s, v28.2s
        smull2	v26.2d, v6.4s, v7.4s
        ldr	q24, [x2, #0xfc0]
        ldr	q19, [x1, #0xfc0]
        smlal2	v26.2d, v3.4s, v5.4s
        uzp1	v29.4s, v21.4s, v4.4s
        smlal2	v26.2d, v27.4s, v30.4s
        smlal2	v18.2d, v2.4s, v28.4s
        ldur	q28, [x2, #-0x20]
        mul	v23.4s, v29.4s, v1.4s
        ldr	q31, [x2, #0xbc0]
        ldr	q20, [x1, #0xbc0]
        smull	v29.2d, v6.2s, v7.2s
        ldr	q6, [x1, #0xfe0]
        smlal	v29.2d, v3.2s, v5.2s
        ldur	q5, [x1, #-0x20]
        smlal	v29.2d, v27.2s, v30.2s
        smlsl2	v4.2d, v23.4s, v0.4s
        ldr	q3, [x1, #0x430]
        smlsl	v21.2d, v23.2s, v0.2s
        ldr	q23, [x2, #0x3e0]
        smlal	v29.2d, v20.2s, v31.2s
        ldr	q7, [x2, #0xfd0]
        smull2	v17.2d, v5.4s, v28.4s
        ldr	q22, [x1, #0xfd0]
        smlal	v29.2d, v19.2s, v24.2s
        ldr	q27, [x1, #0x7e0]
        uzp2	v2.4s, v21.4s, v4.4s
        smlal2	v26.2d, v20.4s, v31.4s
        ldr	q21, [x2, #0x7e0]
        smlal2	v26.2d, v19.4s, v24.4s
        smlal	v16.2d, v22.2s, v7.2s
        smlal2	v17.2d, v25.4s, v23.4s
        ldr	q30, [x2, #0x830]
        smull	v4.2d, v5.2s, v28.2s
        uzp1	v31.4s, v29.4s, v26.4s
        smlal	v4.2d, v25.2s, v23.2s
        ldr	q23, [x2, #0x30]
        smlal	v4.2d, v27.2s, v21.2s
        mul	v19.4s, v31.4s, v1.4s
        ldr	q31, [x2, #0xc30]
        sub	x3, x3, #0x8

Ll5_loop_start:
        smlal2	v18.2d, v22.4s, v7.4s
        ldr	q20, [x1, #0x30]
        smlsl2	v26.2d, v19.4s, v0.4s
        ldr	q7, [x1, #0x830]
        ldr	q22, [x2, #0x430]
        smlal2	v17.2d, v27.4s, v21.4s
        smlsl	v29.2d, v19.2s, v0.2s
        ldr	q28, [x2], #0x40
        str	q2, [x0, #0x30]
        smull	v2.2d, v20.2s, v23.2s
        ldr	q24, [x1, #0xc30]
        smull2	v5.2d, v20.4s, v23.4s
        ldr	q27, [x2, #0xff0]
        smlal2	v5.2d, v3.4s, v22.4s
        smlal	v2.2d, v3.2s, v22.2s
        ldr	q21, [x2, #0xba0]
        ldr	q19, [x1, #0xbe0]
        smlal	v2.2d, v7.2s, v30.2s
        smlal2	v5.2d, v7.4s, v30.4s
        ldr	q20, [x1, #0x1030]
        uzp2	v22.4s, v29.4s, v26.4s
        smlal2	v5.2d, v24.4s, v31.4s
        smlal	v2.2d, v24.2s, v31.2s
        ldr	q7, [x2, #0x3c0]
        smlal	v4.2d, v19.2s, v21.2s
        uzp1	v31.4s, v16.4s, v18.4s
        smlal2	v5.2d, v20.4s, v27.4s
        ldr	q26, [x1], #0x40
        smlal	v2.2d, v20.2s, v27.2s
        ldr	q23, [x2, #0xfa0]
        mul	v30.4s, v31.4s, v1.4s
        ldr	q25, [x1, #0x3c0]
        str	q22, [x0], #0x40
        smull	v29.2d, v26.2s, v28.2s
        ldr	q20, [x2, #0x3e0]
        smlal2	v17.2d, v19.4s, v21.4s
        smlal	v4.2d, v6.2s, v23.2s
        uzp1	v24.4s, v2.4s, v5.4s
        smlal2	v17.2d, v6.4s, v23.4s
        mul	v19.4s, v24.4s, v1.4s
        ldur	q6, [x2, #-0x30]
        ldr	q22, [x1, #0x7c0]
        ldr	q31, [x2, #0xbc0]
        smlsl2	v18.2d, v30.4s, v0.4s
        uzp1	v23.4s, v4.4s, v17.4s
        smlsl	v16.2d, v30.2s, v0.2s
        smull2	v26.2d, v26.4s, v28.4s
        ldr	q24, [x1, #0xbc0]
        mul	v21.4s, v23.4s, v1.4s
        ldr	q28, [x2, #0x7c0]
        ldr	q23, [x1, #0xfc0]
        smlal2	v26.2d, v25.4s, v7.4s
        uzp2	v18.4s, v16.4s, v18.4s
        smlal	v29.2d, v25.2s, v7.2s
        ldur	q27, [x2, #-0x20]
        smlsl	v2.2d, v19.2s, v0.2s
        stur	q18, [x0, #-0x30]
        smlsl	v4.2d, v21.2s, v0.2s
        ldr	q30, [x2, #0xfc0]
        smlsl2	v17.2d, v21.4s, v0.4s
        ldur	q25, [x1, #-0x20]
        smlal	v29.2d, v22.2s, v28.2s
        smlal	v29.2d, v24.2s, v31.2s
        ldr	q3, [x1, #0x3e0]
        smlal	v29.2d, v23.2s, v30.2s
        ldur	q18, [x1, #-0x30]
        smlal2	v26.2d, v22.4s, v28.4s
        ldr	q21, [x2, #0x3d0]
        uzp2	v17.4s, v4.4s, v17.4s
        smull	v4.2d, v25.2s, v27.2s
        ldr	q22, [x1, #0x3d0]
        smlal	v4.2d, v3.2s, v20.2s
        smull	v16.2d, v18.2s, v6.2s
        stur	q17, [x0, #-0x20]
        smull2	v18.2d, v18.4s, v6.4s
        ldr	q28, [x1, #0xbd0]
        smlsl2	v5.2d, v19.4s, v0.4s
        ldr	q7, [x2, #0xfd0]
        smlal	v16.2d, v22.2s, v21.2s
        ldr	q6, [x1, #0x7d0]
        smlal2	v26.2d, v24.4s, v31.4s
        ldr	q24, [x2, #0x7d0]
        ldr	q31, [x2, #0xbd0]
        smlal2	v18.2d, v22.4s, v21.4s
        smull2	v17.2d, v25.4s, v27.4s
        ldr	q22, [x1, #0xfd0]
        smlal2	v26.2d, v23.4s, v30.4s
        ldr	q21, [x2, #0x7e0]
        ldr	q27, [x1, #0x7e0]
        smlal	v16.2d, v6.2s, v24.2s
        uzp2	v2.4s, v2.4s, v5.4s
        smlal2	v18.2d, v6.4s, v24.4s
        smlal	v16.2d, v28.2s, v31.2s
        ldr	q6, [x1, #0xfe0]
        smlal	v16.2d, v22.2s, v7.2s
        uzp1	v25.4s, v29.4s, v26.4s
        smlal	v4.2d, v27.2s, v21.2s
        ldr	q23, [x2, #0x30]
        mul	v19.4s, v25.4s, v1.4s
        ldr	q30, [x2, #0x830]
        smlal2	v17.2d, v3.4s, v20.4s
        ldr	q3, [x1, #0x430]
        smlal2	v18.2d, v28.4s, v31.4s
        ldr	q31, [x2, #0xc30]
        subs	x3, x3, #0x4
        cbnz	x3, Ll5_loop_start
        smlal2	v18.2d, v22.4s, v7.4s
        ldr	q22, [x1, #0x30]
        smlsl	v29.2d, v19.2s, v0.2s
        str	q2, [x0, #0x30]
        smlal2	v17.2d, v27.4s, v21.4s
        ldr	q20, [x2, #0x430]
        ldr	q2, [x1, #0x820]
        smlsl2	v26.2d, v19.4s, v0.4s
        smull2	v7.2d, v22.4s, v23.4s
        ldr	q27, [x1, #0xbe0]
        ldr	q28, [x2, #0xbe0]
        smull	v5.2d, v22.2s, v23.2s
        uzp1	v22.4s, v16.4s, v18.4s
        smlal2	v7.2d, v3.4s, v20.4s
        smlal	v5.2d, v3.2s, v20.2s
        ldr	q3, [x2, #0x20]
        mul	v22.4s, v22.4s, v1.4s
        ldr	q19, [x2, #0xfe0]
        smlal	v4.2d, v27.2s, v28.2s
        uzp2	v29.4s, v29.4s, v26.4s
        smlal2	v17.2d, v27.4s, v28.4s
        ldr	q20, [x1, #0x420]
        smlal2	v17.2d, v6.4s, v19.4s
        ldr	q21, [x1, #0x20]
        smlal	v4.2d, v6.2s, v19.2s
        ldr	q6, [x1, #0x1020]
        smlsl	v16.2d, v22.2s, v0.2s
        ldr	q25, [x2, #0x420]
        smlsl2	v18.2d, v22.4s, v0.4s
        smull	v26.2d, v21.2s, v3.2s
        str	q29, [x0], #0x40
        uzp1	v19.4s, v4.4s, v17.4s
        smull2	v29.2d, v21.4s, v3.4s
        ldr	q24, [x2, #0x820]
        smlal2	v29.2d, v20.4s, v25.4s
        smlal	v26.2d, v20.2s, v25.2s
        ldr	q22, [x1, #0x830]
        mul	v19.4s, v19.4s, v1.4s
        ldr	q23, [x1, #0xc30]
        uzp2	v28.4s, v16.4s, v18.4s
        ldr	q27, [x2, #0x1030]
        ldr	q18, [x1, #0x1030]
        smlal	v26.2d, v2.2s, v24.2s
        ldr	q21, [x2, #0xc20]
        smlal2	v7.2d, v22.4s, v30.4s
        smlal	v5.2d, v22.2s, v30.2s
        ldr	q16, [x2, #0x1020]
        smlal2	v7.2d, v23.4s, v31.4s
        ldr	q30, [x1], #0x40
        ldr	q22, [x2], #0x40
        smlal2	v7.2d, v18.4s, v27.4s
        ldr	q20, [x1, #0x7c0]
        smlal	v5.2d, v23.2s, v31.2s
        ldr	q3, [x2, #0x3d0]
        smlal	v5.2d, v18.2s, v27.2s
        ldr	q25, [x1, #0xbe0]
        smlsl	v4.2d, v19.2s, v0.2s
        stur	q28, [x0, #-0x30]
        smlsl2	v17.2d, v19.4s, v0.4s
        ldr	q31, [x1, #0xfc0]
        smull	v23.2d, v30.2s, v22.2s
        uzp1	v27.4s, v5.4s, v7.4s
        smull2	v22.2d, v30.4s, v22.4s
        smlal	v26.2d, v25.2s, v21.2s
        uzp2	v18.4s, v4.4s, v17.4s
        mul	v28.4s, v27.4s, v1.4s
        ldr	q27, [x1, #0x3c0]
        smlal2	v29.2d, v2.4s, v24.4s
        ldr	q17, [x2, #0x3c0]
        ldur	q19, [x2, #-0x30]
        smlal2	v29.2d, v25.4s, v21.4s
        smlal	v26.2d, v6.2s, v16.2s
        ldr	q21, [x2, #0x7c0]
        ldr	q24, [x2, #0xbc0]
        smlsl	v5.2d, v28.2s, v0.2s
        smlal2	v22.2d, v27.4s, v17.4s
        ldr	q30, [x1, #0xbc0]
        smlal	v23.2d, v27.2s, v17.2s
        ldr	q17, [x1, #0x7d0]
        smlal	v23.2d, v20.2s, v21.2s
        ldr	q25, [x2, #0xfc0]
        ldur	q2, [x1, #-0x30]
        smlal2	v22.2d, v20.4s, v21.4s
        smlal2	v22.2d, v30.4s, v24.4s
        ldr	q4, [x1, #0x3d0]
        smlal	v23.2d, v30.2s, v24.2s
        ldr	q21, [x1, #0xbd0]
        smlal	v23.2d, v31.2s, v25.2s
        ldr	q27, [x2, #0x7d0]
        ldr	q30, [x2, #0xbd0]
        smlal2	v29.2d, v6.4s, v16.4s
        smull2	v16.2d, v2.4s, v19.4s
        stur	q18, [x0, #-0x20]
        ldr	q18, [x1, #0xfd0]
        smlal2	v16.2d, v4.4s, v3.4s
        smlal2	v16.2d, v17.4s, v27.4s
        ldr	q20, [x2, #0xfd0]
        smlal2	v16.2d, v21.4s, v30.4s
        uzp1	v6.4s, v26.4s, v29.4s
        smlal2	v22.2d, v31.4s, v25.4s
        smull	v19.2d, v2.2s, v19.2s
        smlal	v19.2d, v4.2s, v3.2s
        smlal2	v16.2d, v18.4s, v20.4s
        smlal	v19.2d, v17.2s, v27.2s
        smlal	v19.2d, v21.2s, v30.2s
        smlal	v19.2d, v18.2s, v20.2s
        mul	v6.4s, v6.4s, v1.4s
        uzp1	v21.4s, v23.4s, v22.4s
        mul	v31.4s, v21.4s, v1.4s
        smlsl2	v7.2d, v28.4s, v0.4s
        uzp1	v17.4s, v19.4s, v16.4s
        smlsl	v26.2d, v6.2s, v0.2s
        mul	v3.4s, v17.4s, v1.4s
        smlsl	v23.2d, v31.2s, v0.2s
        smlsl2	v29.2d, v6.4s, v0.4s
        smlsl2	v22.2d, v31.4s, v0.4s
        smlsl	v19.2d, v3.2s, v0.2s
        smlsl2	v16.2d, v3.4s, v0.4s
        uzp2	v21.4s, v26.4s, v29.4s
        uzp2	v6.4s, v23.4s, v22.4s
        str	q21, [x0, #0x20]
        uzp2	v30.4s, v5.4s, v7.4s
        uzp2	v3.4s, v19.4s, v16.4s
        str	q6, [x0], #0x40
        stur	q3, [x0, #-0x30]
        stur	q30, [x0, #-0x10]
        ret
        .cfi_endproc

#endif /* MLD_ARITH_BACKEND_AARCH64 */
