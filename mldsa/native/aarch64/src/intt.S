/* Copyright (c) 2022 Arm Limited
 * Copyright (c) 2022 Hanno Becker
 * Copyright (c) 2023 Amin Abdulrahman, Matthias Kannwischer
 * Copyright (c) The mldsa-native project authors
 * SPDX-License-Identifier: MIT
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

#include "../../../common.h"
#if defined(MLD_ARITH_BACKEND_AARCH64)

.macro mulmodq dst, src, const, idx0, idx1
        sqrdmulh t2.4s,      \src\().4s, \const\().s[\idx1\()]
        mul      \dst\().4s, \src\().4s, \const\().s[\idx0\()]
        mls      \dst\().4s, t2.4s,      modulus.s[0]
.endm

.macro mulmod dst, src, const, const_twisted
        sqrdmulh t2.4s,   \src\().4s, \const_twisted\().4s
        mul      \dst\().4s, \src\().4s, \const\().4s
        mls      \dst\().4s, t2.4s,   modulus.s[0]
.endm


.macro gs_butterfly a, b, root, idx0, idx1
        sub tmp.4s,   \a\().4s, \b\().4s
        add \a\().4s, \a\().4s, \b\().4s
        mulmodq  \b, tmp, \root, \idx0, \idx1
.endm

.macro gs_butterfly_v a, b, root, root_twisted
        sub tmp.4s,   \a\().4s, \b\().4s
        add \a\().4s, \a\().4s, \b\().4s
        mulmod  \b, tmp, \root, \root_twisted
.endm

.macro mul_ninv dst0, dst1, dst2, dst3, src0, src1, src2, src3
        mulmod \dst0, \src0, ninv, ninv_tw
        mulmod \dst1, \src1, ninv, ninv_tw
        mulmod \dst2, \src2, ninv, ninv_tw
        mulmod \dst3, \src3, ninv, ninv_tw
.endm

.macro load_roots_123
        ldr q_root0, [r123456_ptr], #64
        ldr q_root1, [r123456_ptr, #(-64 + 16)]
        ldr q_root2, [r123456_ptr, #(-64 + 32)]
        ldr q_root3, [r123456_ptr, #(-64 + 48)]
.endm

.macro load_roots_456
        ldr q_root0, [r123456_ptr], #64
        ldr q_root1, [r123456_ptr, #(-64 + 16)]
        ldr q_root2, [r123456_ptr, #(-64 + 32)]
        ldr q_root3, [r123456_ptr, #(-64 + 48)]
.endm

.macro load_roots_78_part1
        ldr q_root0,    [r78_ptr], #(12*16)
        ldr q_root0_tw, [r78_ptr, #(-12*16 + 1*16)]
        ldr q_root1,    [r78_ptr, #(-12*16 + 2*16)]
        ldr q_root1_tw, [r78_ptr, #(-12*16 + 3*16)]
        ldr q_root2,    [r78_ptr, #(-12*16 + 4*16)]
        ldr q_root2_tw, [r78_ptr, #(-12*16 + 5*16)]
.endm

.macro load_roots_78_part2
        ldr q_root0,    [r78_ptr, #(-12*16 +  6*16)]
        ldr q_root0_tw, [r78_ptr, #(-12*16 +  7*16)]
        ldr q_root1,    [r78_ptr, #(-12*16 +  8*16)]
        ldr q_root1_tw, [r78_ptr, #(-12*16 +  9*16)]
        ldr q_root2,    [r78_ptr, #(-12*16 + 10*16)]
        ldr q_root2_tw, [r78_ptr, #(-12*16 + 11*16)]
.endm

.macro transpose4 data0, data1, data2, data3
        trn1 t0.4s, \data0\().4s, \data1\().4s
        trn2 t1.4s, \data0\().4s, \data1\().4s
        trn1 t2.4s, \data2\().4s, \data3\().4s
        trn2 t3.4s, \data2\().4s, \data3\().4s

        trn2 \data2\().2d, t0.2d, t2.2d
        trn2 \data3\().2d, t1.2d, t3.2d
        trn1 \data0\().2d, t0.2d, t2.2d
        trn1 \data1\().2d, t1.2d, t3.2d
.endm

.macro save_vregs
        sub sp, sp, #(16*4)
        stp  d8,  d9, [sp, #16*0]
        stp d10, d11, [sp, #16*1]
        stp d12, d13, [sp, #16*2]
        stp d14, d15, [sp, #16*3]
.endm

.macro restore_vregs
        ldp  d8,  d9, [sp, #16*0]
        ldp d10, d11, [sp, #16*1]
        ldp d12, d13, [sp, #16*2]
        ldp d14, d15, [sp, #16*3]
        add sp, sp, #(16*4)
.endm

.macro push_stack
        save_vregs
.endm

.macro pop_stack
        restore_vregs
.endm

.text
.global MLD_ASM_NAMESPACE(intt_asm)
.balign 4
MLD_ASM_FN_SYMBOL(intt_asm)
        push_stack

        in          .req x0
        r78_ptr     .req x1
        r123456_ptr .req x2

        inp     .req x3
        inpp    .req x4
        count   .req x5
        xtmp    .req x6
        wtmp    .req w6

        data0  .req v9
        data1  .req v10
        data2  .req v11
        data3  .req v12
        data4  .req v13
        data5  .req v14
        data6  .req v15
        data7  .req v16

        q_data0  .req q9
        q_data1  .req q10
        q_data2  .req q11
        q_data3  .req q12
        q_data4  .req q13
        q_data5  .req q14
        q_data6  .req q15
        q_data7  .req q16

        root0 .req v0
        root1 .req v1
        root2 .req v2
        root3 .req v3

        q_root0 .req q0
        q_root1 .req q1
        q_root2 .req q2
        q_root3 .req q3

        tmp .req v24
        t0  .req v25
        t1  .req v26
        t2  .req v27
        t3  .req v28

        modulus .req v8
        q_modulus .req q8

        mov inp, in
        add inpp, inp, #64
        mov count, #8

        root0_tw .req v4
        root1_tw .req v5
        root2_tw .req v6
        root3_tw .req v7
        q_root0_tw .req q4
        q_root1_tw .req q5
        q_root2_tw .req q6
        q_root3_tw .req q7

        // load q = 8380417
        movz wtmp, #57345
        movk wtmp, #127, lsl #16
        dup modulus.4s, wtmp

        .p2align 2
                                                          // Instructions:    124
                                                          // Expected cycles: 156
                                                          // Expected IPC:    0.79
                                                          //
                                                          // Cycle bound:     156.0
                                                          // IPC bound:       0.79
                                                          //
                                                          // Wall time:     1.97s
                                                          // User time:     1.97s
                                                          //
                                                          // -------------------------------------------------------------------- cycle (expected) --------------------------------------------------------------------->
                                                          // 0                        25                       50                       75                       100                      125                      150
                                                          // |------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|-----
        ld4 {v4.4S, v5.4S, v6.4S, v7.4S}, [x4]            // *...........................................................................................................................................................
        ldr q1, [x1, #144]                                // .........*..................................................................................................................................................
        add v12.4S, v4.4S, v5.4S                          // ...........*................................................................................................................................................
        sub v24.4S, v4.4S, v5.4S                          // ............*...............................................................................................................................................
        add v23.4S, v6.4S, v7.4S                          // .............*..............................................................................................................................................
        sub v22.4S, v6.4S, v7.4S                          // ..............*.............................................................................................................................................
        ld4 {v13.4S, v14.4S, v15.4S, v16.4S}, [x3]        // ...............*............................................................................................................................................
        sqrdmulh v18.4S, v24.4S, v1.4S                    // ........................*...................................................................................................................................
        add v27.4S, v12.4S, v23.4S                        // .........................*..................................................................................................................................
        sub v19.4S, v12.4S, v23.4S                        // ..........................*.................................................................................................................................
        ldr q4, [x1, #128]                                // ...........................*................................................................................................................................
        ldr q17, [x1, #160]                               // .............................*..............................................................................................................................
        mul v0.4S, v24.4S, v4.4S                          // ...............................*............................................................................................................................
        ldr q24, [x1, #176]                               // ................................*...........................................................................................................................
        mul v7.4S, v22.4S, v17.4S                         // ..................................*.........................................................................................................................
        sub v2.4S, v13.4S, v14.4S                         // ...................................*........................................................................................................................
        sqrdmulh v31.4S, v22.4S, v24.4S                   // ....................................*.......................................................................................................................
        add v11.4S, v13.4S, v14.4S                        // .....................................*......................................................................................................................
        sub v6.4S, v15.4S, v16.4S                         // ......................................*.....................................................................................................................
        add v15.4S, v15.4S, v16.4S                        // .......................................*....................................................................................................................
        ldr q9, [x1, #48]                                 // ........................................*...................................................................................................................
        ldr q3, [x1, #80]                                 // ..........................................*.................................................................................................................
        ldr q26, [x1, #64]                                // ............................................*...............................................................................................................
        ldr q10, [x1, #32]                                // ..............................................*.............................................................................................................
        mls v0.4S, v18.4S, v8.S[0]                        // ................................................*...........................................................................................................
        sqrdmulh v9.4S, v2.4S, v9.4S                      // .................................................*..........................................................................................................
        mls v7.4S, v31.4S, v8.S[0]                        // ..................................................*.........................................................................................................
        sqrdmulh v18.4S, v6.4S, v3.4S                     // ...................................................*........................................................................................................
        ldr q30, [x1, #96]                                // ....................................................*.......................................................................................................
        add v24.4S, v0.4S, v7.4S                          // ......................................................*.....................................................................................................
        ldr q29, [x1, #112]                               // .......................................................*....................................................................................................
        trn2 v14.4S, v27.4S, v24.4S                       // .........................................................*..................................................................................................
        trn1 v27.4S, v27.4S, v24.4S                       // ..........................................................*.................................................................................................
        mul v4.4S, v19.4S, v30.4S                         // ...........................................................*................................................................................................
        sqrdmulh v17.4S, v19.4S, v29.4S                   // ............................................................*...............................................................................................
        mul v16.4S, v6.4S, v26.4S                         // .............................................................*..............................................................................................
        mul v24.4S, v2.4S, v10.4S                         // ..............................................................*.............................................................................................
        sub v19.4S, v0.4S, v7.4S                          // ...............................................................*............................................................................................
        ldr q31, [x1, #16]                                // ................................................................*...........................................................................................
        mls v16.4S, v18.4S, v8.S[0]                       // ..................................................................*.........................................................................................
        mls v24.4S, v9.4S, v8.S[0]                        // ...................................................................*........................................................................................
        ldr q1, [x1], #(12*16)                            // ....................................................................*.......................................................................................
        sub v25.4S, v11.4S, v15.4S                        // ......................................................................*.....................................................................................
        sub v3.4S, v24.4S, v16.4S                         // .......................................................................*....................................................................................
        mul v26.4S, v19.4S, v30.4S                        // ........................................................................*...................................................................................
        sqrdmulh v21.4S, v19.4S, v29.4S                   // .........................................................................*..................................................................................
        add v2.4S, v11.4S, v15.4S                         // ..........................................................................*.................................................................................
        sqrdmulh v15.4S, v3.4S, v31.4S                    // ...........................................................................*................................................................................
        mul v19.4S, v25.4S, v1.4S                         // ............................................................................*...............................................................................
        mul v23.4S, v3.4S, v1.4S                          // .............................................................................*..............................................................................
        sqrdmulh v5.4S, v25.4S, v31.4S                    // ..............................................................................*.............................................................................
        mls v4.4S, v17.4S, v8.S[0]                        // ...............................................................................*............................................................................
        mls v26.4S, v21.4S, v8.S[0]                       // ................................................................................*...........................................................................
        mls v23.4S, v15.4S, v8.S[0]                       // .................................................................................*..........................................................................
        mls v19.4S, v5.4S, v8.S[0]                        // ..................................................................................*.........................................................................
        add v29.4S, v24.4S, v16.4S                        // ...................................................................................*........................................................................
        trn2 v24.4S, v4.4S, v26.4S                        // ....................................................................................*.......................................................................
        trn1 v18.4S, v4.4S, v26.4S                        // .....................................................................................*......................................................................
        trn2 v12.4S, v2.4S, v29.4S                        // ......................................................................................*.....................................................................
        trn1 v9.4S, v19.4S, v23.4S                        // .......................................................................................*....................................................................
        trn2 v7.4S, v19.4S, v23.4S                        // ........................................................................................*...................................................................
        trn1 v16.4S, v2.4S, v29.4S                        // .........................................................................................*..................................................................
        trn2 v4.2D, v27.2D, v18.2D                        // ..........................................................................................*.................................................................
        trn2 v19.2D, v14.2D, v24.2D                       // ...........................................................................................*................................................................
        trn1 v20.2D, v27.2D, v18.2D                       // ............................................................................................*...............................................................
        trn1 v10.2D, v14.2D, v24.2D                       // .............................................................................................*..............................................................
        trn1 v22.2D, v12.2D, v7.2D                        // ..............................................................................................*.............................................................
        trn2 v1.2D, v16.2D, v9.2D                         // ...............................................................................................*............................................................
        trn1 v2.2D, v16.2D, v9.2D                         // ................................................................................................*...........................................................
        trn2 v6.2D, v12.2D, v7.2D                         // .................................................................................................*..........................................................
        ldr q16, [x2, #32]                                // ..................................................................................................*.........................................................
        ldr q15, [x2, #48]                                // ....................................................................................................*.......................................................
        sub v28.4S, v4.4S, v19.4S                         // ......................................................................................................*.....................................................
        sub v31.4S, v20.4S, v10.4S                        // .......................................................................................................*....................................................
        ldr q14, [x2, #16]                                // ........................................................................................................*...................................................
        add v9.4S, v2.4S, v22.4S                          // ..........................................................................................................*.................................................
        add v5.4S, v20.4S, v10.4S                         // ...........................................................................................................*................................................
        add v13.4S, v4.4S, v19.4S                         // ............................................................................................................*...............................................
        add v0.4S, v1.4S, v6.4S                           // .............................................................................................................*..............................................
        sub v19.4S, v2.4S, v22.4S                         // ..............................................................................................................*.............................................
        sub v3.4S, v1.4S, v6.4S                           // ...............................................................................................................*............................................
        mul v12.4S, v31.4S, v16.S[2]                      // ................................................................................................................*...........................................
        sqrdmulh v21.4S, v28.4S, v15.S[1]                 // .................................................................................................................*..........................................
        mul v10.4S, v28.4S, v15.S[0]                      // ..................................................................................................................*.........................................
        sqrdmulh v6.4S, v31.4S, v16.S[3]                  // ...................................................................................................................*........................................
        ldr q22, [x2], #64                                // ....................................................................................................................*.......................................
        sub v24.4S, v9.4S, v0.4S                          // ......................................................................................................................*.....................................
        sub v27.4S, v5.4S, v13.4S                         // .......................................................................................................................*....................................
        add v2.4S, v5.4S, v13.4S                          // ........................................................................................................................*...................................
        add v20.4S, v9.4S, v0.4S                          // .........................................................................................................................*..................................
        sqrdmulh v26.4S, v19.4S, v14.S[3]                 // ..........................................................................................................................*.................................
        mul v5.4S, v3.4S, v16.S[0]                        // ...........................................................................................................................*................................
        mul v25.4S, v19.4S, v14.S[2]                      // ............................................................................................................................*...............................
        sqrdmulh v7.4S, v3.4S, v16.S[1]                   // .............................................................................................................................*..............................
        mls v10.4S, v21.4S, v8.S[0]                       // ..............................................................................................................................*.............................
        mls v12.4S, v6.4S, v8.S[0]                        // ...............................................................................................................................*............................
        sub v18.4S, v20.4S, v2.4S                         // ................................................................................................................................*...........................
        mul v13.4S, v27.4S, v14.S[0]                      // .................................................................................................................................*..........................
        mul v16.4S, v24.4S, v22.S[2]                      // ..................................................................................................................................*.........................
        sqrdmulh v30.4S, v24.4S, v22.S[3]                 // ...................................................................................................................................*........................
        sqrdmulh v28.4S, v27.4S, v14.S[1]                 // ....................................................................................................................................*.......................
        mls v25.4S, v26.4S, v8.S[0]                       // .....................................................................................................................................*......................
        mls v5.4S, v7.4S, v8.S[0]                         // ......................................................................................................................................*.....................
        mul v27.4S, v18.4S, v22.S[0]                      // .......................................................................................................................................*....................
        sub v3.4S, v12.4S, v10.4S                         // ........................................................................................................................................*...................
        sqrdmulh v24.4S, v18.4S, v22.S[1]                 // .........................................................................................................................................*..................
        mls v16.4S, v30.4S, v8.S[0]                       // ..........................................................................................................................................*.................
        mls v13.4S, v28.4S, v8.S[0]                       // ...........................................................................................................................................*................
        add v15.4S, v12.4S, v10.4S                        // ............................................................................................................................................*...............
        add v6.4S, v25.4S, v5.4S                          // .............................................................................................................................................*..............
        mul v9.4S, v3.4S, v14.S[0]                        // ..............................................................................................................................................*.............
        mls v27.4S, v24.4S, v8.S[0]                       // ...............................................................................................................................................*............
        sqrdmulh v4.4S, v3.4S, v14.S[1]                   // ................................................................................................................................................*...........
        sub v11.4S, v25.4S, v5.4S                         // .................................................................................................................................................*..........
        add v5.4S, v16.4S, v13.4S                         // ..................................................................................................................................................*.........
        add v31.4S, v20.4S, v2.4S                         // ...................................................................................................................................................*........
        add v26.4S, v6.4S, v15.4S                         // ....................................................................................................................................................*.......
        str q27, [x4], #(16*4)                            // .....................................................................................................................................................*......
        mul v21.4S, v11.4S, v22.S[2]                      // ......................................................................................................................................................*.....
        str q5, [x3, #32]                                 // .......................................................................................................................................................*....
        mls v9.4S, v4.4S, v8.S[0]                         // ........................................................................................................................................................*...
        str q26, [x3, #16]                                // .........................................................................................................................................................*..
        sqrdmulh v23.4S, v11.4S, v22.S[3]                 // ..........................................................................................................................................................*.
        str q31, [x3], #(16*4)                            // ...........................................................................................................................................................*

                                                           // -------------------------------------------------------------------- cycle (expected) --------------------------------------------------------------------->
                                                           // 0                        25                       50                       75                       100                      125                      150
                                                           // |------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|-----
        // ldr q20, [x1, #80]                              // ..........................................*.................................................................................................................
        // ld4 {v9.4S, v10.4S, v11.4S, v12.4S}, [x3]       // ...............*............................................................................................................................................
        // ldr q14, [x1, #160]                             // .............................*..............................................................................................................................
        // sub v25.4S, v11.4S, v12.4S                      // ......................................*.....................................................................................................................
        // ldr q21, [x1, #64]                              // ............................................*...............................................................................................................
        // sqrdmulh v16.4S, v25.4S, v20.4S                 // ...................................................*........................................................................................................
        // add v3.4S, v11.4S, v12.4S                       // .......................................*....................................................................................................................
        // add v31.4S, v9.4S, v10.4S                       // .....................................*......................................................................................................................
        // sub v27.4S, v9.4S, v10.4S                       // ...................................*........................................................................................................................
        // ldr q26, [x1, #176]                             // ................................*...........................................................................................................................
        // mul v25.4S, v25.4S, v21.4S                      // .............................................................*..............................................................................................
        // sub v17.4S, v31.4S, v3.4S                       // ......................................................................*.....................................................................................
        // ld4 {v10.4S, v11.4S, v12.4S, v13.4S}, [x4]      // *...........................................................................................................................................................
        // mls v25.4S, v16.4S, v8.S[0]                     // ..................................................................*.........................................................................................
        // add v1.4S, v31.4S, v3.4S                        // ..........................................................................*.................................................................................
        // sub v16.4S, v12.4S, v13.4S                      // ..............*.............................................................................................................................................
        // ldr q22, [x1, #32]                              // ..............................................*.............................................................................................................
        // mul v2.4S, v16.4S, v14.4S                       // ..................................*.........................................................................................................................
        // ldr q15, [x1, #128]                             // ...........................*................................................................................................................................
        // sqrdmulh v14.4S, v16.4S, v26.4S                 // ....................................*.......................................................................................................................
        // ldr q9, [x1, #144]                              // .........*..................................................................................................................................................
        // ldr q6, [x1, #48]                               // ........................................*...................................................................................................................
        // mls v2.4S, v14.4S, v8.S[0]                      // ..................................................*.........................................................................................................
        // mul v18.4S, v27.4S, v22.4S                      // ..............................................................*.............................................................................................
        // sqrdmulh v23.4S, v27.4S, v6.4S                  // .................................................*..........................................................................................................
        // add v0.4S, v12.4S, v13.4S                       // .............*..............................................................................................................................................
        // ldr q20, [x1], #(12*16)                         // ....................................................................*.......................................................................................
        // add v21.4S, v10.4S, v11.4S                      // ...........*................................................................................................................................................
        // ldr q24, [x1, #-96]                             // ....................................................*.......................................................................................................
        // sub v29.4S, v10.4S, v11.4S                      // ............*...............................................................................................................................................
        // ldr q10, [x1, #-80]                             // .......................................................*....................................................................................................
        // ldr q19, [x1, #-176]                            // ................................................................*...........................................................................................
        // mls v18.4S, v23.4S, v8.S[0]                     // ...................................................................*........................................................................................
        // sqrdmulh v4.4S, v29.4S, v9.4S                   // ........................*...................................................................................................................................
        // sqrdmulh v11.4S, v17.4S, v19.4S                 // ..............................................................................*.............................................................................
        // mul v27.4S, v17.4S, v20.4S                      // ............................................................................*...............................................................................
        // mul v22.4S, v29.4S, v15.4S                      // ...............................*............................................................................................................................
        // sub v9.4S, v18.4S, v25.4S                       // .......................................................................*....................................................................................
        // ldr q13, [x2, #32]                              // ..................................................................................................*.........................................................
        // sqrdmulh v3.4S, v9.4S, v19.4S                   // ...........................................................................*................................................................................
        // mls v27.4S, v11.4S, v8.S[0]                     // ..................................................................................*.........................................................................
        // sub v17.4S, v21.4S, v0.4S                       // ..........................*.................................................................................................................................
        // add v7.4S, v21.4S, v0.4S                        // .........................*..................................................................................................................................
        // mul v29.4S, v9.4S, v20.4S                       // .............................................................................*..............................................................................
        // ldr q12, [x2, #48]                              // ....................................................................................................*.......................................................
        // mul v30.4S, v17.4S, v24.4S                      // ...........................................................*................................................................................................
        // mls v22.4S, v4.4S, v8.S[0]                      // ................................................*...........................................................................................................
        // ldr q9, [x2, #16]                               // ........................................................................................................*...................................................
        // mls v29.4S, v3.4S, v8.S[0]                      // .................................................................................*..........................................................................
        // sub v20.4S, v22.4S, v2.4S                       // ...............................................................*............................................................................................
        // add v5.4S, v18.4S, v25.4S                       // ...................................................................................*........................................................................
        // add v25.4S, v22.4S, v2.4S                       // ......................................................*.....................................................................................................
        // mul v6.4S, v20.4S, v24.4S                       // ........................................................................*...................................................................................
        // trn1 v28.4S, v27.4S, v29.4S                     // .......................................................................................*....................................................................
        // sqrdmulh v14.4S, v17.4S, v10.4S                 // ............................................................*...............................................................................................
        // trn1 v0.4S, v7.4S, v25.4S                       // ..........................................................*.................................................................................................
        // trn1 v4.4S, v1.4S, v5.4S                        // .........................................................................................*..................................................................
        // trn2 v17.4S, v1.4S, v5.4S                       // ......................................................................................*.....................................................................
        // mls v30.4S, v14.4S, v8.S[0]                     // ...............................................................................*............................................................................
        // trn2 v19.4S, v27.4S, v29.4S                     // ........................................................................................*...................................................................
        // sqrdmulh v21.4S, v20.4S, v10.4S                 // .........................................................................*..................................................................................
        // ldr q22, [x2], #64                              // ....................................................................................................................*.......................................
        // trn2 v24.2D, v17.2D, v19.2D                     // .................................................................................................*..........................................................
        // trn1 v26.2D, v17.2D, v19.2D                     // ..............................................................................................*.............................................................
        // trn2 v11.4S, v7.4S, v25.4S                      // .........................................................*..................................................................................................
        // trn1 v14.2D, v4.2D, v28.2D                      // ................................................................................................*...........................................................
        // trn2 v23.2D, v4.2D, v28.2D                      // ...............................................................................................*............................................................
        // sub v25.4S, v14.4S, v26.4S                      // ..............................................................................................................*.............................................
        // add v14.4S, v14.4S, v26.4S                      // ..........................................................................................................*.................................................
        // add v3.4S, v23.4S, v24.4S                       // .............................................................................................................*..............................................
        // sqrdmulh v7.4S, v25.4S, v9.S[3]                 // ..........................................................................................................................*.................................
        // mls v6.4S, v21.4S, v8.S[0]                      // ................................................................................*...........................................................................
        // sub v5.4S, v23.4S, v24.4S                       // ...............................................................................................................*............................................
        // add v26.4S, v14.4S, v3.4S                       // .........................................................................................................................*..................................
        // mul v21.4S, v25.4S, v9.S[2]                     // ............................................................................................................................*...............................
        // trn2 v20.4S, v30.4S, v6.4S                      // ....................................................................................*.......................................................................
        // mul v18.4S, v5.4S, v13.S[0]                     // ...........................................................................................................................*................................
        // trn1 v28.4S, v30.4S, v6.4S                      // .....................................................................................*......................................................................
        // trn2 v31.2D, v11.2D, v20.2D                     // ...........................................................................................*................................................................
        // mls v21.4S, v7.4S, v8.S[0]                      // .....................................................................................................................................*......................
        // trn1 v16.2D, v0.2D, v28.2D                      // ............................................................................................*...............................................................
        // sub v17.4S, v14.4S, v3.4S                       // ......................................................................................................................*.....................................
        // sqrdmulh v5.4S, v5.4S, v13.S[1]                 // .............................................................................................................................*..............................
        // trn1 v2.2D, v11.2D, v20.2D                      // .............................................................................................*..............................................................
        // sqrdmulh v20.4S, v17.4S, v22.S[3]               // ...................................................................................................................................*........................
        // add v30.4S, v16.4S, v2.4S                       // ...........................................................................................................*................................................
        // trn2 v29.2D, v0.2D, v28.2D                      // ..........................................................................................*.................................................................
        // sub v15.4S, v16.4S, v2.4S                       // .......................................................................................................*....................................................
        // sub v7.4S, v29.4S, v31.4S                       // ......................................................................................................*.....................................................
        // add v19.4S, v29.4S, v31.4S                      // ............................................................................................................*...............................................
        // mls v18.4S, v5.4S, v8.S[0]                      // ......................................................................................................................................*.....................
        // sqrdmulh v5.4S, v15.4S, v13.S[3]                // ...................................................................................................................*........................................
        // sqrdmulh v23.4S, v7.4S, v12.S[1]                // .................................................................................................................*..........................................
        // add v3.4S, v30.4S, v19.4S                       // ........................................................................................................................*...................................
        // mul v16.4S, v17.4S, v22.S[2]                    // ..................................................................................................................................*.........................
        // mul v14.4S, v7.4S, v12.S[0]                     // ..................................................................................................................*.........................................
        // sub v27.4S, v30.4S, v19.4S                      // .......................................................................................................................*....................................
        // add v6.4S, v21.4S, v18.4S                       // .............................................................................................................................................*..............
        // mls v16.4S, v20.4S, v8.S[0]                     // ..........................................................................................................................................*.................
        // sqrdmulh v30.4S, v27.4S, v9.S[1]                // ....................................................................................................................................*.......................
        // mls v14.4S, v23.4S, v8.S[0]                     // ..............................................................................................................................*.............................
        // sub v24.4S, v21.4S, v18.4S                      // .................................................................................................................................................*..........
        // add v20.4S, v26.4S, v3.4S                       // ...................................................................................................................................................*........
        // mul v19.4S, v15.4S, v13.S[2]                    // ................................................................................................................*...........................................
        // sub v11.4S, v26.4S, v3.4S                       // ................................................................................................................................*...........................
        // sqrdmulh v23.4S, v24.4S, v22.S[3]               // ..........................................................................................................................................................*.
        // mul v13.4S, v27.4S, v9.S[0]                     // .................................................................................................................................*..........................
        // sqrdmulh v4.4S, v11.4S, v22.S[1]                // .........................................................................................................................................*..................
        // mls v19.4S, v5.4S, v8.S[0]                      // ...............................................................................................................................*............................
        // mul v21.4S, v24.4S, v22.S[2]                    // ......................................................................................................................................................*.....
        // str q20, [x3], #(16*4)                          // ...........................................................................................................................................................*
        // mul v11.4S, v11.4S, v22.S[0]                    // .......................................................................................................................................*....................
        // sub v20.4S, v19.4S, v14.4S                      // ........................................................................................................................................*...................
        // add v15.4S, v19.4S, v14.4S                      // ............................................................................................................................................*...............
        // mls v13.4S, v30.4S, v8.S[0]                     // ...........................................................................................................................................*................
        // sqrdmulh v3.4S, v20.4S, v9.S[1]                 // ................................................................................................................................................*...........
        // add v2.4S, v6.4S, v15.4S                        // ....................................................................................................................................................*.......
        // mls v11.4S, v4.4S, v8.S[0]                      // ...............................................................................................................................................*............
        // mul v9.4S, v20.4S, v9.S[0]                      // ..............................................................................................................................................*.............
        // str q2, [x3, #-48]                              // .........................................................................................................................................................*..
        // add v2.4S, v16.4S, v13.4S                       // ..................................................................................................................................................*.........
        // str q11, [x4], #(16*4)                          // .....................................................................................................................................................*......
        // mls v9.4S, v3.4S, v8.S[0]                       // ........................................................................................................................................................*...
        // str q2, [x3, #-32]                              // .......................................................................................................................................................*....

        sub count, count, #1
layer45678_start:
                                                          // Instructions:    144
                                                          // Expected cycles: 174
                                                          // Expected IPC:    0.83
                                                          //
                                                          // Cycle bound:     174.0
                                                          // IPC bound:       0.83
                                                          //
                                                          // Wall time:     414.13s
                                                          // User time:     414.13s
                                                          //
                                                          // ----------------------------------------------------------------------------- cycle (expected) ------------------------------------------------------------------------------>
                                                          // 0                        25                       50                       75                       100                      125                      150
                                                          // |------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|-----------------------
        mls v21.4S, v23.4S, v8.S[0]                       // *.............................................................................................................................................................................
        ldr q20, [x1, #80]                                // .e............................................................................................................................................................................
        sub v18.4S, v16.4S, v13.4S                        // ...*..........................................................................................................................................................................
        add v31.4S, v21.4S, v9.4S                         // ....*.........................................................................................................................................................................
        sub v30.4S, v21.4S, v9.4S                         // .....*........................................................................................................................................................................
        mul v2.4S, v18.4S, v22.S[0]                       // ......*.......................................................................................................................................................................
        str q31, [x3, #-16]                               // .......*......................................................................................................................................................................
        add x3, x3, #64                                   // .......*......................................................................................................................................................................
        ld4 {v9.4S, v10.4S, v11.4S, v12.4S}, [x3]         // ........e.....................................................................................................................................................................
        ldr q14, [x1, #160]                               // .................e............................................................................................................................................................
        sub v25.4S, v11.4S, v12.4S                        // ...................e..........................................................................................................................................................
        ldr q21, [x1, #64]                                // ....................e.........................................................................................................................................................
        sqrdmulh v16.4S, v25.4S, v20.4S                   // ......................e.......................................................................................................................................................
        sub v24.4S, v6.4S, v15.4S                         // .......................*......................................................................................................................................................
        sqrdmulh v6.4S, v18.4S, v22.S[1]                  // ........................*.....................................................................................................................................................
        mul v0.4S, v30.4S, v22.S[0]                       // .........................*....................................................................................................................................................
        sqrdmulh v23.4S, v30.4S, v22.S[1]                 // ..........................*...................................................................................................................................................
        add v3.4S, v11.4S, v12.4S                         // ...........................e..................................................................................................................................................
        mls v2.4S, v6.4S, v8.S[0]                         // ............................*.................................................................................................................................................
        sqrdmulh v20.4S, v24.4S, v22.S[1]                 // .............................*................................................................................................................................................
        add v31.4S, v9.4S, v10.4S                         // ..............................e...............................................................................................................................................
        sub v27.4S, v9.4S, v10.4S                         // ...............................e..............................................................................................................................................
        str q2, [x4, #-32]                                // ................................*.............................................................................................................................................
        mul v29.4S, v24.4S, v22.S[0]                      // .................................*............................................................................................................................................
        mls v0.4S, v23.4S, v8.S[0]                        // ..................................*...........................................................................................................................................
        ldr q26, [x1, #176]                               // ...................................e..........................................................................................................................................
        mls v29.4S, v20.4S, v8.S[0]                       // .....................................*........................................................................................................................................
        mul v25.4S, v25.4S, v21.4S                        // ......................................e.......................................................................................................................................
        str q0, [x4, #-16]                                // .......................................*......................................................................................................................................
        sub v17.4S, v31.4S, v3.4S                         // ........................................e.....................................................................................................................................
        str q29, [x4, #-48]                               // .........................................*....................................................................................................................................
        add x4, x4, #64                                   // .........................................*....................................................................................................................................
        ld4 {v10.4S, v11.4S, v12.4S, v13.4S}, [x4]        // ..........................................e...................................................................................................................................
        mls v25.4S, v16.4S, v8.S[0]                       // ...................................................e..........................................................................................................................
        add v1.4S, v31.4S, v3.4S                          // ....................................................e.........................................................................................................................
        sub v16.4S, v12.4S, v13.4S                        // .....................................................e........................................................................................................................
        ldr q22, [x1, #32]                                // ......................................................e.......................................................................................................................
        mul v2.4S, v16.4S, v14.4S                         // ........................................................e.....................................................................................................................
        ldr q15, [x1, #128]                               // .........................................................e....................................................................................................................
        sqrdmulh v14.4S, v16.4S, v26.4S                   // ...........................................................e..................................................................................................................
        ldr q9, [x1, #144]                                // ............................................................e.................................................................................................................
        ldr q6, [x1, #48]                                 // ..............................................................e...............................................................................................................
        mls v2.4S, v14.4S, v8.S[0]                        // ................................................................e.............................................................................................................
        mul v18.4S, v27.4S, v22.4S                        // .................................................................e............................................................................................................
        sqrdmulh v23.4S, v27.4S, v6.4S                    // ..................................................................e...........................................................................................................
        add v0.4S, v12.4S, v13.4S                         // ...................................................................e..........................................................................................................
        ldr q20, [x1], #(12*16)                           // ....................................................................e.........................................................................................................
        add v21.4S, v10.4S, v11.4S                        // ......................................................................e.......................................................................................................
        ldr q24, [x1, #-96]                               // .......................................................................e......................................................................................................
        sub v29.4S, v10.4S, v11.4S                        // .........................................................................e....................................................................................................
        ldr q10, [x1, #-80]                               // ..........................................................................e...................................................................................................
        ldr q19, [x1, #-176]                              // ............................................................................e.................................................................................................
        mls v18.4S, v23.4S, v8.S[0]                       // ..............................................................................e...............................................................................................
        sqrdmulh v4.4S, v29.4S, v9.4S                     // ...............................................................................e..............................................................................................
        sqrdmulh v11.4S, v17.4S, v19.4S                   // ................................................................................e.............................................................................................
        mul v27.4S, v17.4S, v20.4S                        // .................................................................................e............................................................................................
        mul v22.4S, v29.4S, v15.4S                        // ..................................................................................e...........................................................................................
        sub v9.4S, v18.4S, v25.4S                         // ...................................................................................e..........................................................................................
        ldr q13, [x2, #32]                                // ....................................................................................e.........................................................................................
        sqrdmulh v3.4S, v9.4S, v19.4S                     // ......................................................................................e.......................................................................................
        mls v27.4S, v11.4S, v8.S[0]                       // .......................................................................................e......................................................................................
        sub v17.4S, v21.4S, v0.4S                         // ........................................................................................e.....................................................................................
        add v7.4S, v21.4S, v0.4S                          // .........................................................................................e....................................................................................
        mul v29.4S, v9.4S, v20.4S                         // ..........................................................................................e...................................................................................
        ldr q12, [x2, #48]                                // ...........................................................................................e..................................................................................
        mul v30.4S, v17.4S, v24.4S                        // .............................................................................................e................................................................................
        mls v22.4S, v4.4S, v8.S[0]                        // ..............................................................................................e...............................................................................
        ldr q9, [x2, #16]                                 // ...............................................................................................e..............................................................................
        mls v29.4S, v3.4S, v8.S[0]                        // .................................................................................................e............................................................................
        sub v20.4S, v22.4S, v2.4S                         // ..................................................................................................e...........................................................................
        add v5.4S, v18.4S, v25.4S                         // ...................................................................................................e..........................................................................
        add v25.4S, v22.4S, v2.4S                         // ....................................................................................................e.........................................................................
        mul v6.4S, v20.4S, v24.4S                         // .....................................................................................................e........................................................................
        trn1 v28.4S, v27.4S, v29.4S                       // ......................................................................................................e.......................................................................
        sqrdmulh v14.4S, v17.4S, v10.4S                   // .......................................................................................................e......................................................................
        trn1 v0.4S, v7.4S, v25.4S                         // ........................................................................................................e.....................................................................
        trn1 v4.4S, v1.4S, v5.4S                          // .........................................................................................................e....................................................................
        trn2 v17.4S, v1.4S, v5.4S                         // ..........................................................................................................e...................................................................
        mls v30.4S, v14.4S, v8.S[0]                       // ...........................................................................................................e..................................................................
        trn2 v19.4S, v27.4S, v29.4S                       // ............................................................................................................e.................................................................
        sqrdmulh v21.4S, v20.4S, v10.4S                   // .............................................................................................................e................................................................
        ldr q22, [x2], #64                                // ..............................................................................................................e...............................................................
        trn2 v24.2D, v17.2D, v19.2D                       // ................................................................................................................e.............................................................
        trn1 v26.2D, v17.2D, v19.2D                       // .................................................................................................................e............................................................
        trn2 v11.4S, v7.4S, v25.4S                        // ..................................................................................................................e...........................................................
        trn1 v14.2D, v4.2D, v28.2D                        // ...................................................................................................................e..........................................................
        trn2 v23.2D, v4.2D, v28.2D                        // ....................................................................................................................e.........................................................
        sub v25.4S, v14.4S, v26.4S                        // .....................................................................................................................e........................................................
        add v14.4S, v14.4S, v26.4S                        // ......................................................................................................................e.......................................................
        add v3.4S, v23.4S, v24.4S                         // .......................................................................................................................e......................................................
        sqrdmulh v7.4S, v25.4S, v9.S[3]                   // ........................................................................................................................e.....................................................
        mls v6.4S, v21.4S, v8.S[0]                        // .........................................................................................................................e....................................................
        sub v5.4S, v23.4S, v24.4S                         // ..........................................................................................................................e...................................................
        add v26.4S, v14.4S, v3.4S                         // ...........................................................................................................................e..................................................
        mul v21.4S, v25.4S, v9.S[2]                       // ............................................................................................................................e.................................................
        trn2 v20.4S, v30.4S, v6.4S                        // .............................................................................................................................e................................................
        mul v18.4S, v5.4S, v13.S[0]                       // ..............................................................................................................................e...............................................
        trn1 v28.4S, v30.4S, v6.4S                        // ...............................................................................................................................e..............................................
        trn2 v31.2D, v11.2D, v20.2D                       // ................................................................................................................................e.............................................
        mls v21.4S, v7.4S, v8.S[0]                        // .................................................................................................................................e............................................
        trn1 v16.2D, v0.2D, v28.2D                        // ..................................................................................................................................e...........................................
        sub v17.4S, v14.4S, v3.4S                         // ...................................................................................................................................e..........................................
        sqrdmulh v5.4S, v5.4S, v13.S[1]                   // ....................................................................................................................................e.........................................
        trn1 v2.2D, v11.2D, v20.2D                        // .....................................................................................................................................e........................................
        sqrdmulh v20.4S, v17.4S, v22.S[3]                 // ......................................................................................................................................e.......................................
        add v30.4S, v16.4S, v2.4S                         // .......................................................................................................................................e......................................
        trn2 v29.2D, v0.2D, v28.2D                        // ........................................................................................................................................e.....................................
        sub v15.4S, v16.4S, v2.4S                         // .........................................................................................................................................e....................................
        sub v7.4S, v29.4S, v31.4S                         // ..........................................................................................................................................e...................................
        add v19.4S, v29.4S, v31.4S                        // ...........................................................................................................................................e..................................
        mls v18.4S, v5.4S, v8.S[0]                        // ............................................................................................................................................e.................................
        sqrdmulh v5.4S, v15.4S, v13.S[3]                  // .............................................................................................................................................e................................
        sqrdmulh v23.4S, v7.4S, v12.S[1]                  // ..............................................................................................................................................e...............................
        add v3.4S, v30.4S, v19.4S                         // ...............................................................................................................................................e..............................
        mul v16.4S, v17.4S, v22.S[2]                      // ................................................................................................................................................e.............................
        mul v14.4S, v7.4S, v12.S[0]                       // .................................................................................................................................................e............................
        sub v27.4S, v30.4S, v19.4S                        // ..................................................................................................................................................e...........................
        add v6.4S, v21.4S, v18.4S                         // ...................................................................................................................................................e..........................
        mls v16.4S, v20.4S, v8.S[0]                       // ....................................................................................................................................................e.........................
        sqrdmulh v30.4S, v27.4S, v9.S[1]                  // .....................................................................................................................................................e........................
        mls v14.4S, v23.4S, v8.S[0]                       // ......................................................................................................................................................e.......................
        sub v24.4S, v21.4S, v18.4S                        // .......................................................................................................................................................e......................
        add v20.4S, v26.4S, v3.4S                         // ........................................................................................................................................................e.....................
        mul v19.4S, v15.4S, v13.S[2]                      // .........................................................................................................................................................e....................
        sub v11.4S, v26.4S, v3.4S                         // ..........................................................................................................................................................e...................
        sqrdmulh v23.4S, v24.4S, v22.S[3]                 // ...........................................................................................................................................................e..................
        mul v13.4S, v27.4S, v9.S[0]                       // ............................................................................................................................................................e.................
        sqrdmulh v4.4S, v11.4S, v22.S[1]                  // .............................................................................................................................................................e................
        mls v19.4S, v5.4S, v8.S[0]                        // ..............................................................................................................................................................e...............
        mul v21.4S, v24.4S, v22.S[2]                      // ...............................................................................................................................................................e..............
        str q20, [x3], #(16*4)                            // ................................................................................................................................................................e.............
        mul v11.4S, v11.4S, v22.S[0]                      // .................................................................................................................................................................e............
        sub v20.4S, v19.4S, v14.4S                        // ..................................................................................................................................................................e...........
        add v15.4S, v19.4S, v14.4S                        // ...................................................................................................................................................................e..........
        mls v13.4S, v30.4S, v8.S[0]                       // ....................................................................................................................................................................e.........
        sqrdmulh v3.4S, v20.4S, v9.S[1]                   // .....................................................................................................................................................................e........
        add v2.4S, v6.4S, v15.4S                          // ......................................................................................................................................................................e.......
        mls v11.4S, v4.4S, v8.S[0]                        // .......................................................................................................................................................................e......
        mul v9.4S, v20.4S, v9.S[0]                        // ........................................................................................................................................................................e.....
        str q2, [x3, #-48]                                // .........................................................................................................................................................................e....
        add v2.4S, v16.4S, v13.4S                         // ..........................................................................................................................................................................e...
        str q11, [x4], #(16*4)                            // ...........................................................................................................................................................................e..
        mls v9.4S, v3.4S, v8.S[0]                         // ............................................................................................................................................................................e.
        str q2, [x3, #-32]                                // .............................................................................................................................................................................e

                                                           // -------------------------------------------------------------------------------------------------- cycle (expected) -------------------------------------------------------------------------------------------------->
                                                           // 0                        25                       50                       75                       100                      125                      150                      175                      200
                                                           // |------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|--------------
        // ld4 {v9.4S, v10.4S, v11.4S, v12.4S}, [x3]       // .......e.....................................................................................................................................................................'.......~.................................
        // ld4 {v13.4S, v14.4S, v15.4S, v16.4S}, [x4]      // .........................................e...................................................................................................................................'.........................................
        // ldr q0,    [x1], #(12*16)                       // ...................................................................e.........................................................................................................'.........................................
        // ldr q4, [x1, #(-12*16 + 1*16)]                  // ...........................................................................e.................................................................................................'.........................................
        // ldr q1,    [x1, #(-12*16 + 2*16)]               // .....................................................e.......................................................................................................................'.........................................
        // ldr q5, [x1, #(-12*16 + 3*16)]                  // .............................................................e...............................................................................................................'.........................................
        // ldr q2,    [x1, #(-12*16 + 4*16)]               // ...................e.........................................................................................................................................................'...................~.....................
        // ldr q6, [x1, #(-12*16 + 5*16)]                  // e............................................................................................................................................................................'~........................................
        // sub v24.4s,   v9.4s, v10.4s                     // ..............................e..............................................................................................................................................'..............................~..........
        // add v9.4s, v9.4s, v10.4s                        // .............................e...............................................................................................................................................'.............................~...........
        // sqrdmulh v27.4s,   v24.4s, v5.4s                // .................................................................e...........................................................................................................'.........................................
        // mul      v10.4s, v24.4s, v1.4s                  // ................................................................e............................................................................................................'.........................................
        // mls      v10.4s, v27.4s,   v8.s[0]              // .............................................................................e...............................................................................................'.........................................
        // sub v24.4s,   v11.4s, v12.4s                    // ..................e..........................................................................................................................................................'..................~......................
        // add v11.4s, v11.4s, v12.4s                      // ..........................e..................................................................................................................................................'..........................~..............
        // sqrdmulh v27.4s,   v24.4s, v6.4s                // .....................e.......................................................................................................................................................'.....................~...................
        // mul      v12.4s, v24.4s, v2.4s                  // .....................................e.......................................................................................................................................'.....................................~...
        // mls      v12.4s, v27.4s,   v8.s[0]              // ..................................................e..........................................................................................................................'.........................................
        // sub v24.4s,   v9.4s, v11.4s                     // .......................................e.....................................................................................................................................'.......................................~.
        // add v9.4s, v9.4s, v11.4s                        // ...................................................e.........................................................................................................................'.........................................
        // sqrdmulh v27.4s,   v24.4s, v4.4s                // ...............................................................................e.............................................................................................'.........................................
        // mul      v11.4s, v24.4s, v0.4s                  // ................................................................................e............................................................................................'.........................................
        // mls      v11.4s, v27.4s,   v8.s[0]              // ......................................................................................e......................................................................................'.........................................
        // sub v24.4s,   v10.4s, v12.4s                    // ..................................................................................e..........................................................................................'.........................................
        // add v10.4s, v10.4s, v12.4s                      // ..................................................................................................e..........................................................................'.........................................
        // sqrdmulh v27.4s,   v24.4s, v4.4s                // .....................................................................................e.......................................................................................'.........................................
        // mul      v12.4s, v24.4s, v0.4s                  // .........................................................................................e...................................................................................'.........................................
        // mls      v12.4s, v27.4s,   v8.s[0]              // ................................................................................................e............................................................................'.........................................
        // ldr q0,    [x1, #(-12*16 +  6*16)]              // ......................................................................e......................................................................................................'.........................................
        // ldr q4, [x1, #(-12*16 +  7*16)]                 // .........................................................................e...................................................................................................'.........................................
        // ldr q1,    [x1, #(-12*16 +  8*16)]              // ........................................................e....................................................................................................................'.........................................
        // ldr q5, [x1, #(-12*16 +  9*16)]                 // ...........................................................e.................................................................................................................'.........................................
        // ldr q2,    [x1, #(-12*16 + 10*16)]              // ................e............................................................................................................................................................'................~........................
        // ldr q6, [x1, #(-12*16 + 11*16)]                 // ..................................e..........................................................................................................................................'..................................~......
        // sub v24.4s,   v13.4s, v14.4s                    // ........................................................................e....................................................................................................'.........................................
        // add v13.4s, v13.4s, v14.4s                      // .....................................................................e.......................................................................................................'.........................................
        // sqrdmulh v27.4s,   v24.4s, v5.4s                // ..............................................................................e..............................................................................................'.........................................
        // mul      v14.4s, v24.4s, v1.4s                  // .................................................................................e...........................................................................................'.........................................
        // mls      v14.4s, v27.4s,   v8.s[0]              // .............................................................................................e...............................................................................'.........................................
        // sub v24.4s,   v15.4s, v16.4s                    // ....................................................e........................................................................................................................'.........................................
        // add v15.4s, v15.4s, v16.4s                      // ..................................................................e..........................................................................................................'.........................................
        // sqrdmulh v27.4s,   v24.4s, v6.4s                // ..........................................................e..................................................................................................................'.........................................
        // mul      v16.4s, v24.4s, v2.4s                  // .......................................................e.....................................................................................................................'.........................................
        // mls      v16.4s, v27.4s,   v8.s[0]              // ...............................................................e.............................................................................................................'.........................................
        // sub v24.4s,   v13.4s, v15.4s                    // .......................................................................................e.....................................................................................'.........................................
        // add v13.4s, v13.4s, v15.4s                      // ........................................................................................e....................................................................................'.........................................
        // sqrdmulh v27.4s,   v24.4s, v4.4s                // ......................................................................................................e......................................................................'.........................................
        // mul      v15.4s, v24.4s, v0.4s                  // ............................................................................................e................................................................................'.........................................
        // mls      v15.4s, v27.4s,   v8.s[0]              // ..........................................................................................................e..................................................................'.........................................
        // sub v24.4s,   v14.4s, v16.4s                    // .................................................................................................e...........................................................................'.........................................
        // add v14.4s, v14.4s, v16.4s                      // ...................................................................................................e.........................................................................'.........................................
        // sqrdmulh v27.4s,   v24.4s, v4.4s                // ............................................................................................................e................................................................'.........................................
        // mul      v16.4s, v24.4s, v0.4s                  // ....................................................................................................e........................................................................'.........................................
        // mls      v16.4s, v27.4s,   v8.s[0]              // ........................................................................................................................e....................................................'.........................................
        // trn1 v25.4s, v9.4s, v10.4s                      // ........................................................................................................e....................................................................'.........................................
        // trn2 v26.4s, v9.4s, v10.4s                      // .........................................................................................................e...................................................................'.........................................
        // trn1 v27.4s, v11.4s, v12.4s                     // .....................................................................................................e.......................................................................'.........................................
        // trn2 v28.4s, v11.4s, v12.4s                     // ...........................................................................................................e.................................................................'.........................................
        // trn2 v11.2d, v25.2d, v27.2d                     // ...................................................................................................................e.........................................................'.........................................
        // trn2 v12.2d, v26.2d, v28.2d                     // ...............................................................................................................e.............................................................'.........................................
        // trn1 v9.2d, v25.2d, v27.2d                      // ..................................................................................................................e..........................................................'.........................................
        // trn1 v10.2d, v26.2d, v28.2d                     // ................................................................................................................e............................................................'.........................................
        // trn1 v25.4s, v13.4s, v14.4s                     // .......................................................................................................e.....................................................................'.........................................
        // trn2 v26.4s, v13.4s, v14.4s                     // .................................................................................................................e...........................................................'.........................................
        // trn1 v27.4s, v15.4s, v16.4s                     // ..............................................................................................................................e..............................................'.........................................
        // trn2 v28.4s, v15.4s, v16.4s                     // ............................................................................................................................e................................................'.........................................
        // trn2 v15.2d, v25.2d, v27.2d                     // .......................................................................................................................................e.....................................'.........................................
        // trn2 v16.2d, v26.2d, v28.2d                     // ...............................................................................................................................e.............................................'.........................................
        // trn1 v13.2d, v25.2d, v27.2d                     // .................................................................................................................................e...........................................'.........................................
        // trn1 v14.2d, v26.2d, v28.2d                     // ....................................................................................................................................e........................................'.........................................
        // ldr q0, [x2], #64                               // .............................................................................................................e...............................................................'.........................................
        // ldr q1, [x2, #(-64 + 16)]                       // ..............................................................................................e..............................................................................'.........................................
        // ldr q2, [x2, #(-64 + 32)]                       // ...................................................................................e.........................................................................................'.........................................
        // ldr q3, [x2, #(-64 + 48)]                       // ..........................................................................................e..................................................................................'.........................................
        // sub v24.4s,   v9.4s, v10.4s                     // ....................................................................................................................e........................................................'.........................................
        // add v9.4s, v9.4s, v10.4s                        // .....................................................................................................................e.......................................................'.........................................
        // sqrdmulh v27.4s,      v24.4s, v1.s[3]           // .......................................................................................................................e.....................................................'.........................................
        // mul      v10.4s, v24.4s, v1.s[2]                // ...........................................................................................................................e.................................................'.........................................
        // mls      v10.4s, v27.4s,      v8.s[0]           // ................................................................................................................................e............................................'.........................................
        // sub v24.4s,   v11.4s, v12.4s                    // .........................................................................................................................e...................................................'.........................................
        // add v11.4s, v11.4s, v12.4s                      // ......................................................................................................................e......................................................'.........................................
        // sqrdmulh v27.4s,      v24.4s, v2.s[1]           // ...................................................................................................................................e.........................................'.........................................
        // mul      v12.4s, v24.4s, v2.s[0]                // .............................................................................................................................e...............................................'.........................................
        // mls      v12.4s, v27.4s,      v8.s[0]           // ...........................................................................................................................................e.................................'.........................................
        // sub v24.4s,   v13.4s, v14.4s                    // ........................................................................................................................................e....................................'.........................................
        // add v13.4s, v13.4s, v14.4s                      // ......................................................................................................................................e......................................'.........................................
        // sqrdmulh v27.4s,      v24.4s, v2.s[3]           // ............................................................................................................................................e................................'.........................................
        // mul      v14.4s, v24.4s, v2.s[2]                // ........................................................................................................................................................e....................'.........................................
        // mls      v14.4s, v27.4s,      v8.s[0]           // .............................................................................................................................................................e...............'.........................................
        // sub v24.4s,   v15.4s, v16.4s                    // .........................................................................................................................................e...................................'.........................................
        // add v15.4s, v15.4s, v16.4s                      // ..........................................................................................................................................e..................................'.........................................
        // sqrdmulh v27.4s,      v24.4s, v3.s[1]           // .............................................................................................................................................e...............................'.........................................
        // mul      v16.4s, v24.4s, v3.s[0]                // ................................................................................................................................................e............................'.........................................
        // mls      v16.4s, v27.4s,      v8.s[0]           // .....................................................................................................................................................e.......................'.........................................
        // sub v24.4s,   v9.4s, v11.4s                     // ..................................................................................................................................e..........................................'.........................................
        // add v9.4s, v9.4s, v11.4s                        // ..........................................................................................................................e..................................................'.........................................
        // sqrdmulh v27.4s,      v24.4s, v0.s[3]           // .....................................................................................................................................e.......................................'.........................................
        // mul      v11.4s, v24.4s, v0.s[2]                // ...............................................................................................................................................e.............................'.........................................
        // mls      v11.4s, v27.4s,      v8.s[0]           // ...................................................................................................................................................e.........................'.........................................
        // sub v24.4s,   v10.4s, v12.4s                    // ......................................................................................................................................................e......................'.........................................
        // add v10.4s, v10.4s, v12.4s                      // ..................................................................................................................................................e..........................'.........................................
        // sqrdmulh v27.4s,      v24.4s, v0.s[3]           // ..........................................................................................................................................................e..................'.........................................
        // mul      v12.4s, v24.4s, v0.s[2]                // ..............................................................................................................................................................e..............'.........................................
        // mls      v12.4s, v27.4s,      v8.s[0]           // .............................................................................................................................................................................*.........................................
        // sub v24.4s,   v13.4s, v15.4s                    // .................................................................................................................................................e...........................'.........................................
        // add v13.4s, v13.4s, v15.4s                      // ..............................................................................................................................................e..............................'.........................................
        // sqrdmulh v27.4s,      v24.4s, v1.s[1]           // ....................................................................................................................................................e........................'.........................................
        // mul      v15.4s, v24.4s, v1.s[0]                // ...........................................................................................................................................................e.................'.........................................
        // mls      v15.4s, v27.4s,      v8.s[0]           // ...................................................................................................................................................................e.........'.........................................
        // sub v24.4s,   v14.4s, v16.4s                    // .................................................................................................................................................................e...........'.........................................
        // add v14.4s, v14.4s, v16.4s                      // ..................................................................................................................................................................e..........'.........................................
        // sqrdmulh v27.4s,      v24.4s, v1.s[1]           // ....................................................................................................................................................................e........'.........................................
        // mul      v16.4s, v24.4s, v1.s[0]                // .......................................................................................................................................................................e.....'.........................................
        // mls      v16.4s, v27.4s,      v8.s[0]           // ...........................................................................................................................................................................e.'.........................................
        // sub v24.4s,   v9.4s, v13.4s                     // .........................................................................................................................................................e...................'.........................................
        // add v9.4s, v9.4s, v13.4s                        // .......................................................................................................................................................e.....................'.........................................
        // sqrdmulh v27.4s,      v24.4s, v0.s[1]           // ............................................................................................................................................................e................'.........................................
        // mul      v13.4s, v24.4s, v0.s[0]                // ................................................................................................................................................................e............'.........................................
        // mls      v13.4s, v27.4s,      v8.s[0]           // ......................................................................................................................................................................e......'.........................................
        // sub v24.4s,   v10.4s, v14.4s                    // ......................~......................................................................................................................................................'......................*..................
        // add v10.4s, v10.4s, v14.4s                      // .....................................................................................................................................................................e.......'.........................................
        // sqrdmulh v27.4s,      v24.4s, v0.s[1]           // ............................~................................................................................................................................................'............................*............
        // mul      v14.4s, v24.4s, v0.s[0]                // ................................~............................................................................................................................................'................................*........
        // mls      v14.4s, v27.4s,      v8.s[0]           // ....................................~........................................................................................................................................'....................................*....
        // sub v24.4s,   v11.4s, v15.4s                    // ..~..........................................................................................................................................................................'..*......................................
        // add v11.4s, v11.4s, v15.4s                      // .........................................................................................................................................................................e...'.........................................
        // sqrdmulh v27.4s,      v24.4s, v0.s[1]           // .......................~.....................................................................................................................................................'.......................*.................
        // mul      v15.4s, v24.4s, v0.s[0]                // .....~.......................................................................................................................................................................'.....*...................................
        // mls      v15.4s, v27.4s,      v8.s[0]           // ...........................~.................................................................................................................................................'...........................*.............
        // sub v24.4s,   v12.4s, v16.4s                    // ....~........................................................................................................................................................................'....*....................................
        // add v12.4s, v12.4s, v16.4s                      // ...~.........................................................................................................................................................................'...*.....................................
        // sqrdmulh v27.4s,      v24.4s, v0.s[1]           // .........................~...................................................................................................................................................'.........................*...............
        // mul      v16.4s, v24.4s, v0.s[0]                // ........................~....................................................................................................................................................'........................*................
        // mls      v16.4s, v27.4s,      v8.s[0]           // .................................~...........................................................................................................................................'.................................*.......
        // str  q9, [x3], #(16*4)                          // ...............................................................................................................................................................e.............'.........................................
        // str  q10, [x3, #(-16*4 +  1*16)]                // ........................................................................................................................................................................e....'.........................................
        // str  q11, [x3, #(-16*4 +  2*16)]                // ............................................................................................................................................................................e'.........................................
        // str  q12, [x3, #(-16*4 +  3*16)]                // ......~......................................................................................................................................................................'......*..................................
        // str  q13, [x4], #(16*4)                         // ..........................................................................................................................................................................e..'.........................................
        // str  q14, [x4, #(-16*4 +  1*16)]                // ........................................~....................................................................................................................................'........................................*
        // str  q15, [x4, #(-16*4 +  2*16)]                // ...............................~.............................................................................................................................................'...............................*.........
        // str  q16, [x4, #(-16*4 +  3*16)]                // ......................................~......................................................................................................................................'......................................*..
        // add x3, x3, #64                                 // ......~......................................................................................................................................................................'......*..................................
        // add x4, x4, #64                                 // ........................................~....................................................................................................................................'........................................*

        sub count, count, 1
        cbnz count, layer45678_start
                                                 // Instructions:    20
                                                 // Expected cycles: 20
                                                 // Expected IPC:    1.00
                                                 //
                                                 // Cycle bound:     20.0
                                                 // IPC bound:       1.00
                                                 //
                                                 // Wall time:     0.04s
                                                 // User time:     0.04s
                                                 //
                                                 // ----- cycle (expected) ------>
                                                 // 0                        25
                                                 // |------------------------|----
        sub v11.4S, v16.4S, v13.4S               // *.............................
        mls v21.4S, v23.4S, v8.S[0]              // .*............................
        sub v19.4S, v6.4S, v15.4S                // ..*...........................
        sqrdmulh v16.4S, v11.4S, v22.S[1]        // ...*..........................
        mul v6.4S, v11.4S, v22.S[0]              // ....*.........................
        sub v13.4S, v21.4S, v9.4S                // .....*........................
        mul v0.4S, v19.4S, v22.S[0]              // ......*.......................
        sqrdmulh v15.4S, v19.4S, v22.S[1]        // .......*......................
        sqrdmulh v29.4S, v13.4S, v22.S[1]        // ........*.....................
        mul v13.4S, v13.4S, v22.S[0]             // .........*....................
        add v17.4S, v21.4S, v9.4S                // ..........*...................
        mls v6.4S, v16.4S, v8.S[0]               // ...........*..................
        mls v0.4S, v15.4S, v8.S[0]               // ............*.................
        str q17, [x3, #-16]                      // .............*................
        mls v13.4S, v29.4S, v8.S[0]              // ..............*...............
        str q6, [x4, #-32]                       // ...............*..............
        add x3, x3, #64                          // ...............*..............
        str q0, [x4, #-48]                       // .................*............
        str q13, [x4, #-16]                      // ...................*..........
        add x4, x4, #64                          // ...................*..........

                                                  // ------ cycle (expected) ------>
                                                  // 0                        25
                                                  // |------------------------|-----
        // mls v21.4S, v23.4S, v8.S[0]            // .*.............................
        // sub v18.4S, v16.4S, v13.4S             // *..............................
        // add v31.4S, v21.4S, v9.4S              // ..........*....................
        // sub v30.4S, v21.4S, v9.4S              // .....*.........................
        // mul v2.4S, v18.4S, v22.S[0]            // ....*..........................
        // str q31, [x3, #-16]                    // .............*.................
        // add x3, x3, #64                        // ...............*...............
        // sub v24.4S, v6.4S, v15.4S              // ..*............................
        // sqrdmulh v6.4S, v18.4S, v22.S[1]       // ...*...........................
        // mul v0.4S, v30.4S, v22.S[0]            // .........*.....................
        // sqrdmulh v23.4S, v30.4S, v22.S[1]      // ........*......................
        // mls v2.4S, v6.4S, v8.S[0]              // ...........*...................
        // sqrdmulh v20.4S, v24.4S, v22.S[1]      // .......*.......................
        // str q2, [x4, #-32]                     // ...............*...............
        // mul v29.4S, v24.4S, v22.S[0]           // ......*........................
        // mls v0.4S, v23.4S, v8.S[0]             // ..............*................
        // mls v29.4S, v20.4S, v8.S[0]            // ............*..................
        // str q0, [x4, #-16]                     // ...................*...........
        // str q29, [x4, #-48]                    // .................*.............
        // add x4, x4, #64                        // ...................*...........


        ninv             .req v25
        ninv_tw          .req v26


        mov count, #8


        // load ninv
        mov wtmp, #16382 // 2^(32 - 8) mod Q
        dup ninv.4s, wtmp

        // load ninv_tw = 4197891
        movz wtmp, #3587
        movk wtmp, #64, lsl #16
        dup ninv_tw.4s, wtmp

        load_roots_123

        .p2align 2
                                                // Instructions:    96
                                                // Expected cycles: 111
                                                // Expected IPC:    0.86
                                                //
                                                // Cycle bound:     111.0
                                                // IPC bound:       0.86
                                                //
                                                // Wall time:     3.65s
                                                // User time:     3.65s
                                                //
                                                // ---------------------------------------------- cycle (expected) ---------------------------------------------->
                                                // 0                        25                       50                       75                       100
                                                // |------------------------|------------------------|------------------------|------------------------|----------
        ldr q23, [x0, #640]                     // *..............................................................................................................
        ldr q5, [x0, #512]                      // ..*............................................................................................................
        ldr q17, [x0, #256]                     // ....*..........................................................................................................
        sub v4.4S, v5.4S, v23.4S                // ......*........................................................................................................
        add v11.4S, v5.4S, v23.4S               // .......*.......................................................................................................
        ldr q19, [x0, #384]                     // ........*......................................................................................................
        ldr q14, [x0, #0]                       // ..........*....................................................................................................
        add v23.4S, v17.4S, v19.4S              // ............*..................................................................................................
        sub v13.4S, v17.4S, v19.4S              // .............*.................................................................................................
        sqrdmulh v18.4S, v4.4S, v2.S[3]         // ..............*................................................................................................
        mul v22.4S, v4.4S, v2.S[2]              // ...............*...............................................................................................
        ldr q30, [x0, #896]                     // ................*..............................................................................................
        ldr q29, [x0, #768]                     // ..................*............................................................................................
        ldr q15, [x0, #128]                     // ....................*..........................................................................................
        add v5.4S, v29.4S, v30.4S               // ......................*........................................................................................
        sub v17.4S, v29.4S, v30.4S              // .......................*.......................................................................................
        add v7.4S, v14.4S, v15.4S               // ........................*......................................................................................
        sub v10.4S, v11.4S, v5.4S               // .........................*.....................................................................................
        add v29.4S, v11.4S, v5.4S               // ..........................*....................................................................................
        sub v6.4S, v14.4S, v15.4S               // ...........................*...................................................................................
        add v31.4S, v7.4S, v23.4S               // ............................*..................................................................................
        sub v21.4S, v7.4S, v23.4S               // .............................*.................................................................................
        sqrdmulh v23.4S, v13.4S, v2.S[1]        // ..............................*................................................................................
        mul v15.4S, v13.4S, v2.S[0]             // ...............................*...............................................................................
        mls v22.4S, v18.4S, v8.S[0]             // ................................*..............................................................................
        mul v9.4S, v17.4S, v3.S[0]              // .................................*.............................................................................
        sqrdmulh v18.4S, v6.4S, v1.S[3]         // ..................................*............................................................................
        mul v30.4S, v6.4S, v1.S[2]              // ...................................*...........................................................................
        sqrdmulh v17.4S, v17.4S, v3.S[1]        // ....................................*..........................................................................
        mls v15.4S, v23.4S, v8.S[0]             // .....................................*.........................................................................
        sqrdmulh v7.4S, v10.4S, v1.S[1]         // ......................................*........................................................................
        mls v30.4S, v18.4S, v8.S[0]             // .......................................*.......................................................................
        mls v9.4S, v17.4S, v8.S[0]              // ........................................*......................................................................
        mul v6.4S, v21.4S, v0.S[2]              // .........................................*.....................................................................
        mul v23.4S, v10.4S, v1.S[0]             // ..........................................*....................................................................
        sub v17.4S, v30.4S, v15.4S              // ...........................................*...................................................................
        sub v16.4S, v22.4S, v9.4S               // ............................................*..................................................................
        sqrdmulh v14.4S, v21.4S, v0.S[3]        // .............................................*.................................................................
        mul v5.4S, v17.4S, v0.S[2]              // ..............................................*................................................................
        mul v28.4S, v16.4S, v1.S[0]             // ...............................................*...............................................................
        sqrdmulh v13.4S, v17.4S, v0.S[3]        // ................................................*..............................................................
        sqrdmulh v12.4S, v16.4S, v1.S[1]        // .................................................*.............................................................
        mls v6.4S, v14.4S, v8.S[0]              // ..................................................*............................................................
        mls v23.4S, v7.4S, v8.S[0]              // ...................................................*...........................................................
        sub v16.4S, v31.4S, v29.4S              // ....................................................*..........................................................
        add v21.4S, v31.4S, v29.4S              // .....................................................*.........................................................
        mls v28.4S, v12.4S, v8.S[0]             // ......................................................*........................................................
        mls v5.4S, v13.4S, v8.S[0]              // .......................................................*.......................................................
        add v7.4S, v30.4S, v15.4S               // ........................................................*......................................................
        add v11.4S, v22.4S, v9.4S               // .........................................................*.....................................................
        add v15.4S, v6.4S, v23.4S               // ..........................................................*....................................................
        sub v4.4S, v5.4S, v28.4S                // ...........................................................*...................................................
        add v12.4S, v7.4S, v11.4S               // ............................................................*..................................................
        sub v29.4S, v6.4S, v23.4S               // .............................................................*.................................................
        sqrdmulh v13.4S, v21.4S, v26.4S         // ..............................................................*................................................
        sqrdmulh v23.4S, v15.4S, v26.4S         // ...............................................................*...............................................
        mul v24.4S, v4.4S, v0.S[0]              // ................................................................*..............................................
        mul v9.4S, v16.4S, v0.S[0]              // .................................................................*.............................................
        mul v14.4S, v21.4S, v25.4S              // ..................................................................*............................................
        mul v30.4S, v12.4S, v25.4S              // ...................................................................*...........................................
        sqrdmulh v6.4S, v12.4S, v26.4S          // ....................................................................*..........................................
        sqrdmulh v27.4S, v16.4S, v0.S[1]        // .....................................................................*.........................................
        sqrdmulh v10.4S, v4.4S, v0.S[1]         // ......................................................................*........................................
        mul v15.4S, v15.4S, v25.4S              // .......................................................................*.......................................
        ldr q19, [x0, #784]                     // ........................................................................*......................................
        ldr q18, [x0, #912]                     // ..........................................................................*....................................
        ldr q16, [x0, #528]                     // ............................................................................*..................................
        ldr q21, [x0, #656]                     // ..............................................................................*................................
        ldr q20, [x0, #16]                      // ................................................................................*..............................
        ldr q31, [x0, #144]                     // ..................................................................................*............................
        add v12.4S, v16.4S, v21.4S              // ....................................................................................*..........................
        mls v24.4S, v10.4S, v8.S[0]             // .....................................................................................*.........................
        sqrdmulh v22.4S, v29.4S, v0.S[1]        // ......................................................................................*........................
        mls v30.4S, v6.4S, v8.S[0]              // .......................................................................................*.......................
        mls v9.4S, v27.4S, v8.S[0]              // ........................................................................................*......................
        mul v27.4S, v29.4S, v0.S[0]             // .........................................................................................*.....................
        add v29.4S, v19.4S, v18.4S              // ..........................................................................................*....................
        mls v14.4S, v13.4S, v8.S[0]             // ...........................................................................................*...................
        mls v15.4S, v23.4S, v8.S[0]             // ............................................................................................*..................
        sub v4.4S, v20.4S, v31.4S               // .............................................................................................*.................
        add v17.4S, v5.4S, v28.4S               // ..............................................................................................*................
        str q30, [x0, #128]                     // ...............................................................................................*...............
        sub v30.4S, v12.4S, v29.4S              // ................................................................................................*..............
        sub v6.4S, v19.4S, v18.4S               // .................................................................................................*.............
        sqrdmulh v13.4S, v17.4S, v26.4S         // ..................................................................................................*............
        str q9, [x0, #512]                      // ...................................................................................................*...........
        mul v18.4S, v4.4S, v1.S[2]              // ....................................................................................................*..........
        mls v27.4S, v22.4S, v8.S[0]             // .....................................................................................................*.........
        str q24, [x0, #896]                     // ......................................................................................................*........
        sub v19.4S, v7.4S, v11.4S               // .......................................................................................................*.......
        sub v28.4S, v16.4S, v21.4S              // ........................................................................................................*......
        add v9.4S, v12.4S, v29.4S               // .........................................................................................................*.....
        str q14, [x0], #(16)                    // ..........................................................................................................*....
        ldr q5, [x0, #384]                      // ...........................................................................................................*...
        str q15, [x0, #240]                     // .............................................................................................................*.
        ldr q24, [x0, #256]                     // ..............................................................................................................*

                                                 // ---------------------------------------------- cycle (expected) ---------------------------------------------->
                                                 // 0                        25                       50                       75                       100
                                                 // |------------------------|------------------------|------------------------|------------------------|----------
        // ldr q23, [x0, #640]                   // *..............................................................................................................
        // ldr q11, [x0, #512]                   // ..*............................................................................................................
        // add v4.4S, v11.4S, v23.4S             // .......*.......................................................................................................
        // sub v28.4S, v11.4S, v23.4S            // ......*........................................................................................................
        // ldr q10, [x0, #768]                   // ..................*............................................................................................
        // ldr q6, [x0, #896]                    // ................*..............................................................................................
        // ldr q20, [x0, #0]                     // ..........*....................................................................................................
        // add v13.4S, v10.4S, v6.4S             // ......................*........................................................................................
        // ldr q31, [x0, #128]                   // ....................*..........................................................................................
        // add v9.4S, v4.4S, v13.4S              // ..........................*....................................................................................
        // sub v6.4S, v10.4S, v6.4S              // .......................*.......................................................................................
        // ldr q5, [x0, #384]                    // ........*......................................................................................................
        // ldr q24, [x0, #256]                   // ....*..........................................................................................................
        // sub v30.4S, v4.4S, v13.4S             // .........................*.....................................................................................
        // sub v4.4S, v20.4S, v31.4S             // ...........................*...................................................................................
        // mul v18.4S, v4.4S, v1.S[2]            // ...................................*...........................................................................
        // sub v10.4S, v24.4S, v5.4S             // .............*.................................................................................................
        // add v7.4S, v24.4S, v5.4S              // ............*..................................................................................................
        // ldr q23, [x0, #656]                   // ..............................................................................*................................
        // sqrdmulh v4.4S, v4.4S, v1.S[3]        // ..................................*............................................................................
        // add v21.4S, v20.4S, v31.4S            // ........................*......................................................................................
        // ldr q11, [x0, #528]                   // ............................................................................*..................................
        // add v24.4S, v21.4S, v7.4S             // ............................*..................................................................................
        // sub v22.4S, v21.4S, v7.4S             // .............................*.................................................................................
        // mul v15.4S, v10.4S, v2.S[0]           // ...............................*...............................................................................
        // sqrdmulh v21.4S, v10.4S, v2.S[1]      // ..............................*................................................................................
        // mls v18.4S, v4.4S, v8.S[0]            // .......................................*.......................................................................
        // sqrdmulh v20.4S, v28.4S, v2.S[3]      // ..............*................................................................................................
        // mul v16.4S, v28.4S, v2.S[2]           // ...............*...............................................................................................
        // add v4.4S, v11.4S, v23.4S             // ....................................................................................*..........................
        // mul v14.4S, v22.4S, v0.S[2]           // .........................................*.....................................................................
        // mul v29.4S, v6.4S, v3.S[0]            // .................................*.............................................................................
        // sub v28.4S, v11.4S, v23.4S            // ........................................................................................................*......
        // sqrdmulh v23.4S, v6.4S, v3.S[1]       // ....................................*..........................................................................
        // mls v15.4S, v21.4S, v8.S[0]           // .....................................*.........................................................................
        // mls v16.4S, v20.4S, v8.S[0]           // ................................*..............................................................................
        // mls v29.4S, v23.4S, v8.S[0]           // ........................................*......................................................................
        // sub v21.4S, v18.4S, v15.4S            // ...........................................*...................................................................
        // add v12.4S, v18.4S, v15.4S            // ........................................................*......................................................
        // sub v5.4S, v16.4S, v29.4S             // ............................................*..................................................................
        // mul v17.4S, v21.4S, v0.S[2]           // ..............................................*................................................................
        // add v18.4S, v16.4S, v29.4S            // .........................................................*.....................................................
        // sqrdmulh v16.4S, v30.4S, v1.S[1]      // ......................................*........................................................................
        // sqrdmulh v15.4S, v5.4S, v1.S[1]       // .................................................*.............................................................
        // sqrdmulh v13.4S, v21.4S, v0.S[3]      // ................................................*..............................................................
        // sub v21.4S, v24.4S, v9.4S             // ....................................................*..........................................................
        // mul v23.4S, v5.4S, v1.S[0]            // ...............................................*...............................................................
        // mls v17.4S, v13.4S, v8.S[0]           // .......................................................*.......................................................
        // sqrdmulh v5.4S, v21.4S, v0.S[1]       // .....................................................................*.........................................
        // mul v19.4S, v21.4S, v0.S[0]           // .................................................................*.............................................
        // mls v23.4S, v15.4S, v8.S[0]           // ......................................................*........................................................
        // add v11.4S, v24.4S, v9.4S             // .....................................................*.........................................................
        // mls v19.4S, v5.4S, v8.S[0]            // ........................................................................................*......................
        // sub v13.4S, v17.4S, v23.4S            // ...........................................................*...................................................
        // add v17.4S, v17.4S, v23.4S            // ..............................................................................................*................
        // sqrdmulh v23.4S, v22.4S, v0.S[3]      // .............................................*.................................................................
        // add v9.4S, v12.4S, v18.4S             // ............................................................*..................................................
        // str q19, [x0, #512]                   // ...................................................................................................*...........
        // sub v19.4S, v12.4S, v18.4S            // .......................................................................................................*.......
        // mul v18.4S, v13.4S, v0.S[0]           // ................................................................*..............................................
        // sqrdmulh v13.4S, v13.4S, v0.S[1]      // ......................................................................*........................................
        // ldr q10, [x0, #784]                   // ........................................................................*......................................
        // ldr q6, [x0, #912]                    // ..........................................................................*....................................
        // mls v18.4S, v13.4S, v8.S[0]           // .....................................................................................*.........................
        // sqrdmulh v13.4S, v11.4S, v26.4S       // ..............................................................*................................................
        // mul v11.4S, v11.4S, v25.4S            // ..................................................................*............................................
        // mul v22.4S, v9.4S, v25.4S             // ...................................................................*...........................................
        // str q18, [x0, #896]                   // ......................................................................................................*........
        // ldr q20, [x0, #16]                    // ................................................................................*..............................
        // mls v11.4S, v13.4S, v8.S[0]           // ...........................................................................................*...................
        // add v13.4S, v10.4S, v6.4S             // ..........................................................................................*....................
        // ldr q31, [x0, #144]                   // ..................................................................................*............................
        // str q11, [x0], #(16)                  // ..........................................................................................................*....
        // mul v11.4S, v30.4S, v1.S[0]           // ..........................................*....................................................................
        // sqrdmulh v30.4S, v9.4S, v26.4S        // ....................................................................*..........................................
        // add v9.4S, v4.4S, v13.4S              // .........................................................................................................*.....
        // sub v6.4S, v10.4S, v6.4S              // .................................................................................................*.............
        // mls v14.4S, v23.4S, v8.S[0]           // ..................................................*............................................................
        // mls v11.4S, v16.4S, v8.S[0]           // ...................................................*...........................................................
        // mls v22.4S, v30.4S, v8.S[0]           // .......................................................................................*.......................
        // ldr q5, [x0, #384]                    // ...........................................................................................................*...
        // add v30.4S, v14.4S, v11.4S            // ..........................................................*....................................................
        // sub v18.4S, v14.4S, v11.4S            // .............................................................*.................................................
        // ldr q24, [x0, #256]                   // ..............................................................................................................*
        // sqrdmulh v21.4S, v30.4S, v26.4S       // ...............................................................*...............................................
        // mul v7.4S, v30.4S, v25.4S             // .......................................................................*.......................................
        // sub v30.4S, v4.4S, v13.4S             // ................................................................................................*..............
        // sqrdmulh v13.4S, v18.4S, v0.S[1]      // ......................................................................................*........................
        // mul v27.4S, v18.4S, v0.S[0]           // .........................................................................................*.....................
        // str q22, [x0, #112]                   // ...............................................................................................*...............
        // sub v4.4S, v20.4S, v31.4S             // .............................................................................................*.................
        // mls v7.4S, v21.4S, v8.S[0]            // ............................................................................................*..................
        // mls v27.4S, v13.4S, v8.S[0]           // .....................................................................................................*.........
        // sqrdmulh v13.4S, v17.4S, v26.4S       // ..................................................................................................*............
        // mul v18.4S, v4.4S, v1.S[2]            // ....................................................................................................*..........
        // str q7, [x0, #240]                    // .............................................................................................................*.

        sub count, count, #2
layer123_start:
                                                // Instructions:    88
                                                // Expected cycles: 96
                                                // Expected IPC:    0.92
                                                //
                                                // Cycle bound:     96.0
                                                // IPC bound:       0.92
                                                //
                                                // Wall time:     35.25s
                                                // User time:     35.25s
                                                //
                                                // -------------------------------------- cycle (expected) --------------------------------------->
                                                // 0                        25                       50                       75
                                                // |------------------------|------------------------|------------------------|--------------------
        sub v10.4S, v24.4S, v5.4S               // *...............................................................................................
        add v7.4S, v24.4S, v5.4S                // .*..............................................................................................
        ldr q23, [x0, #656]                     // ..e.............................................................................................
        sqrdmulh v4.4S, v4.4S, v1.S[3]          // ....*...........................................................................................
        add v21.4S, v20.4S, v31.4S              // .....*..........................................................................................
        ldr q11, [x0, #528]                     // ......e.........................................................................................
        add v24.4S, v21.4S, v7.4S               // ........*.......................................................................................
        sub v22.4S, v21.4S, v7.4S               // .........*......................................................................................
        mul v15.4S, v10.4S, v2.S[0]             // ..........*.....................................................................................
        sqrdmulh v21.4S, v10.4S, v2.S[1]        // ...........*....................................................................................
        mls v18.4S, v4.4S, v8.S[0]              // ............*...................................................................................
        sqrdmulh v20.4S, v28.4S, v2.S[3]        // .............*..................................................................................
        mul v16.4S, v28.4S, v2.S[2]             // ..............*.................................................................................
        add v4.4S, v11.4S, v23.4S               // ...............e................................................................................
        mul v14.4S, v22.4S, v0.S[2]             // ................*...............................................................................
        mul v29.4S, v6.4S, v3.S[0]              // .................*..............................................................................
        sub v28.4S, v11.4S, v23.4S              // ..................e.............................................................................
        mul v11.4S, v19.4S, v0.S[0]             // ...................l............................................................................
        sqrdmulh v23.4S, v6.4S, v3.S[1]         // ....................*...........................................................................
        mls v15.4S, v21.4S, v8.S[0]             // .....................*..........................................................................
        sqrdmulh v10.4S, v19.4S, v0.S[1]        // ......................l.........................................................................
        mls v16.4S, v20.4S, v8.S[0]             // .......................*........................................................................
        mls v29.4S, v23.4S, v8.S[0]             // ........................*.......................................................................
        sub v21.4S, v18.4S, v15.4S              // .........................*......................................................................
        add v12.4S, v18.4S, v15.4S              // ..........................*.....................................................................
        str q27, [x0, #752]                     // ...........................l....................................................................
        mul v23.4S, v17.4S, v25.4S              // ............................l...................................................................
        sub v5.4S, v16.4S, v29.4S               // .............................*..................................................................
        mul v17.4S, v21.4S, v0.S[2]             // ..............................*.................................................................
        add v18.4S, v16.4S, v29.4S              // ...............................*................................................................
        sqrdmulh v16.4S, v30.4S, v1.S[1]        // ................................*...............................................................
        sqrdmulh v15.4S, v5.4S, v1.S[1]         // .................................*..............................................................
        mls v23.4S, v13.4S, v8.S[0]             // ..................................l.............................................................
        mls v11.4S, v10.4S, v8.S[0]             // ...................................l............................................................
        sqrdmulh v13.4S, v21.4S, v0.S[3]        // ....................................*...........................................................
        sub v21.4S, v24.4S, v9.4S               // .....................................*..........................................................
        str q23, [x0, #368]                     // ......................................l.........................................................
        mul v23.4S, v5.4S, v1.S[0]              // .......................................*........................................................
        mls v17.4S, v13.4S, v8.S[0]             // ........................................*.......................................................
        sqrdmulh v5.4S, v21.4S, v0.S[1]         // .........................................*......................................................
        mul v19.4S, v21.4S, v0.S[0]             // ..........................................*.....................................................
        mls v23.4S, v15.4S, v8.S[0]             // ...........................................*....................................................
        str q11, [x0, #624]                     // ............................................l...................................................
        add v11.4S, v24.4S, v9.4S               // .............................................*..................................................
        mls v19.4S, v5.4S, v8.S[0]              // ..............................................*.................................................
        sub v13.4S, v17.4S, v23.4S              // ...............................................*................................................
        add v17.4S, v17.4S, v23.4S              // ................................................*...............................................
        sqrdmulh v23.4S, v22.4S, v0.S[3]        // .................................................*..............................................
        add v9.4S, v12.4S, v18.4S               // ..................................................*.............................................
        str q19, [x0, #512]                     // ...................................................*............................................
        sub v19.4S, v12.4S, v18.4S              // ....................................................*...........................................
        mul v18.4S, v13.4S, v0.S[0]             // .....................................................*..........................................
        sqrdmulh v13.4S, v13.4S, v0.S[1]        // ......................................................*.........................................
        ldr q10, [x0, #784]                     // .......................................................e........................................
        ldr q6, [x0, #912]                      // .........................................................e......................................
        mls v18.4S, v13.4S, v8.S[0]             // ...........................................................*....................................
        sqrdmulh v13.4S, v11.4S, v26.4S         // ............................................................*...................................
        mul v11.4S, v11.4S, v25.4S              // .............................................................*..................................
        mul v22.4S, v9.4S, v25.4S               // ..............................................................*.................................
        str q18, [x0, #896]                     // ...............................................................*................................
        ldr q20, [x0, #16]                      // ................................................................e...............................
        mls v11.4S, v13.4S, v8.S[0]             // ..................................................................*.............................
        add v13.4S, v10.4S, v6.4S               // ...................................................................e............................
        ldr q31, [x0, #144]                     // ....................................................................e...........................
        str q11, [x0], #(16)                    // ......................................................................*.........................
        mul v11.4S, v30.4S, v1.S[0]             // .......................................................................*........................
        sqrdmulh v30.4S, v9.4S, v26.4S          // ........................................................................*.......................
        add v9.4S, v4.4S, v13.4S                // .........................................................................e......................
        sub v6.4S, v10.4S, v6.4S                // ..........................................................................e.....................
        mls v14.4S, v23.4S, v8.S[0]             // ...........................................................................*....................
        mls v11.4S, v16.4S, v8.S[0]             // ............................................................................*...................
        mls v22.4S, v30.4S, v8.S[0]             // .............................................................................*..................
        ldr q5, [x0, #384]                      // ..............................................................................e.................
        add v30.4S, v14.4S, v11.4S              // ................................................................................*...............
        sub v18.4S, v14.4S, v11.4S              // .................................................................................*..............
        ldr q24, [x0, #256]                     // ..................................................................................e.............
        sqrdmulh v21.4S, v30.4S, v26.4S         // ....................................................................................*...........
        mul v7.4S, v30.4S, v25.4S               // .....................................................................................*..........
        sub v30.4S, v4.4S, v13.4S               // ......................................................................................e.........
        sqrdmulh v13.4S, v18.4S, v0.S[1]        // .......................................................................................*........
        mul v27.4S, v18.4S, v0.S[0]             // ........................................................................................*.......
        str q22, [x0, #112]                     // .........................................................................................*......
        sub v4.4S, v20.4S, v31.4S               // ..........................................................................................e.....
        mls v7.4S, v21.4S, v8.S[0]              // ...........................................................................................*....
        mls v27.4S, v13.4S, v8.S[0]             // ............................................................................................*...
        sqrdmulh v13.4S, v17.4S, v26.4S         // .............................................................................................*..
        mul v18.4S, v4.4S, v1.S[2]              // ..............................................................................................e.
        str q7, [x0, #240]                      // ...............................................................................................*

                                                      // ------------------------------------------------------------------------------------------------------------ cycle (expected) ------------------------------------------------------------------------------------------------------------>
                                                      // 0                        25                       50                       75                       100                      125                      150                      175                      200                      225
                                                      // |------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|---------
        // ldr q9, [x0, #(0*(1024/8))]                // ..............................................................e...............................'...............................................................~...............................'............................................
        // ldr q10, [x0, #(1*(1024/8))]               // ..................................................................e...........................'...................................................................~...........................'............................................
        // ldr q11, [x0, #(2*(1024/8))]               // ................................................................................e.............'.................................................................................~.............'............................................
        // ldr q12, [x0, #(3*(1024/8))]               // ............................................................................e.................'.............................................................................~.................'............................................
        // ldr q13, [x0, #(4*(1024/8))]               // ....e.........................................................................................'.....~.........................................................................................'.....~......................................
        // ldr q14, [x0, #(5*(1024/8))]               // e.............................................................................................'.~.............................................................................................'.~..........................................
        // ldr q15, [x0, #(6*(1024/8))]               // .....................................................e........................................'......................................................~........................................'............................................
        // ldr q16, [x0, #(7*(1024/8))]               // .......................................................e......................................'........................................................~......................................'............................................
        // sub v24.4s,   v9.4s, v10.4s                // ........................................................................................e.....'.........................................................................................~.....'............................................
        // add v9.4s, v9.4s, v10.4s                   // ...~..........................................................................................'....*..........................................................................................'....~.......................................
        // sqrdmulh v27.4s,      v24.4s, v1.s[3]      // ..~...........................................................................................'...*...........................................................................................'...~........................................
        // mul      v10.4s, v24.4s, v1.s[2]           // ............................................................................................e.'.............................................................................................~.'............................................
        // mls      v10.4s, v27.4s,      v8.s[0]      // ..........~...................................................................................'...........*...................................................................................'...........~................................
        // sub v24.4s,   v11.4s, v12.4s               // ..............................................................................................*...............................................................................................~............................................
        // add v11.4s, v11.4s, v12.4s                 // ..............................................................................................'*..............................................................................................'~...........................................
        // sqrdmulh v27.4s,      v24.4s, v2.s[1]      // .........~....................................................................................'..........*....................................................................................'..........~.................................
        // mul      v12.4s, v24.4s, v2.s[0]           // ........~.....................................................................................'.........*.....................................................................................'.........~..................................
        // mls      v12.4s, v27.4s,      v8.s[0]      // ...................~..........................................................................'....................*..........................................................................'....................~.......................
        // sub v24.4s,   v13.4s, v14.4s               // ................e.............................................................................'.................~.............................................................................'.................~..........................
        // add v13.4s, v13.4s, v14.4s                 // .............e................................................................................'..............~................................................................................'..............~.............................
        // sqrdmulh v27.4s,      v24.4s, v2.s[3]      // ...........~..................................................................................'............*..................................................................................'............~...............................
        // mul      v14.4s, v24.4s, v2.s[2]           // ............~.................................................................................'.............*.................................................................................'.............~..............................
        // mls      v14.4s, v27.4s,      v8.s[0]      // .....................~........................................................................'......................*........................................................................'......................~.....................
        // sub v24.4s,   v15.4s, v16.4s               // ........................................................................e.....................'.........................................................................~.....................'............................................
        // add v15.4s, v15.4s, v16.4s                 // .................................................................e............................'..................................................................~............................'............................................
        // sqrdmulh v27.4s,      v24.4s, v3.s[1]      // ..................~...........................................................................'...................*...........................................................................'...................~........................
        // mul      v16.4s, v24.4s, v3.s[0]           // ...............~..............................................................................'................*..............................................................................'................~...........................
        // mls      v16.4s, v27.4s,      v8.s[0]      // ......................~.......................................................................'.......................*.......................................................................'.......................~....................
        // sub v24.4s,   v9.4s, v11.4s                // .......~......................................................................................'........*......................................................................................'........~...................................
        // add v9.4s, v9.4s, v11.4s                   // ......~.......................................................................................'.......*.......................................................................................'.......~....................................
        // sqrdmulh v27.4s,      v24.4s, v0.s[3]      // ...............................................~..............................................'................................................*..............................................'............................................
        // mul      v11.4s, v24.4s, v0.s[2]           // ..............~...............................................................................'...............*...............................................................................'...............~............................
        // mls      v11.4s, v27.4s,      v8.s[0]      // .........................................................................~....................'..........................................................................*....................'............................................
        // sub v24.4s,   v10.4s, v12.4s               // .......................~......................................................................'........................*......................................................................'........................~...................
        // add v10.4s, v10.4s, v12.4s                 // ........................~.....................................................................'.........................*.....................................................................'.........................~..................
        // sqrdmulh v27.4s,      v24.4s, v0.s[3]      // ..................................~...........................................................'...................................*...........................................................'...................................~........
        // mul      v12.4s, v24.4s, v0.s[2]           // ............................~.................................................................'.............................*.................................................................'.............................~..............
        // mls      v12.4s, v27.4s,      v8.s[0]      // ......................................~.......................................................'.......................................*.......................................................'.......................................~....
        // sub v24.4s,   v13.4s, v15.4s               // ....................................................................................e.........'.....................................................................................~.........'............................................
        // add v13.4s, v13.4s, v15.4s                 // .......................................................................e......................'........................................................................~......................'............................................
        // sqrdmulh v27.4s,      v24.4s, v1.s[1]      // ..............................~...............................................................'...............................*...............................................................'...............................~............
        // mul      v15.4s, v24.4s, v1.s[0]           // .....................................................................~........................'......................................................................*........................'............................................
        // mls      v15.4s, v27.4s,      v8.s[0]      // ..........................................................................~...................'...........................................................................*...................'............................................
        // sub v24.4s,   v14.4s, v16.4s               // ...........................~..................................................................'............................*..................................................................'............................~...............
        // add v14.4s, v14.4s, v16.4s                 // .............................~................................................................'..............................*................................................................'..............................~.............
        // sqrdmulh v27.4s,      v24.4s, v1.s[1]      // ...............................~..............................................................'................................*..............................................................'................................~...........
        // mul      v16.4s, v24.4s, v1.s[0]           // .....................................~........................................................'......................................*........................................................'......................................~.....
        // mls      v16.4s, v27.4s,      v8.s[0]      // .........................................~....................................................'..........................................*....................................................'..........................................~.
        // sub v24.4s,   v9.4s, v13.4s                // ...................................~..........................................................'....................................*..........................................................'....................................~.......
        // add v9.4s, v9.4s, v13.4s                   // ...........................................~..................................................'............................................*..................................................'............................................
        // sqrdmulh v27.4s,      v24.4s, v0.s[1]      // .......................................~......................................................'........................................*......................................................'........................................~...
        // mul      v13.4s, v24.4s, v0.s[0]           // ........................................~.....................................................'.........................................*.....................................................'.........................................~..
        // mls      v13.4s, v27.4s,      v8.s[0]      // ............................................~.................................................'.............................................*.................................................'............................................
        // sub v24.4s,   v10.4s, v14.4s               // ..................................................~...........................................'...................................................*...........................................'............................................
        // add v10.4s, v10.4s, v14.4s                 // ................................................~.............................................'.................................................*.............................................'............................................
        // sqrdmulh v27.4s,      v24.4s, v0.s[1]      // ....................~.........................................................................'.....................~.........................................................................'.....................l......................
        // mul      v14.4s, v24.4s, v0.s[0]           // .................~............................................................................'..................~............................................................................'..................l.........................
        // mls      v14.4s, v27.4s,      v8.s[0]      // .................................~............................................................'..................................~............................................................'..................................l.........
        // sub v24.4s,   v11.4s, v15.4s               // ...............................................................................~..............'................................................................................*..............'............................................
        // add v11.4s, v11.4s, v15.4s                 // ..............................................................................~...............'...............................................................................*...............'............................................
        // sqrdmulh v27.4s,      v24.4s, v0.s[1]      // .....................................................................................~........'......................................................................................*........'............................................
        // mul      v15.4s, v24.4s, v0.s[0]           // ......................................................................................~.......'.......................................................................................*.......'............................................
        // mls      v15.4s, v27.4s,      v8.s[0]      // ..........................................................................................~...'...........................................................................................*...'............................................
        // sub v24.4s,   v12.4s, v16.4s               // .............................................~................................................'..............................................*................................................'............................................
        // add v12.4s, v12.4s, v16.4s                 // ..............................................~...............................................'...............................................*...............................................'............................................
        // sqrdmulh v27.4s,      v24.4s, v0.s[1]      // ....................................................~.........................................'.....................................................*.........................................'............................................
        // mul      v16.4s, v24.4s, v0.s[0]           // ...................................................~..........................................'....................................................*..........................................'............................................
        // mls      v16.4s, v27.4s,      v8.s[0]      // .........................................................~....................................'..........................................................*....................................'............................................
        // str q13, [x0, #(4*(1024/8))]               // .................................................~............................................'..................................................*............................................'............................................
        // str q14, [x0, #(5*(1024/8))]               // ..........................................~...................................................'...........................................~...................................................'...........................................l
        // str q15, [x0, #(6*(1024/8))]               // .........................~....................................................................'..........................~....................................................................'..........................l.................
        // str q16, [x0, #(7*(1024/8))]               // .............................................................~................................'..............................................................*................................'............................................
        // sqrdmulh v27.4s,   v9.4s, v26.4s           // ..........................................................~...................................'...........................................................*...................................'............................................
        // mul      v9.4s, v9.4s, v25.4s              // ...........................................................~..................................'............................................................*..................................'............................................
        // mls      v9.4s, v27.4s,   v8.s[0]          // ................................................................~.............................'.................................................................*.............................'............................................
        // sqrdmulh v27.4s,   v10.4s, v26.4s          // ......................................................................~.......................'.......................................................................*.......................'............................................
        // mul      v10.4s, v10.4s, v25.4s            // ............................................................~.................................'.............................................................*.................................'............................................
        // mls      v10.4s, v27.4s,   v8.s[0]         // ...........................................................................~..................'............................................................................*..................'............................................
        // sqrdmulh v27.4s,   v11.4s, v26.4s          // ..................................................................................~...........'...................................................................................*...........'............................................
        // mul      v11.4s, v11.4s, v25.4s            // ...................................................................................~..........'....................................................................................*..........'............................................
        // mls      v11.4s, v27.4s,   v8.s[0]         // .........................................................................................~....'..........................................................................................*....'............................................
        // sqrdmulh v27.4s,   v12.4s, v26.4s          // ...........................................................................................~..'............................................................................................*..'............................................
        // mul      v12.4s, v12.4s, v25.4s            // ..........................~...................................................................'...........................~...................................................................'...........................l................
        // mls      v12.4s, v27.4s,   v8.s[0]         // ................................~.............................................................'.................................~.............................................................'.................................l..........
        // str q9, [x0], #(16)                        // ....................................................................~.........................'.....................................................................*.........................'............................................
        // str q10, [x0, #(-16 + 1*(1024/8))]         // .......................................................................................~......'........................................................................................*......'............................................
        // str q11, [x0, #(-16 + 2*(1024/8))]         // .............................................................................................~'..............................................................................................*'............................................
        // str q12, [x0, #(-16 + 3*(1024/8))]         // ....................................~.........................................................'.....................................~.........................................................'.....................................l......

        sub count, count, 1
        cbnz count, layer123_start
                                                // Instructions:    80
                                                // Expected cycles: 82
                                                // Expected IPC:    0.98
                                                //
                                                // Cycle bound:     82.0
                                                // IPC bound:       0.98
                                                //
                                                // Wall time:     14.94s
                                                // User time:     14.94s
                                                //
                                                // ------------------------------- cycle (expected) -------------------------------->
                                                // 0                        25                       50                       75
                                                // |------------------------|------------------------|------------------------|------
        str q27, [x0, #752]                     // *.................................................................................
        mul v23.4S, v30.4S, v1.S[0]             // .*................................................................................
        sqrdmulh v14.4S, v30.4S, v1.S[1]        // ..*...............................................................................
        sub v11.4S, v24.4S, v5.4S               // ...*..............................................................................
        add v5.4S, v24.4S, v5.4S                // ....*.............................................................................
        mul v24.4S, v6.4S, v3.S[0]              // .....*............................................................................
        sqrdmulh v7.4S, v6.4S, v3.S[1]          // ......*...........................................................................
        add v29.4S, v20.4S, v31.4S              // .......*..........................................................................
        mul v31.4S, v17.4S, v25.4S              // ........*.........................................................................
        sqrdmulh v15.4S, v19.4S, v0.S[1]        // .........*........................................................................
        mul v6.4S, v19.4S, v0.S[0]              // ..........*.......................................................................
        sqrdmulh v27.4S, v28.4S, v2.S[3]        // ...........*......................................................................
        mul v16.4S, v28.4S, v2.S[2]             // ............*.....................................................................
        mls v31.4S, v13.4S, v8.S[0]             // .............*....................................................................
        mls v23.4S, v14.4S, v8.S[0]             // ..............*...................................................................
        sqrdmulh v28.4S, v4.4S, v1.S[3]         // ...............*..................................................................
        add v19.4S, v29.4S, v5.4S               // ................*.................................................................
        mul v4.4S, v11.4S, v2.S[0]              // .................*................................................................
        sqrdmulh v21.4S, v11.4S, v2.S[1]        // ..................*...............................................................
        sub v12.4S, v19.4S, v9.4S               // ...................*..............................................................
        add v10.4S, v19.4S, v9.4S               // ....................*.............................................................
        sub v20.4S, v29.4S, v5.4S               // .....................*............................................................
        mls v18.4S, v28.4S, v8.S[0]             // ......................*...........................................................
        mls v24.4S, v7.4S, v8.S[0]              // .......................*..........................................................
        mls v6.4S, v15.4S, v8.S[0]              // ........................*.........................................................
        mls v16.4S, v27.4S, v8.S[0]             // .........................*........................................................
        mul v13.4S, v20.4S, v0.S[2]             // ..........................*.......................................................
        mls v4.4S, v21.4S, v8.S[0]              // ...........................*......................................................
        sqrdmulh v5.4S, v12.4S, v0.S[1]         // ............................*.....................................................
        sub v22.4S, v16.4S, v24.4S              // .............................*....................................................
        str q31, [x0, #368]                     // ..............................*...................................................
        sqrdmulh v7.4S, v20.4S, v0.S[3]         // ...............................*..................................................
        sub v9.4S, v18.4S, v4.4S                // ................................*.................................................
        sqrdmulh v19.4S, v22.4S, v1.S[1]        // .................................*................................................
        sqrdmulh v21.4S, v10.4S, v26.4S         // ..................................*...............................................
        mls v13.4S, v7.4S, v8.S[0]              // ...................................*..............................................
        add v27.4S, v16.4S, v24.4S              // ....................................*.............................................
        mul v30.4S, v12.4S, v0.S[0]             // .....................................*............................................
        mul v12.4S, v10.4S, v25.4S              // ......................................*...........................................
        sub v11.4S, v13.4S, v23.4S              // .......................................*..........................................
        add v14.4S, v13.4S, v23.4S              // ........................................*.........................................
        mul v24.4S, v22.4S, v1.S[0]             // .........................................*........................................
        mul v10.4S, v11.4S, v0.S[0]             // ..........................................*.......................................
        sqrdmulh v23.4S, v9.4S, v0.S[3]         // ...........................................*......................................
        mul v31.4S, v14.4S, v25.4S              // ............................................*.....................................
        sqrdmulh v29.4S, v11.4S, v0.S[1]        // .............................................*....................................
        add v20.4S, v18.4S, v4.4S               // ..............................................*...................................
        mul v18.4S, v9.4S, v0.S[2]              // ...............................................*..................................
        mls v30.4S, v5.4S, v8.S[0]              // ................................................*.................................
        mls v24.4S, v19.4S, v8.S[0]             // .................................................*................................
        sub v9.4S, v20.4S, v27.4S               // ..................................................*...............................
        sqrdmulh v5.4S, v14.4S, v26.4S          // ...................................................*..............................
        mls v18.4S, v23.4S, v8.S[0]             // ....................................................*.............................
        sqrdmulh v4.4S, v9.4S, v0.S[1]          // .....................................................*............................
        mul v17.4S, v9.4S, v0.S[0]              // ......................................................*...........................
        str q6, [x0, #624]                      // .......................................................*..........................
        mls v31.4S, v5.4S, v8.S[0]              // ........................................................*.........................
        add v16.4S, v20.4S, v27.4S              // .........................................................*........................
        mls v12.4S, v21.4S, v8.S[0]             // ..........................................................*.......................
        mls v17.4S, v4.4S, v8.S[0]              // ...........................................................*......................
        mls v10.4S, v29.4S, v8.S[0]             // ............................................................*.....................
        mul v29.4S, v16.4S, v25.4S              // .............................................................*....................
        str q12, [x0], #(16)                    // ..............................................................*...................
        add v21.4S, v18.4S, v24.4S              // ...............................................................*..................
        str q10, [x0, #752]                     // ................................................................*.................
        sqrdmulh v4.4S, v16.4S, v26.4S          // .................................................................*................
        sqrdmulh v27.4S, v21.4S, v26.4S         // ..................................................................*...............
        str q31, [x0, #240]                     // ...................................................................*..............
        sub v12.4S, v18.4S, v24.4S              // ....................................................................*.............
        mul v16.4S, v21.4S, v25.4S              // .....................................................................*............
        str q30, [x0, #496]                     // ......................................................................*...........
        mul v23.4S, v12.4S, v0.S[0]             // .......................................................................*..........
        sqrdmulh v28.4S, v12.4S, v0.S[1]        // ........................................................................*.........
        mls v29.4S, v4.4S, v8.S[0]              // .........................................................................*........
        mls v16.4S, v27.4S, v8.S[0]             // ..........................................................................*.......
        str q17, [x0, #624]                     // ...........................................................................*......
        mls v23.4S, v28.4S, v8.S[0]             // ............................................................................*.....
        str q29, [x0, #112]                     // .............................................................................*....
        str q16, [x0, #368]                     // ...............................................................................*..
        str q23, [x0, #880]                     // .................................................................................*

                                                 // ------------------------------- cycle (expected) -------------------------------->
                                                 // 0                        25                       50                       75
                                                 // |------------------------|------------------------|------------------------|------
        // sub v10.4S, v24.4S, v5.4S             // ...*..............................................................................
        // add v7.4S, v24.4S, v5.4S              // ....*.............................................................................
        // sqrdmulh v4.4S, v4.4S, v1.S[3]        // ...............*..................................................................
        // add v21.4S, v20.4S, v31.4S            // .......*..........................................................................
        // add v24.4S, v21.4S, v7.4S             // ................*.................................................................
        // sub v22.4S, v21.4S, v7.4S             // .....................*............................................................
        // mul v15.4S, v10.4S, v2.S[0]           // .................*................................................................
        // sqrdmulh v21.4S, v10.4S, v2.S[1]      // ..................*...............................................................
        // mls v18.4S, v4.4S, v8.S[0]            // ......................*...........................................................
        // sqrdmulh v20.4S, v28.4S, v2.S[3]      // ...........*......................................................................
        // mul v16.4S, v28.4S, v2.S[2]           // ............*.....................................................................
        // mul v14.4S, v22.4S, v0.S[2]           // ..........................*.......................................................
        // mul v29.4S, v6.4S, v3.S[0]            // .....*............................................................................
        // mul v11.4S, v19.4S, v0.S[0]           // ..........*.......................................................................
        // sqrdmulh v23.4S, v6.4S, v3.S[1]       // ......*...........................................................................
        // mls v15.4S, v21.4S, v8.S[0]           // ...........................*......................................................
        // sqrdmulh v10.4S, v19.4S, v0.S[1]      // .........*........................................................................
        // mls v16.4S, v20.4S, v8.S[0]           // .........................*........................................................
        // mls v29.4S, v23.4S, v8.S[0]           // .......................*..........................................................
        // sub v21.4S, v18.4S, v15.4S            // ................................*.................................................
        // add v12.4S, v18.4S, v15.4S            // ..............................................*...................................
        // str q27, [x0, #752]                   // *.................................................................................
        // mul v23.4S, v17.4S, v25.4S            // ........*.........................................................................
        // sub v5.4S, v16.4S, v29.4S             // .............................*....................................................
        // mul v17.4S, v21.4S, v0.S[2]           // ...............................................*..................................
        // add v18.4S, v16.4S, v29.4S            // ....................................*.............................................
        // sqrdmulh v16.4S, v30.4S, v1.S[1]      // ..*...............................................................................
        // sqrdmulh v15.4S, v5.4S, v1.S[1]       // .................................*................................................
        // mls v23.4S, v13.4S, v8.S[0]           // .............*....................................................................
        // mls v11.4S, v10.4S, v8.S[0]           // ........................*.........................................................
        // sqrdmulh v13.4S, v21.4S, v0.S[3]      // ...........................................*......................................
        // sub v21.4S, v24.4S, v9.4S             // ...................*..............................................................
        // str q23, [x0, #368]                   // ..............................*...................................................
        // mul v23.4S, v5.4S, v1.S[0]            // .........................................*........................................
        // mls v17.4S, v13.4S, v8.S[0]           // ....................................................*.............................
        // sqrdmulh v5.4S, v21.4S, v0.S[1]       // ............................*.....................................................
        // mul v19.4S, v21.4S, v0.S[0]           // .....................................*............................................
        // mls v23.4S, v15.4S, v8.S[0]           // .................................................*................................
        // str q11, [x0, #624]                   // .......................................................*..........................
        // add v11.4S, v24.4S, v9.4S             // ....................*.............................................................
        // mls v19.4S, v5.4S, v8.S[0]            // ................................................*.................................
        // sub v13.4S, v17.4S, v23.4S            // ....................................................................*.............
        // add v17.4S, v17.4S, v23.4S            // ...............................................................*..................
        // sqrdmulh v23.4S, v22.4S, v0.S[3]      // ...............................*..................................................
        // add v9.4S, v12.4S, v18.4S             // .........................................................*........................
        // str q19, [x0, #512]                   // ......................................................................*...........
        // sub v19.4S, v12.4S, v18.4S            // ..................................................*...............................
        // mul v18.4S, v13.4S, v0.S[0]           // .......................................................................*..........
        // sqrdmulh v13.4S, v13.4S, v0.S[1]      // ........................................................................*.........
        // mls v18.4S, v13.4S, v8.S[0]           // ............................................................................*.....
        // sqrdmulh v13.4S, v11.4S, v26.4S       // ..................................*...............................................
        // mul v11.4S, v11.4S, v25.4S            // ......................................*...........................................
        // mul v22.4S, v9.4S, v25.4S             // .............................................................*....................
        // str q18, [x0, #896]                   // .................................................................................*
        // mls v11.4S, v13.4S, v8.S[0]           // ..........................................................*.......................
        // str q11, [x0], #(16)                  // ..............................................................*...................
        // mul v11.4S, v30.4S, v1.S[0]           // .*................................................................................
        // sqrdmulh v30.4S, v9.4S, v26.4S        // .................................................................*................
        // mls v14.4S, v23.4S, v8.S[0]           // ...................................*..............................................
        // mls v11.4S, v16.4S, v8.S[0]           // ..............*...................................................................
        // mls v22.4S, v30.4S, v8.S[0]           // .........................................................................*........
        // add v30.4S, v14.4S, v11.4S            // ........................................*.........................................
        // sub v18.4S, v14.4S, v11.4S            // .......................................*..........................................
        // sqrdmulh v21.4S, v30.4S, v26.4S       // ...................................................*..............................
        // mul v7.4S, v30.4S, v25.4S             // ............................................*.....................................
        // sqrdmulh v13.4S, v18.4S, v0.S[1]      // .............................................*....................................
        // mul v27.4S, v18.4S, v0.S[0]           // ..........................................*.......................................
        // str q22, [x0, #112]                   // .............................................................................*....
        // mls v7.4S, v21.4S, v8.S[0]            // ........................................................*.........................
        // mls v27.4S, v13.4S, v8.S[0]           // ............................................................*.....................
        // sqrdmulh v13.4S, v17.4S, v26.4S       // ..................................................................*...............
        // str q7, [x0, #240]                    // ...................................................................*..............
        // mul v11.4S, v19.4S, v0.S[0]           // ......................................................*...........................
        // sqrdmulh v10.4S, v19.4S, v0.S[1]      // .....................................................*............................
        // str q27, [x0, #752]                   // ................................................................*.................
        // mul v23.4S, v17.4S, v25.4S            // .....................................................................*............
        // mls v23.4S, v13.4S, v8.S[0]           // ..........................................................................*.......
        // mls v11.4S, v10.4S, v8.S[0]           // ...........................................................*......................
        // str q23, [x0, #368]                   // ...............................................................................*..
        // str q11, [x0, #624]                   // ...........................................................................*......


       pop_stack
       ret
#endif
