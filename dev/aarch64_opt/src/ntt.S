/* Copyright (c) 2022 Arm Limited
   * Copyright (c) 2022 Hanno Becker
   * Copyright (c) 2023 Amin Abdulrahman, Matthias Kannwischer
   * Copyright (c) The mlkem-native project authors
   * Copyright (c) The mldsa-native project authors
   * SPDX-License-Identifier: Apache-2.0 OR ISC OR MIT
    */

/* References
   * ==========
   *
   * - [NeonNTT]
   * Neon NTT: Faster Dilithium, Kyber, and Saber on Cortex-A72 and Apple M1
   * Becker, Hwang, Kannwischer, Yang, Yang
   * https: */ /* eprint.iacr.org/2021/986
   *
   * - [SLOTHY_Paper]
   * Fast and Clean: Auditable high-performance assembly via constraint solving
   * Abdulrahman, Becker, Kannwischer, Klein
   * https: */ /* eprint.iacr.org/2022/1303
    */

/* AArch64 ML-DSA forward NTT following @[NeonNTT] and @[SLOTHY_Paper] */

#include "../../../common.h"
#if defined(MLD_ARITH_BACKEND_AARCH64) &&  !defined(MLD_CONFIG_MULTILEVEL_NO_SHARED)
/* simpasm: header-end */

.macro mulmodq dst, src, const, idx0, idx1
        // Signed barrett multiplication @[NeonNTT, Section 3.1.2] using
        // round-to-nearest-even-integer approximation. Following loc.cit.,
        // this is functionally the same as a signed Montgomery multiplication
        // with a suitable constant of absolute value < q.
        sqrdmulh t2.4s,      \src\().4s, \const\().s[\idx1\()]
        mul      \dst\().4s, \src\().4s, \const\().s[\idx0\()]
        mls      \dst\().4s, t2.4s,      consts.s[0]
        // Bounds: |dst| < BARMUL_BOUND

        // (See the end of dev/aarch64_clean/src/intt.S for the exact value of
        // BARMUL_BOUND)
.endm

.macro mulmod dst, src, const, const_twisted
        // Same as mulmodq, but with different multiplier across each lanes.
        sqrdmulh t2.4s,   \src\().4s, \const_twisted\().4s
        mul      \dst\().4s, \src\().4s, \const\().4s
        mls      \dst\().4s, t2.4s,   consts.s[0]
        // Bounds: |dst| < BARMUL_BOUND
.endm

.macro ct_butterfly a, b, root, idx0, idx1
        // Compute a' = a + barmul(b, zeta), b' = a - barmul(b, zeta), commonly
        // known as the Cooley-Tukey butterfly.
        mulmodq tmp, \b, \root, \idx0, \idx1
        sub \b\().4s, \a\().4s, tmp.4s
        add \a\().4s, \a\().4s, tmp.4s
        // Bounds: |a'|, |b'| < |a| + BARMUL_BOUND <= |a| + q

        // In conclusion, the magnitudes of all coefficients grow by at most q
        // after each layer.
.endm

.macro ct_butterfly_v a, b, root, root_twisted
        // Same as ct_butterfly, but with different zetas across each lanes.
        mulmod tmp, \b, \root, \root_twisted
        sub \b\().4s, \a\().4s, tmp.4s
        add \a\().4s, \a\().4s, tmp.4s
        // Bounds: |a'|, |b'| < |a| + BARMUL_BOUND <= |a| + q
.endm

.macro load_roots_123
        ldr q_root0, [r012345_ptr], #(4*16)
        ldr q_root1, [r012345_ptr, #(-4*16 + 1*16)]
        ldr q_root2, [r012345_ptr, #(-4*16 + 2*16)]
        ldr q_root3, [r012345_ptr, #(-4*16 + 3*16)]
.endm

.macro load_next_roots_456
       ldr q_root0, [r012345_ptr], #(4*16)
       ldr q_root1, [r012345_ptr, #(-4*16 + 1*16)]
       ldr q_root2, [r012345_ptr, #(-4*16 + 2*16)]
       ldr q_root3, [r012345_ptr, #(-4*16 + 3*16)]
.endm

.macro load_next_roots_78_1
        ldr q_root0,    [r67_ptr], #(12*16)
        ldr q_root0_tw, [r67_ptr, #(-12*16 + 1*16)]
        ldr q_root1,    [r67_ptr, #(-12*16 + 2*16)]
        ldr q_root1_tw, [r67_ptr, #(-12*16 + 3*16)]
        ldr q_root2,    [r67_ptr, #(-12*16 + 4*16)]
        ldr q_root2_tw, [r67_ptr, #(-12*16 + 5*16)]
.endm

.macro load_next_roots_78_2
        ldr q_root0,    [r67_ptr, #(-12*16 + 6*16)]
        ldr q_root0_tw, [r67_ptr, #(-12*16 + 7*16)]
        ldr q_root1,    [r67_ptr, #(-12*16 + 8*16)]
        ldr q_root1_tw, [r67_ptr, #(-12*16 + 9*16)]
        ldr q_root2,    [r67_ptr, #(-12*16 + 10*16)]
        ldr q_root2_tw, [r67_ptr, #(-12*16 + 11*16)]
.endm

.macro transpose4 data0, data1, data2, data3
        trn1 t0.4s, \data0\().4s, \data1\().4s
        trn2 t1.4s, \data0\().4s, \data1\().4s
        trn1 t2.4s, \data2\().4s, \data3\().4s
        trn2 t3.4s, \data2\().4s, \data3\().4s

        trn2 \data2\().2d, t0.2d, t2.2d
        trn2 \data3\().2d, t1.2d, t3.2d
        trn1 \data0\().2d, t0.2d, t2.2d
        trn1 \data1\().2d, t1.2d, t3.2d
.endm

// w_scalar load optimization: load 128-bit vector using two 64-bit scalar loads
// This allows better interleaving
.macro ldr_vo_scalar vec, base, offset
        ldr x10, [\base, #\offset]
        ldr x11, [\base, #(\offset + 8)]
        ins \vec\().d[0], x10
        ins \vec\().d[1], x11
.endm

.macro save_vregs
        sub sp, sp, #(16*4)
        stp  d8,  d9, [sp, #16*0]
        stp d10, d11, [sp, #16*1]
        stp d12, d13, [sp, #16*2]
        stp d14, d15, [sp, #16*3]
.endm

.macro restore_vregs
        ldp  d8,  d9, [sp, #16*0]
        ldp d10, d11, [sp, #16*1]
        ldp d12, d13, [sp, #16*2]
        ldp d14, d15, [sp, #16*3]
        add sp, sp, #(16*4)
.endm

.macro push_stack
        save_vregs
.endm

.macro pop_stack
        restore_vregs
.endm

        // Arguments
        in          .req x0  // Input/output buffer
        r012345_ptr .req x1  // twiddles for layer 0,1,2,3,4,5
        r67_ptr     .req x2  // twiddles for layer 6,7

        inp     .req x3
        count   .req x4
        wtmp    .req w5
        in2     .req x6

        // Scalar temporaries for w_scalar load optimization
        xtmp0   .req x10
        xtmp1   .req x11

        data0  .req v8
        data1  .req v9
        data2  .req v10
        data3  .req v11
        data4  .req v12
        data5  .req v13
        data6  .req v14
        data7  .req v15

        q_data0  .req q8
        q_data1  .req q9
        q_data2  .req q10
        q_data3  .req q11
        q_data4  .req q12
        q_data5  .req q13
        q_data6  .req q14
        q_data7  .req q15

        root0    .req v0
        root1    .req v1
        root2    .req v2
        root3    .req v3
        root0_tw .req v4
        root1_tw .req v5
        root2_tw .req v6

        q_root0    .req q0
        q_root1    .req q1
        q_root2    .req q2
        q_root3    .req q3
        q_root0_tw .req q4
        q_root1_tw .req q5
        q_root2_tw .req q6

        consts    .req v7

        tmp .req v24
        t0  .req v25
        t1  .req v26
        t2  .req v27
        t3  .req v28

        .text
        .global MLD_ASM_NAMESPACE(ntt_asm)
        .balign 4
MLD_ASM_FN_SYMBOL(ntt_asm)
        push_stack

        // Load MLDSA_Q = 8380417
        movz wtmp, #0xe001
        movk wtmp, #0x7f, lsl #16
        dup consts.4s, wtmp

        mov inp, in
        mov count, #8

        load_roots_123

        .p2align 2

                                                // Instructions:    114
                                                // Expected cycles: 72
                                                // Expected IPC:    1.58

                                                // Cycle bound:     72.0
                                                // IPC bound:       1.58

                                                // Wall time:     1.12s
                                                // User time:     1.12s

                                                // -------------------------- cycle (expected) --------------------------->
                                                // 0                        25                       50
                                                // |------------------------|------------------------|---------------------
        ldr x8, [x0, #896]                      // *.......................................................................
        ldr x5, [x0, #640]                      // .*......................................................................
        ldr x7, [x0, #904]                      // ..*.....................................................................
        ldr x6, [x0, #648]                      // ...*....................................................................
        ins v5.d[0], x8                         // ....*...................................................................
        ldr x11, [x0, #512]                     // ....*...................................................................
        ldr x14, [x0, #768]                     // .....*..................................................................
        ins v24.d[0], x5                        // .....*..................................................................
        ins v5.d[1], x7                         // ......*.................................................................
        ldr x12, [x0, #520]                     // ......*.................................................................
        ldr x9, [x0, #384]                      // .......*................................................................
        ins v24.d[1], x6                        // .......*................................................................
        sqrdmulh v10.4S, v5.4S, v0.S[1]         // ........*...............................................................
        ins v19.d[0], x11                       // ........*...............................................................
        mul v27.4S, v24.4S, v0.S[0]             // .........*..............................................................
        ldr x10, [x0, #776]                     // .........*..............................................................
        mul v20.4S, v5.4S, v0.S[0]              // ..........*.............................................................
        ins v19.d[1], x12                       // ..........*.............................................................
        sqrdmulh v13.4S, v24.4S, v0.S[1]        // ...........*............................................................
        ins v30.d[0], x14                       // ...........*............................................................
        mul v22.4S, v19.4S, v0.S[0]             // ............*...........................................................
        ldr x8, [x0, #392]                      // ............*...........................................................
        sqrdmulh v24.4S, v19.4S, v0.S[1]        // .............*..........................................................
        ins v30.d[1], x10                       // .............*..........................................................
        mls v20.4S, v10.4S, v7.S[0]             // ..............*.........................................................
        ins v23.d[0], x9                        // ..............*.........................................................
        mul v5.4S, v30.4S, v0.S[0]              // ...............*........................................................
        ldr x11, [x0, #128]                     // ...............*........................................................
        sqrdmulh v15.4S, v30.4S, v0.S[1]        // ................*.......................................................
        ins v23.d[1], x8                        // ................*.......................................................
        mls v27.4S, v13.4S, v7.S[0]             // .................*......................................................
        ldr x16, [x0, #136]                     // .................*......................................................
        sub v13.4S, v23.4S, v20.4S              // ..................*.....................................................
        ldr x13, [x0, #256]                     // ..................*.....................................................
        add v8.4S, v23.4S, v20.4S               // ...................*....................................................
        ins v28.d[0], x11                       // ...................*....................................................
        mls v5.4S, v15.4S, v7.S[0]              // ....................*...................................................
        ldr x9, [x0, #0]                        // ....................*...................................................
        mul v23.4S, v13.4S, v1.S[0]             // .....................*..................................................
        ldr x17, [x0, #264]                     // .....................*..................................................
        sqrdmulh v30.4S, v13.4S, v1.S[1]        // ......................*.................................................
        ins v28.d[1], x16                       // ......................*.................................................
        mul v15.4S, v8.4S, v0.S[2]              // .......................*................................................
        ins v11.d[0], x13                       // .......................*................................................
        sqrdmulh v10.4S, v8.4S, v0.S[3]         // ........................*...............................................
        ldr x7, [x0, #664]                      // ........................*...............................................
        add v9.4S, v28.4S, v27.4S               // .........................*..............................................
        ins v11.d[1], x17                       // .........................*..............................................
        sub v16.4S, v28.4S, v27.4S              // ..........................*.............................................
        ins v28.d[0], x9                        // ..........................*.............................................
        add v29.4S, v11.4S, v5.4S               // ...........................*............................................
        ldr x14, [x0, #8]                       // ...........................*............................................
        mls v23.4S, v30.4S, v7.S[0]             // ............................*...........................................
        ldr x12, [x0, #528]                     // ............................*...........................................
        mls v15.4S, v10.4S, v7.S[0]             // .............................*..........................................
        ldr x15, [x0, #656]                     // .............................*..........................................
        sub v12.4S, v11.4S, v5.4S               // ..............................*.........................................
        ldr x16, [x0, #536]                     // ..............................*.........................................
        mul v11.4S, v29.4S, v0.S[2]             // ...............................*........................................
        ldr x10, [x0, #400]                     // ...............................*........................................
        add v21.4S, v16.4S, v23.4S              // ................................*.......................................
        ldr x13, [x0, #912]                     // ................................*.......................................
        mul v4.4S, v12.4S, v1.S[0]              // .................................*......................................
        ins v5.d[0], x12                        // .................................*......................................
        sqrdmulh v13.4S, v29.4S, v0.S[3]        // ..................................*.....................................
        ldr x11, [x0, #408]                     // ..................................*.....................................
        sqrdmulh v31.4S, v21.4S, v2.S[3]        // ...................................*....................................
        ins v5.d[1], x16                        // ...................................*....................................
        add v30.4S, v9.4S, v15.4S               // ....................................*...................................
        ins v28.d[1], x14                       // ....................................*...................................
        sqrdmulh v25.4S, v5.4S, v0.S[1]         // .....................................*..................................
        ins v29.d[0], x10                       // .....................................*..................................
        sqrdmulh v10.4S, v12.4S, v1.S[1]        // ......................................*.................................
        ins v14.d[0], x15                       // ......................................*.................................
        mul v18.4S, v5.4S, v0.S[0]              // .......................................*................................
        ldr x8, [x0, #272]                      // .......................................*................................
        mul v17.4S, v30.4S, v1.S[2]             // ........................................*...............................
        ins v29.d[1], x11                       // ........................................*...............................
        mls v22.4S, v24.4S, v7.S[0]             // .........................................*..............................
        ldr x6, [x0, #144]                      // .........................................*..............................
        mls v11.4S, v13.4S, v7.S[0]             // ..........................................*.............................
        ldr x5, [x0, #784]                      // ..........................................*.............................
        mul v24.4S, v21.4S, v2.S[2]             // ...........................................*............................
        ins v14.d[1], x7                        // ...........................................*............................
        sqrdmulh v21.4S, v30.4S, v1.S[3]        // ............................................*...........................
        sub v30.4S, v9.4S, v15.4S               // .............................................*..........................
        mls v4.4S, v10.4S, v7.S[0]              // ..............................................*.........................
        ldr x7, [x0, #152]                      // ..............................................*.........................
        add v6.4S, v28.4S, v22.4S               // ...............................................*........................
        mls v24.4S, v31.4S, v7.S[0]             // ................................................*.......................
        ins v8.d[0], x13                        // ................................................*.......................
        mul v27.4S, v30.4S, v2.S[0]             // .................................................*......................
        sub v22.4S, v28.4S, v22.4S              // ..................................................*.....................
        sub v19.4S, v6.4S, v11.4S               // ...................................................*....................
        mls v17.4S, v21.4S, v7.S[0]             // ....................................................*...................
        add v10.4S, v6.4S, v11.4S               // .....................................................*..................
        sub v28.4S, v22.4S, v4.4S               // ......................................................*.................
        add v9.4S, v22.4S, v4.4S                // .......................................................*................
        sub v16.4S, v16.4S, v23.4S              // ........................................................*...............
        sub v13.4S, v10.4S, v17.4S              // .........................................................*..............
        sqrdmulh v15.4S, v14.4S, v0.S[1]        // ..........................................................*.............
        sqrdmulh v30.4S, v30.4S, v2.S[1]        // ...........................................................*............
        sqrdmulh v12.4S, v16.4S, v3.S[1]        // ............................................................*...........
        add v31.4S, v9.4S, v24.4S               // .............................................................*..........
        add v21.4S, v10.4S, v17.4S              // ..............................................................*.........
        mul v26.4S, v14.4S, v0.S[0]             // ...............................................................*........
        mls v27.4S, v30.4S, v7.S[0]             // ................................................................*.......
        str q13, [x0, #128]                     // .................................................................*......
        mul v17.4S, v16.4S, v3.S[0]             // ..................................................................*.....
        str q31, [x0, #512]                     // ...................................................................*....
        mls v26.4S, v15.4S, v7.S[0]             // ....................................................................*...
        str q21, [x0], #(16)                    // .....................................................................*..
        add v5.4S, v19.4S, v27.4S               // ......................................................................*.
        mls v17.4S, v12.4S, v7.S[0]             // .......................................................................*

                                                 // -------------------------- cycle (expected) --------------------------->
                                                 // 0                        25                       50
                                                 // |------------------------|------------------------|---------------------
        // ldr x10, [x0, #640]                    // .*......................................................................
        // ldr x7, [x0, #136]                     // .................*......................................................
        // ldr x13, [x0, #648]                    // ...*....................................................................
        // ins v19.d[0], x10                      // .....*..................................................................
        // ins v19.d[1], x13                      // .......*................................................................
        // sqrdmulh v4.4S, v19.4S, v0.S[1]        // ...........*............................................................
        // ldr x15, [x0, #896]                    // *.......................................................................
        // ldr x8, [x0, #256]                     // ..................*.....................................................
        // ldr x5, [x0, #512]                     // ....*...................................................................
        // ldr x6, [x0, #128]                     // ...............*........................................................
        // ldr x9, [x0, #520]                     // ......*.................................................................
        // ldr x10, [x0, #384]                    // .......*................................................................
        // ins v18.d[0], x5                       // ........*...............................................................
        // ins v18.d[1], x9                       // ..........*.............................................................
        // ins v29.d[0], x10                      // ..............*.........................................................
        // sqrdmulh v25.4S, v18.4S, v0.S[1]       // .............*..........................................................
        // ldr x5, [x0, #392]                     // ............*...........................................................
        // mul v18.4S, v18.4S, v0.S[0]            // ............*...........................................................
        // ins v8.d[0], x15                       // ....*...................................................................
        // ins v29.d[1], x5                       // ................*.......................................................
        // mul v26.4S, v19.4S, v0.S[0]            // .........*..............................................................
        // ldr x5, [x0, #768]                     // .....*..................................................................
        // mls v26.4S, v4.4S, v7.S[0]             // .................*......................................................
        // ldr x13, [x0, #904]                    // ..*.....................................................................
        // ins v23.d[0], x6                       // ...................*....................................................
        // ldr x10, [x0, #656]                    // .............................*..........................................
        // ldr x17, [x0, #776]                    // .........*..............................................................
        // ins v27.d[0], x8                       // .......................*................................................
        // mls v18.4S, v25.4S, v7.S[0]            // .........................................*..............................
        // ins v8.d[1], x13                       // ......*.................................................................
        // ins v28.d[0], x5                       // ...........*............................................................
        // sqrdmulh v21.4S, v8.4S, v0.S[1]        // ........*...............................................................
        // ins v23.d[1], x7                       // ......................*.................................................
        // mul v17.4S, v8.4S, v0.S[0]             // ..........*.............................................................
        // ins v28.d[1], x17                      // .............*..........................................................
        // add v12.4S, v23.4S, v26.4S             // .........................*..............................................
        // ldr x7, [x0, #152]                     // ..............................................*.........................
        // mul v22.4S, v28.4S, v0.S[0]            // ...............*........................................................
        // ldr x13, [x0, #664]                    // ........................*...............................................
        // sqrdmulh v6.4S, v28.4S, v0.S[1]        // ................*.......................................................
        // ldr x5, [x0, #0]                       // ....................*...................................................
        // mls v17.4S, v21.4S, v7.S[0]            // ..............*.........................................................
        // ins v19.d[0], x10                      // ......................................*.................................
        // sub v28.4S, v23.4S, v26.4S             // ..........................*.............................................
        // ldr x14, [x0, #8]                      // ...........................*............................................
        // ins v19.d[1], x13                      // ...........................................*............................
        // mls v22.4S, v6.4S, v7.S[0]             // ....................*...................................................
        // ins v23.d[0], x5                       // ..........................*.............................................
        // sqrdmulh v4.4S, v19.4S, v0.S[1]        // ..........................................................*.............
        // ldr x15, [x0, #912]                    // ................................*.......................................
        // ins v23.d[1], x14                      // ....................................*...................................
        // sub v30.4S, v29.4S, v17.4S             // ..................*.....................................................
        // ldr x8, [x0, #272]                     // .......................................*................................
        // sub v15.4S, v23.4S, v18.4S             // ..................................................*.....................
        // ldr x5, [x0, #528]                     // ............................*...........................................
        // add v8.4S, v29.4S, v17.4S              // ...................*....................................................
        // ldr x6, [x0, #144]                     // .........................................*..............................
        // ldr x9, [x0, #536]                     // ..............................*.........................................
        // add v9.4S, v23.4S, v18.4S              // ...............................................*........................
        // ldr x10, [x0, #400]                    // ...............................*........................................
        // sqrdmulh v13.4S, v8.4S, v0.S[3]        // ........................*...............................................
        // ins v18.d[0], x5                       // .................................*......................................
        // mul v16.4S, v30.4S, v1.S[0]            // .....................*..................................................
        // ldr x13, [x0, #264]                    // .....................*..................................................
        // sqrdmulh v14.4S, v30.4S, v1.S[1]       // ......................*.................................................
        // ins v18.d[1], x9                       // ...................................*....................................
        // mul v17.4S, v8.4S, v0.S[2]             // .......................*................................................
        // ins v29.d[0], x10                      // .....................................*..................................
        // sqrdmulh v25.4S, v18.4S, v0.S[1]       // .....................................*..................................
        // ldr x5, [x0, #408]                     // ..................................*.....................................
        // mul v18.4S, v18.4S, v0.S[0]            // .......................................*................................
        // ins v8.d[0], x15                       // ................................................*.......................
        // mls v16.4S, v14.4S, v7.S[0]            // ............................*...........................................
        // ins v27.d[1], x13                      // .........................*..............................................
        // mls v17.4S, v13.4S, v7.S[0]            // .............................*..........................................
        // add v23.4S, v27.4S, v22.4S             // ...........................*............................................
        // ins v29.d[1], x5                       // ........................................*...............................
        // mul v26.4S, v19.4S, v0.S[0]            // ...............................................................*........
        // add v30.4S, v28.4S, v16.4S             // ................................*.......................................
        // sqrdmulh v13.4S, v23.4S, v0.S[3]       // ..................................*.....................................
        // sub v21.4S, v28.4S, v16.4S             // ........................................................*...............
        // mul v11.4S, v23.4S, v0.S[2]            // ...............................*........................................
        // ldr x5, [x0, #784]                     // ..........................................*.............................
        // sub v6.4S, v12.4S, v17.4S              // .............................................*..........................
        // sub v10.4S, v27.4S, v22.4S             // ..............................*.........................................
        // mul v24.4S, v30.4S, v2.S[2]            // ...........................................*............................
        // mls v11.4S, v13.4S, v7.S[0]            // ..........................................*.............................
        // sqrdmulh v14.4S, v6.4S, v2.S[1]        // ...........................................................*............
        // mul v23.4S, v10.4S, v1.S[0]            // .................................*......................................
        // add v22.4S, v12.4S, v17.4S             // ....................................*...................................
        // sub v19.4S, v9.4S, v11.4S              // ...................................................*....................
        // sqrdmulh v5.4S, v10.4S, v1.S[1]        // ......................................*.................................
        // mul v20.4S, v22.4S, v1.S[2]            // ........................................*...............................
        // sqrdmulh v13.4S, v22.4S, v1.S[3]       // ............................................*...........................
        // mul v27.4S, v6.4S, v2.S[0]             // .................................................*......................
        // mls v23.4S, v5.4S, v7.S[0]             // ..............................................*.........................
        // mul v17.4S, v21.4S, v3.S[0]            // ..................................................................*.....
        // mls v20.4S, v13.4S, v7.S[0]            // ....................................................*...................
        // add v12.4S, v9.4S, v11.4S              // .....................................................*..................
        // sqrdmulh v13.4S, v30.4S, v2.S[3]       // ...................................*....................................
        // mls v27.4S, v14.4S, v7.S[0]            // ................................................................*.......
        // sub v31.4S, v12.4S, v20.4S             // .........................................................*..............
        // add v9.4S, v15.4S, v23.4S              // .......................................................*................
        // mls v24.4S, v13.4S, v7.S[0]            // ................................................*.......................
        // add v30.4S, v12.4S, v20.4S             // ..............................................................*.........
        // sqrdmulh v21.4S, v21.4S, v3.S[1]       // ............................................................*...........
        // str q31, [x0, #128]                    // .................................................................*......
        // add v14.4S, v9.4S, v24.4S              // .............................................................*..........
        // sub v28.4S, v15.4S, v23.4S             // ......................................................*.................
        // mls v17.4S, v21.4S, v7.S[0]            // .......................................................................*
        // str q14, [x0, #512]                    // ...................................................................*....
        // add v5.4S, v19.4S, v27.4S              // ......................................................................*.
        // str q30, [x0], #(16)                   // .....................................................................*..
        // mls v26.4S, v4.4S, v7.S[0]             // ....................................................................*...

        sub count, count, #2
ntt_layer123_start:
                                                // Instructions:    100
                                                // Expected cycles: 68
                                                // Expected IPC:    1.47

                                                // Cycle bound:     68.0
                                                // IPC bound:       1.47

                                                // Wall time:     15.67s
                                                // User time:     15.67s

                                                // ------------------------ cycle (expected) ------------------------->
                                                // 0                        25                       50
                                                // |------------------------|------------------------|-----------------
        add v30.4S, v28.4S, v17.4S              // l...................................................................
        ldr x13, [x0, #904]                     // *...................................................................
        str q5, [x0, #240]                      // .l..................................................................
        ins v23.d[0], x6                        // .*..................................................................
        sub v21.4S, v28.4S, v17.4S              // ..l.................................................................
        ldr x10, [x0, #656]                     // ..e.................................................................
        sub v5.4S, v19.4S, v27.4S               // ...l................................................................
        ldr x17, [x0, #776]                     // ...*................................................................
        str q30, [x0, #752]                     // ....l...............................................................
        ins v27.d[0], x8                        // ....*...............................................................
        mls v18.4S, v25.4S, v7.S[0]             // .....*..............................................................
        ins v8.d[1], x13                        // .....*..............................................................
        str q21, [x0, #880]                     // ......l.............................................................
        ins v28.d[0], x5                        // ......*.............................................................
        sqrdmulh v21.4S, v8.4S, v0.S[1]         // .......*............................................................
        ins v23.d[1], x7                        // .......*............................................................
        mul v17.4S, v8.4S, v0.S[0]              // ........*...........................................................
        ins v28.d[1], x17                       // ........*...........................................................
        add v12.4S, v23.4S, v26.4S              // .........*..........................................................
        ldr x7, [x0, #152]                      // .........e..........................................................
        mul v22.4S, v28.4S, v0.S[0]             // ..........*.........................................................
        ldr x13, [x0, #664]                     // ..........e.........................................................
        sqrdmulh v6.4S, v28.4S, v0.S[1]         // ...........*........................................................
        ldr x5, [x0, #0]                        // ...........*........................................................
        mls v17.4S, v21.4S, v7.S[0]             // ............*.......................................................
        ins v19.d[0], x10                       // ............e.......................................................
        sub v28.4S, v23.4S, v26.4S              // .............*......................................................
        ldr x14, [x0, #8]                       // .............*......................................................
        sub v21.4S, v9.4S, v24.4S               // ..............l.....................................................
        ins v19.d[1], x13                       // ..............e.....................................................
        mls v22.4S, v6.4S, v7.S[0]              // ...............*....................................................
        ins v23.d[0], x5                        // ...............*....................................................
        sqrdmulh v4.4S, v19.4S, v0.S[1]         // ................e...................................................
        ldr x15, [x0, #912]                     // ................e...................................................
        str q21, [x0, #624]                     // .................l..................................................
        ins v23.d[1], x14                       // .................*..................................................
        sub v30.4S, v29.4S, v17.4S              // ..................*.................................................
        ldr x8, [x0, #272]                      // ..................e.................................................
        sub v15.4S, v23.4S, v18.4S              // ...................*................................................
        ldr x5, [x0, #528]                      // ...................e................................................
        add v8.4S, v29.4S, v17.4S               // ....................*...............................................
        ldr x6, [x0, #144]                      // ....................e...............................................
        str q5, [x0, #368]                      // .....................l..............................................
        ldr x9, [x0, #536]                      // .....................e..............................................
        add v9.4S, v23.4S, v18.4S               // ......................*.............................................
        ldr x10, [x0, #400]                     // ......................e.............................................
        sqrdmulh v13.4S, v8.4S, v0.S[3]         // .......................*............................................
        ins v18.d[0], x5                        // .......................e............................................
        mul v16.4S, v30.4S, v1.S[0]             // ........................*...........................................
        ldr x13, [x0, #264]                     // ........................*...........................................
        sqrdmulh v14.4S, v30.4S, v1.S[1]        // .........................*..........................................
        ins v18.d[1], x9                        // .........................e..........................................
        mul v17.4S, v8.4S, v0.S[2]              // ..........................*.........................................
        ins v29.d[0], x10                       // ..........................e.........................................
        sqrdmulh v25.4S, v18.4S, v0.S[1]        // ...........................e........................................
        ldr x5, [x0, #408]                      // ...........................e........................................
        mul v18.4S, v18.4S, v0.S[0]             // ............................e.......................................
        ins v8.d[0], x15                        // ............................e.......................................
        mls v16.4S, v14.4S, v7.S[0]             // .............................*......................................
        ins v27.d[1], x13                       // .............................*......................................
        mls v17.4S, v13.4S, v7.S[0]             // ..............................*.....................................
        add v23.4S, v27.4S, v22.4S              // ...............................*....................................
        ins v29.d[1], x5                        // ...............................e....................................
        mul v26.4S, v19.4S, v0.S[0]             // ................................e...................................
        add v30.4S, v28.4S, v16.4S              // .................................*..................................
        sqrdmulh v13.4S, v23.4S, v0.S[3]        // ..................................*.................................
        sub v21.4S, v28.4S, v16.4S              // ...................................*................................
        mul v11.4S, v23.4S, v0.S[2]             // ....................................*...............................
        ldr x5, [x0, #784]                      // ....................................e...............................
        sub v6.4S, v12.4S, v17.4S               // .....................................*..............................
        sub v10.4S, v27.4S, v22.4S              // ......................................*.............................
        mul v24.4S, v30.4S, v2.S[2]             // .......................................*............................
        mls v11.4S, v13.4S, v7.S[0]             // ........................................*...........................
        sqrdmulh v14.4S, v6.4S, v2.S[1]         // .........................................*..........................
        mul v23.4S, v10.4S, v1.S[0]             // ..........................................*.........................
        add v22.4S, v12.4S, v17.4S              // ...........................................*........................
        sub v19.4S, v9.4S, v11.4S               // ............................................*.......................
        sqrdmulh v5.4S, v10.4S, v1.S[1]         // .............................................*......................
        mul v20.4S, v22.4S, v1.S[2]             // ..............................................*.....................
        sqrdmulh v13.4S, v22.4S, v1.S[3]        // ...............................................*....................
        mul v27.4S, v6.4S, v2.S[0]              // ................................................*...................
        mls v23.4S, v5.4S, v7.S[0]              // .................................................*..................
        mul v17.4S, v21.4S, v3.S[0]             // ..................................................*.................
        mls v20.4S, v13.4S, v7.S[0]             // ...................................................*................
        add v12.4S, v9.4S, v11.4S               // ....................................................*...............
        sqrdmulh v13.4S, v30.4S, v2.S[3]        // .....................................................*..............
        mls v27.4S, v14.4S, v7.S[0]             // ......................................................*.............
        sub v31.4S, v12.4S, v20.4S              // .......................................................*............
        add v9.4S, v15.4S, v23.4S               // ........................................................*...........
        mls v24.4S, v13.4S, v7.S[0]             // .........................................................*..........
        add v30.4S, v12.4S, v20.4S              // ..........................................................*.........
        sqrdmulh v21.4S, v21.4S, v3.S[1]        // ...........................................................*........
        str q31, [x0, #128]                     // ............................................................*.......
        add v14.4S, v9.4S, v24.4S               // .............................................................*......
        sub v28.4S, v15.4S, v23.4S              // ..............................................................*.....
        mls v17.4S, v21.4S, v7.S[0]             // ...............................................................*....
        str q14, [x0, #512]                     // ................................................................*...
        add v5.4S, v19.4S, v27.4S               // .................................................................*..
        str q30, [x0], #(16)                    // ..................................................................*.
        mls v26.4S, v4.4S, v7.S[0]              // ...................................................................e

                                                      // -------------------------------------------------------------------- cycle (expected) --------------------------------------------------------------------->
                                                      // 0                        25                       50                       75                       100                      125                      150
                                                      // |------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|-----
        // ldr x10, [x0, #0]                           // .........~........................................................'..........*........................................................'..........~..........
        // ldr x11, [x0, #(0 + 8)]                     // ...........~......................................................'............*......................................................'............~........
        // ins v8.d[0], x10                            // .............~....................................................'..............*....................................................'..............~......
        // ins v8.d[1], x11                            // ...............~..................................................'................*..................................................'................~....
        // ldr x10, [x0, #(1*(1024/8))]                // ..................e...............................................'...................~...............................................'...................~.
        // ldr x11, [x0, #((1*(1024/8)) + 8)]          // .......e..........................................................'........~..........................................................'........~............
        // ins v9.d[0], x10                            // ..................................................................'*..................................................................'~....................
        // ins v9.d[1], x11                            // .....~............................................................'......*............................................................'......~..............
        // ldr x10, [x0, #(2*(1024/8))]                // ................e.................................................'.................~.................................................'.................~...
        // ldr x11, [x0, #((2*(1024/8)) + 8)]          // ......................~...........................................'.......................*...........................................'.....................
        // ins v10.d[0], x10                           // ..~...............................................................'...*...............................................................'...~.................
        // ins v10.d[1], x11                           // ...........................~......................................'............................*......................................'.....................
        // ldr x10, [x0, #(3*(1024/8))]                // ....................e.............................................'.....................~.............................................'.....................
        // ldr x11, [x0, #((3*(1024/8)) + 8)]          // .........................e........................................'..........................~........................................'.....................
        // ins v11.d[0], x10                           // ........................e.........................................'.........................~.........................................'.....................
        // ins v11.d[1], x11                           // .............................e....................................'..............................~....................................'.....................
        // ldr x10, [x0, #(4*(1024/8))]                // .................e................................................'..................~................................................'..................~..
        // ldr x11, [x0, #((4*(1024/8)) + 8)]          // ...................e..............................................'....................~..............................................'.....................
        // ins v12.d[0], x10                           // .....................e............................................'......................~............................................'.....................
        // ins v12.d[1], x11                           // .......................e..........................................'........................~..........................................'.....................
        // ldr x10, [x0, #(5*(1024/8))]                // e.................................................................'.~.................................................................'.~...................
        // ldr x11, [x0, #((5*(1024/8)) + 8)]          // ........e.........................................................'.........~.........................................................'.........~...........
        // ins v13.d[0], x10                           // ..........e.......................................................'...........~.......................................................'...........~.........
        // ins v13.d[1], x11                           // ............e.....................................................'.............~.....................................................'.............~.......
        // ldr x10, [x0, #(6*(1024/8))]                // ..................................e...............................'...................................~...............................'.....................
        // ldr x11, [x0, #((6*(1024/8)) + 8)]          // .~................................................................'..*................................................................'..~..................
        // ins v14.d[0], x10                           // ....~.............................................................'.....*.............................................................'.....~...............
        // ins v14.d[1], x11                           // ......~...........................................................'.......*...........................................................'.......~.............
        // ldr x10, [x0, #(7*(1024/8))]                // ..............e...................................................'...............~...................................................'...............~.....
        // ldr x11, [x0, #((7*(1024/8)) + 8)]          // ..................................................................*...................................................................~.....................
        // ins v15.d[0], x10                           // ..........................e.......................................'...........................~.......................................'.....................
        // ins v15.d[1], x11                           // ...~..............................................................'....*..............................................................'....~................
        // sqrdmulh v27.4s,      v12.4s, v0.s[1]       // .........................e........................................'..........................~........................................'.....................
        // mul      v24.4s, v12.4s, v0.s[0]            // ..........................e.......................................'...........................~.......................................'.....................
        // mls      v24.4s, v27.4s,      v7.s[0]       // ...~..............................................................'....*..............................................................'....~................
        // sub v12.4s, v8.4s, v24.4s                   // .................~................................................'..................*................................................'..................~..
        // add v8.4s, v8.4s, v24.4s                    // ....................~.............................................'.....................*.............................................'.....................
        // sqrdmulh v27.4s,      v13.4s, v0.s[1]       // ..............e...................................................'...............~...................................................'...............~.....
        // mul      v24.4s, v13.4s, v0.s[0]            // ..............................e...................................'...............................~...................................'.....................
        // mls      v24.4s, v27.4s,      v7.s[0]       // .................................................................e'..................................................................~'.....................
        // sub v13.4s, v9.4s, v24.4s                   // ...........~......................................................'............*......................................................'............~........
        // add v9.4s, v9.4s, v24.4s                    // .......~..........................................................'........*..........................................................'........~............
        // sqrdmulh v27.4s,      v14.4s, v0.s[1]       // .........~........................................................'..........*........................................................'..........~..........
        // mul      v24.4s, v14.4s, v0.s[0]            // ........~.........................................................'.........*.........................................................'.........~...........
        // mls      v24.4s, v27.4s,      v7.s[0]       // .............~....................................................'..............*....................................................'..............~......
        // sub v14.4s, v10.4s, v24.4s                  // ....................................~.............................'.....................................*.............................'.....................
        // add v10.4s, v10.4s, v24.4s                  // .............................~....................................'..............................*....................................'.....................
        // sqrdmulh v27.4s,      v15.4s, v0.s[1]       // .....~............................................................'......*............................................................'......~..............
        // mul      v24.4s, v15.4s, v0.s[0]            // ......~...........................................................'.......*...........................................................'.......~.............
        // mls      v24.4s, v27.4s,      v7.s[0]       // ..........~.......................................................'...........*.......................................................'...........~.........
        // sub v15.4s, v11.4s, v24.4s                  // ................~.................................................'.................*.................................................'.................~...
        // add v11.4s, v11.4s, v24.4s                  // ..................~...............................................'...................*...............................................'...................~.
        // sqrdmulh v27.4s,      v10.4s, v0.s[3]       // ................................~.................................'.................................*.................................'.....................
        // mul      v24.4s, v10.4s, v0.s[2]            // ..................................~...............................'...................................*...............................'.....................
        // mls      v24.4s, v27.4s,      v7.s[0]       // ......................................~...........................'.......................................*...........................'.....................
        // sub v10.4s, v8.4s, v24.4s                   // ..........................................~.......................'...........................................*.......................'.....................
        // add v8.4s, v8.4s, v24.4s                    // ..................................................~...............'...................................................*...............'.....................
        // sqrdmulh v27.4s,      v11.4s, v0.s[3]       // .....................~............................................'......................*............................................'.....................
        // mul      v24.4s, v11.4s, v0.s[2]            // ........................~.........................................'.........................*.........................................'.....................
        // mls      v24.4s, v27.4s,      v7.s[0]       // ............................~.....................................'.............................*.....................................'.....................
        // sub v11.4s, v9.4s, v24.4s                   // ...................................~..............................'....................................*..............................'.....................
        // add v9.4s, v9.4s, v24.4s                    // .........................................~........................'..........................................*........................'.....................
        // sqrdmulh v27.4s,      v14.4s, v1.s[1]       // ...........................................~......................'............................................*......................'.....................
        // mul      v24.4s, v14.4s, v1.s[0]            // ........................................~.........................'.........................................*.........................'.....................
        // mls      v24.4s, v27.4s,      v7.s[0]       // ...............................................~..................'................................................*..................'.....................
        // sub v14.4s, v12.4s, v24.4s                  // ............................................................~.....'.............................................................*.....'.....................
        // add v12.4s, v12.4s, v24.4s                  // ......................................................~...........'.......................................................*...........'.....................
        // sqrdmulh v27.4s,      v15.4s, v1.s[1]       // .......................~..........................................'........................*..........................................'.....................
        // mul      v24.4s, v15.4s, v1.s[0]            // ......................~...........................................'.......................*...........................................'.....................
        // mls      v24.4s, v27.4s,      v7.s[0]       // ...........................~......................................'............................*......................................'.....................
        // sub v15.4s, v13.4s, v24.4s                  // .................................~................................'..................................*................................'.....................
        // add v13.4s, v13.4s, v24.4s                  // ...............................~..................................'................................*..................................'.....................
        // sqrdmulh v27.4s,      v9.4s, v1.s[3]        // .............................................~....................'..............................................*....................'.....................
        // mul      v24.4s, v9.4s, v1.s[2]             // ............................................~.....................'.............................................*.....................'.....................
        // mls      v24.4s, v27.4s,      v7.s[0]       // .................................................~................'..................................................*................'.....................
        // sub v9.4s, v8.4s, v24.4s                    // .....................................................~............'......................................................*............'.....................
        // add v8.4s, v8.4s, v24.4s                    // ........................................................~.........'.........................................................*.........'.....................
        // sqrdmulh v27.4s,      v11.4s, v2.s[1]       // .......................................~..........................'........................................*..........................'.....................
        // mul      v24.4s, v11.4s, v2.s[0]            // ..............................................~...................'...............................................*...................'.....................
        // mls      v24.4s, v27.4s,      v7.s[0]       // ....................................................~.............'.....................................................*.............'.....................
        // sub v11.4s, v10.4s, v24.4s                  // .~................................................................'..~................................................................'..l..................
        // add v10.4s, v10.4s, v24.4s                  // ...............................................................~..'................................................................*..'.....................
        // sqrdmulh v27.4s,      v13.4s, v2.s[3]       // ...................................................~..............'....................................................*..............'.....................
        // mul      v24.4s, v13.4s, v2.s[2]            // .....................................~............................'......................................*............................'.....................
        // mls      v24.4s, v27.4s,      v7.s[0]       // .......................................................~..........'........................................................*..........'.....................
        // sub v13.4s, v12.4s, v24.4s                  // ............~.....................................................'.............~.....................................................'.............l.......
        // add v12.4s, v12.4s, v24.4s                  // ...........................................................~......'............................................................*......'.....................
        // sqrdmulh v27.4s,      v15.4s, v3.s[1]       // .........................................................~........'..........................................................*........'.....................
        // mul      v24.4s, v15.4s, v3.s[0]            // ................................................~.................'.................................................*.................'.....................
        // mls      v24.4s, v27.4s,      v7.s[0]       // .............................................................~....'..............................................................*....'.....................
        // sub v15.4s, v14.4s, v24.4s                  // ~.................................................................'.~.................................................................'.l...................
        // add v14.4s, v14.4s, v24.4s                  // ..................................................................~...................................................................l.....................
        // str q8, [x0], #(16)                         // ................................................................~.'.................................................................*.'.....................
        // str q9, [x0, #(-16 + 1*(1024/8))]           // ..........................................................~.......'...........................................................*.......'.....................
        // str q10, [x0, #(-16 + 2*(1024/8))]          // ..................................................................'~..................................................................'l....................
        // str q11, [x0, #(-16 + 3*(1024/8))]          // ...................~..............................................'....................~..............................................'....................l
        // str q12, [x0, #(-16 + 4*(1024/8))]          // ..............................................................~...'...............................................................*...'.....................
        // str q13, [x0, #(-16 + 5*(1024/8))]          // ...............~..................................................'................~..................................................'................l....
        // str q14, [x0, #(-16 + 6*(1024/8))]          // ..~...............................................................'...~...............................................................'...l.................
        // str q15, [x0, #(-16 + 7*(1024/8))]          // ....~.............................................................'.....~.............................................................'.....l...............

        subs count, count, 1
        cbnz count, ntt_layer123_start
                                                // Instructions:    86
                                                // Expected cycles: 73
                                                // Expected IPC:    1.18

                                                // Cycle bound:     73.0
                                                // IPC bound:       1.18

                                                // Wall time:     2.56s
                                                // User time:     2.56s

                                                // --------------------------- cycle (expected) --------------------------->
                                                // 0                        25                       50
                                                // |------------------------|------------------------|----------------------
        add v21.4S, v28.4S, v17.4S              // *........................................................................
        ins v11.d[0], x8                        // *........................................................................
        mls v18.4S, v25.4S, v7.S[0]             // .*.......................................................................
        ins v25.d[0], x6                        // .*.......................................................................
        str q5, [x0, #240]                      // ..*......................................................................
        ldr x8, [x0, #776]                      // ..*......................................................................
        sub v30.4S, v28.4S, v17.4S              // ...*.....................................................................
        ins v25.d[1], x7                        // ...*.....................................................................
        sub v5.4S, v9.4S, v24.4S                // ....*....................................................................
        ins v17.d[0], x5                        // ....*....................................................................
        add v22.4S, v25.4S, v26.4S              // .....*...................................................................
        ldr x9, [x0, #904]                      // .....*...................................................................
        sub v23.4S, v25.4S, v26.4S              // ......*..................................................................
        ins v17.d[1], x8                        // ......*..................................................................
        sub v13.4S, v19.4S, v27.4S              // .......*.................................................................
        ldr x13, [x0, #0]                       // .......*.................................................................
        mul v28.4S, v17.4S, v0.S[0]             // ........*................................................................
        ldr x4, [x0, #8]                        // ........*................................................................
        sqrdmulh v15.4S, v17.4S, v0.S[1]        // .........*...............................................................
        ins v8.d[1], x9                         // .........*...............................................................
        str q5, [x0, #624]                      // ..........*..............................................................
        mul v19.4S, v8.4S, v0.S[0]              // ...........*.............................................................
        ins v25.d[0], x13                       // ...........*.............................................................
        sqrdmulh v12.4S, v8.4S, v0.S[1]         // ............*............................................................
        ldr x5, [x0, #264]                      // ............*............................................................
        mls v28.4S, v15.4S, v7.S[0]             // .............*...........................................................
        ins v25.d[1], x4                        // .............*...........................................................
        str q30, [x0, #880]                     // ..............*..........................................................
        sub v31.4S, v25.4S, v18.4S              // ...............*.........................................................
        mls v19.4S, v12.4S, v7.S[0]             // ................*........................................................
        ins v11.d[1], x5                        // ................*........................................................
        add v26.4S, v25.4S, v18.4S              // .................*.......................................................
        add v25.4S, v11.4S, v28.4S              // ..................*......................................................
        sub v28.4S, v11.4S, v28.4S              // ...................*.....................................................
        add v6.4S, v29.4S, v19.4S               // ....................*....................................................
        mul v9.4S, v25.4S, v0.S[2]              // .....................*...................................................
        sub v19.4S, v29.4S, v19.4S              // ......................*..................................................
        mul v29.4S, v6.4S, v0.S[2]              // .......................*.................................................
        sqrdmulh v27.4S, v6.4S, v0.S[3]         // ........................*................................................
        sqrdmulh v10.4S, v19.4S, v1.S[1]        // .........................*...............................................
        mul v14.4S, v19.4S, v1.S[0]             // ..........................*..............................................
        str q21, [x0, #752]                     // ...........................*.............................................
        mls v29.4S, v27.4S, v7.S[0]             // ............................*............................................
        sqrdmulh v21.4S, v25.4S, v0.S[3]        // .............................*...........................................
        mls v14.4S, v10.4S, v7.S[0]             // ..............................*..........................................
        str q13, [x0, #368]                     // ...............................*.........................................
        add v10.4S, v22.4S, v29.4S              // ................................*........................................
        sub v25.4S, v22.4S, v29.4S              // .................................*.......................................
        add v15.4S, v23.4S, v14.4S              // ..................................*......................................
        mul v18.4S, v10.4S, v1.S[2]             // ...................................*.....................................
        sqrdmulh v20.4S, v10.4S, v1.S[3]        // ....................................*....................................
        mul v19.4S, v15.4S, v2.S[2]             // .....................................*...................................
        sub v17.4S, v23.4S, v14.4S              // ......................................*..................................
        mul v29.4S, v28.4S, v1.S[0]             // .......................................*.................................
        sqrdmulh v28.4S, v28.4S, v1.S[1]        // ........................................*................................
        mls v9.4S, v21.4S, v7.S[0]              // .........................................*...............................
        sqrdmulh v27.4S, v17.4S, v3.S[1]        // ..........................................*..............................
        sqrdmulh v13.4S, v25.4S, v2.S[1]        // ...........................................*.............................
        mls v29.4S, v28.4S, v7.S[0]             // ............................................*............................
        mul v16.4S, v17.4S, v3.S[0]             // .............................................*...........................
        mul v22.4S, v25.4S, v2.S[0]             // ..............................................*..........................
        add v24.4S, v26.4S, v9.4S               // ...............................................*.........................
        sqrdmulh v25.4S, v15.4S, v2.S[3]        // ................................................*........................
        mls v16.4S, v27.4S, v7.S[0]             // .................................................*.......................
        sub v10.4S, v31.4S, v29.4S              // ..................................................*......................
        mls v18.4S, v20.4S, v7.S[0]             // ...................................................*.....................
        mls v22.4S, v13.4S, v7.S[0]             // ....................................................*....................
        sub v13.4S, v10.4S, v16.4S              // .....................................................*...................
        mls v19.4S, v25.4S, v7.S[0]             // ......................................................*..................
        sub v9.4S, v26.4S, v9.4S                // .......................................................*.................
        str q13, [x0, #896]                     // ........................................................*................
        sub v21.4S, v24.4S, v18.4S              // .........................................................*...............
        add v30.4S, v24.4S, v18.4S              // ..........................................................*..............
        add v13.4S, v9.4S, v22.4S               // ...........................................................*.............
        str q21, [x0, #128]                     // ............................................................*............
        add v5.4S, v31.4S, v29.4S               // .............................................................*...........
        str q13, [x0, #256]                     // ..............................................................*..........
        sub v23.4S, v9.4S, v22.4S               // ...............................................................*.........
        str q30, [x0], #(16)                    // ................................................................*........
        add v30.4S, v10.4S, v16.4S              // .................................................................*.......
        str q23, [x0, #368]                     // ..................................................................*......
        add v13.4S, v5.4S, v19.4S               // ...................................................................*.....
        str q30, [x0, #752]                     // ....................................................................*....
        sub v12.4S, v5.4S, v19.4S               // .....................................................................*...
        str q13, [x0, #496]                     // ......................................................................*..
        str q12, [x0, #624]                     // ........................................................................*

                                                 // --------------------------- cycle (expected) --------------------------->
                                                 // 0                        25                       50
                                                 // |------------------------|------------------------|----------------------
        // add v30.4S, v28.4S, v17.4S             // *........................................................................
        // ldr x13, [x0, #904]                    // .....*...................................................................
        // str q5, [x0, #240]                     // ..*......................................................................
        // ins v23.d[0], x6                       // .*.......................................................................
        // sub v21.4S, v28.4S, v17.4S             // ...*.....................................................................
        // sub v5.4S, v19.4S, v27.4S              // .......*.................................................................
        // ldr x17, [x0, #776]                    // ..*......................................................................
        // str q30, [x0, #752]                    // ...........................*.............................................
        // ins v27.d[0], x8                       // *........................................................................
        // mls v18.4S, v25.4S, v7.S[0]            // .*.......................................................................
        // ins v8.d[1], x13                       // .........*...............................................................
        // str q21, [x0, #880]                    // ..............*..........................................................
        // ins v28.d[0], x5                       // ....*....................................................................
        // sqrdmulh v21.4S, v8.4S, v0.S[1]        // ............*............................................................
        // ins v23.d[1], x7                       // ...*.....................................................................
        // mul v17.4S, v8.4S, v0.S[0]             // ...........*.............................................................
        // ins v28.d[1], x17                      // ......*..................................................................
        // add v12.4S, v23.4S, v26.4S             // .....*...................................................................
        // mul v22.4S, v28.4S, v0.S[0]            // ........*................................................................
        // sqrdmulh v6.4S, v28.4S, v0.S[1]        // .........*...............................................................
        // ldr x5, [x0, #0]                       // .......*.................................................................
        // mls v17.4S, v21.4S, v7.S[0]            // ................*........................................................
        // sub v28.4S, v23.4S, v26.4S             // ......*..................................................................
        // ldr x14, [x0, #8]                      // ........*................................................................
        // sub v21.4S, v9.4S, v24.4S              // ....*....................................................................
        // mls v22.4S, v6.4S, v7.S[0]             // .............*...........................................................
        // ins v23.d[0], x5                       // ...........*.............................................................
        // str q21, [x0, #624]                    // ..........*..............................................................
        // ins v23.d[1], x14                      // .............*...........................................................
        // sub v30.4S, v29.4S, v17.4S             // ......................*..................................................
        // sub v15.4S, v23.4S, v18.4S             // ...............*.........................................................
        // add v8.4S, v29.4S, v17.4S              // ....................*....................................................
        // str q5, [x0, #368]                     // ...............................*.........................................
        // add v9.4S, v23.4S, v18.4S              // .................*.......................................................
        // sqrdmulh v13.4S, v8.4S, v0.S[3]        // ........................*................................................
        // mul v16.4S, v30.4S, v1.S[0]            // ..........................*..............................................
        // ldr x13, [x0, #264]                    // ............*............................................................
        // sqrdmulh v14.4S, v30.4S, v1.S[1]       // .........................*...............................................
        // mul v17.4S, v8.4S, v0.S[2]             // .......................*.................................................
        // mls v16.4S, v14.4S, v7.S[0]            // ..............................*..........................................
        // ins v27.d[1], x13                      // ................*........................................................
        // mls v17.4S, v13.4S, v7.S[0]            // ............................*............................................
        // add v23.4S, v27.4S, v22.4S             // ..................*......................................................
        // add v30.4S, v28.4S, v16.4S             // ..................................*......................................
        // sqrdmulh v13.4S, v23.4S, v0.S[3]       // .............................*...........................................
        // sub v21.4S, v28.4S, v16.4S             // ......................................*..................................
        // mul v11.4S, v23.4S, v0.S[2]            // .....................*...................................................
        // sub v6.4S, v12.4S, v17.4S              // .................................*.......................................
        // sub v10.4S, v27.4S, v22.4S             // ...................*.....................................................
        // mul v24.4S, v30.4S, v2.S[2]            // .....................................*...................................
        // mls v11.4S, v13.4S, v7.S[0]            // .........................................*...............................
        // sqrdmulh v14.4S, v6.4S, v2.S[1]        // ...........................................*.............................
        // mul v23.4S, v10.4S, v1.S[0]            // .......................................*.................................
        // add v22.4S, v12.4S, v17.4S             // ................................*........................................
        // sub v19.4S, v9.4S, v11.4S              // .......................................................*.................
        // sqrdmulh v5.4S, v10.4S, v1.S[1]        // ........................................*................................
        // mul v20.4S, v22.4S, v1.S[2]            // ...................................*.....................................
        // sqrdmulh v13.4S, v22.4S, v1.S[3]       // ....................................*....................................
        // mul v27.4S, v6.4S, v2.S[0]             // ..............................................*..........................
        // mls v23.4S, v5.4S, v7.S[0]             // ............................................*............................
        // mul v17.4S, v21.4S, v3.S[0]            // .............................................*...........................
        // mls v20.4S, v13.4S, v7.S[0]            // ...................................................*.....................
        // add v12.4S, v9.4S, v11.4S              // ...............................................*.........................
        // sqrdmulh v13.4S, v30.4S, v2.S[3]       // ................................................*........................
        // mls v27.4S, v14.4S, v7.S[0]            // ....................................................*....................
        // sub v31.4S, v12.4S, v20.4S             // .........................................................*...............
        // add v9.4S, v15.4S, v23.4S              // .............................................................*...........
        // mls v24.4S, v13.4S, v7.S[0]            // ......................................................*..................
        // add v30.4S, v12.4S, v20.4S             // ..........................................................*..............
        // sqrdmulh v21.4S, v21.4S, v3.S[1]       // ..........................................*..............................
        // str q31, [x0, #128]                    // ............................................................*............
        // add v14.4S, v9.4S, v24.4S              // ...................................................................*.....
        // sub v28.4S, v15.4S, v23.4S             // ..................................................*......................
        // mls v17.4S, v21.4S, v7.S[0]            // .................................................*.......................
        // str q14, [x0, #512]                    // ......................................................................*..
        // add v5.4S, v19.4S, v27.4S              // ...........................................................*.............
        // str q30, [x0], #(16)                   // ................................................................*........
        // add v30.4S, v28.4S, v17.4S             // .................................................................*.......
        // str q5, [x0, #240]                     // ..............................................................*..........
        // sub v21.4S, v28.4S, v17.4S             // .....................................................*...................
        // sub v5.4S, v19.4S, v27.4S              // ...............................................................*.........
        // str q30, [x0, #752]                    // ....................................................................*....
        // str q21, [x0, #880]                    // ........................................................*................
        // sub v21.4S, v9.4S, v24.4S              // .....................................................................*...
        // str q21, [x0, #624]                    // ........................................................................*
        // str q5, [x0, #368]                     // ..................................................................*......


        mov in, inp
        add in2, in, #64       // in2 points 64 bytes ahead for data4-7
        mov count, #8

        .p2align 2
        ldr q13, [x1], #(4*16)                                 // *..............................................................................................................................................................
        ldr x5, [x6, #48]                                      // *..............................................................................................................................................................
        ldr x16, [x6, #16]                                     // .*.............................................................................................................................................................
        ldr q19, [x1, #-48]                                    // ..*............................................................................................................................................................
        ldr x7, [x6, #56]                                      // ..*............................................................................................................................................................
        ldr x9, [x6, #24]                                      // ...*...........................................................................................................................................................
        ldr q6, [x2, #64]                                      // ....*..........................................................................................................................................................
        ins v3.d[0], x5                                        // ....*..........................................................................................................................................................
        ins v4.d[0], x16                                       // .....*.........................................................................................................................................................
        ldr x10, [x6, #32]                                     // .....*.........................................................................................................................................................
        ldr q23, [x2, #16]                                     // ......*........................................................................................................................................................
        ins v3.d[1], x7                                        // ......*........................................................................................................................................................
        ldr x3, [x6, #40]                                      // .......*.......................................................................................................................................................
        ins v4.d[1], x9                                        // .......*.......................................................................................................................................................
        sqrdmulh v31.4S, v3.4S, v13.S[1]                       // ........*......................................................................................................................................................
        ldr x9, [x0, #48]                                      // ........*......................................................................................................................................................
        sqrdmulh v11.4S, v4.4S, v13.S[1]                       // .........*.....................................................................................................................................................
        ins v12.d[0], x10                                      // .........*.....................................................................................................................................................
        mul v5.4S, v4.4S, v13.S[0]                             // ..........*....................................................................................................................................................
        ldr x11, [x6, #0]                                      // ..........*....................................................................................................................................................
        mul v18.4S, v3.4S, v13.S[0]                            // ...........*...................................................................................................................................................
        ins v12.d[1], x3                                       // ...........*...................................................................................................................................................
        ldr q24, [x2, #48]                                     // ............*..................................................................................................................................................
        ldr x7, [x6, #8]                                       // ............*..................................................................................................................................................
        ins v29.d[0], x9                                       // .............*.................................................................................................................................................
        ldr x15, [x0, #56]                                     // .............*.................................................................................................................................................
        mul v16.4S, v12.4S, v13.S[0]                           // ..............*................................................................................................................................................
        ins v15.d[0], x11                                      // ..............*................................................................................................................................................
        mls v5.4S, v11.4S, v7.S[0]                             // ...............*...............................................................................................................................................
        ldr x13, [x0, #32]                                     // ...............*...............................................................................................................................................
        mls v18.4S, v31.4S, v7.S[0]                            // ................*..............................................................................................................................................
        ins v15.d[1], x7                                       // ................*..............................................................................................................................................
        sqrdmulh v12.4S, v12.4S, v13.S[1]                      // .................*.............................................................................................................................................
        ldr x8, [x0, #40]                                      // .................*.............................................................................................................................................
        sqrdmulh v9.4S, v15.4S, v13.S[1]                       // ..................*............................................................................................................................................
        ins v29.d[1], x15                                      // ..................*............................................................................................................................................
        mul v27.4S, v15.4S, v13.S[0]                           // ...................*...........................................................................................................................................
        ldr x10, [x0, #16]                                     // ...................*...........................................................................................................................................
        add v10.4S, v29.4S, v18.4S                             // ....................*..........................................................................................................................................
        ins v8.d[0], x13                                       // ....................*..........................................................................................................................................
        mls v16.4S, v12.4S, v7.S[0]                            // .....................*.........................................................................................................................................
        ldr x14, [x0, #24]                                     // .....................*.........................................................................................................................................
        sub v28.4S, v29.4S, v18.4S                             // ......................*........................................................................................................................................
        ins v8.d[1], x8                                        // ......................*........................................................................................................................................
        sqrdmulh v17.4S, v10.4S, v13.S[3]                      // .......................*.......................................................................................................................................
        ldr x7, [x0, #0]                                       // .......................*.......................................................................................................................................
        mul v1.4S, v10.4S, v13.S[2]                            // ........................*......................................................................................................................................
        ins v14.d[0], x10                                      // ........................*......................................................................................................................................
        add v30.4S, v8.4S, v16.4S                              // .........................*.....................................................................................................................................
        ldr x8, [x0, #8]                                       // .........................*.....................................................................................................................................
        sub v11.4S, v8.4S, v16.4S                              // ..........................*....................................................................................................................................
        ins v14.d[1], x14                                      // ..........................*....................................................................................................................................
        mls v27.4S, v9.4S, v7.S[0]                             // ...........................*...................................................................................................................................
        ins v21.d[0], x7                                       // ...........................*...................................................................................................................................
        add v16.4S, v14.4S, v5.4S                              // ............................*..................................................................................................................................
        sqrdmulh v22.4S, v30.4S, v13.S[3]                      // .............................*.................................................................................................................................
        mul v0.4S, v11.4S, v19.S[0]                            // ..............................*................................................................................................................................
        ins v21.d[1], x8                                       // ..............................*................................................................................................................................
        sqrdmulh v2.4S, v28.4S, v19.S[1]                       // ...............................*...............................................................................................................................
        mul v8.4S, v28.4S, v19.S[0]                            // ................................*..............................................................................................................................
        ldr q25, [x1, #-32]                                    // .................................*.............................................................................................................................
        sub v5.4S, v14.4S, v5.4S                               // ...................................*...........................................................................................................................
        sqrdmulh v18.4S, v11.4S, v19.S[1]                      // ....................................*..........................................................................................................................
        mls v8.4S, v2.4S, v7.S[0]                              // .....................................*.........................................................................................................................
        ldr q26, [x2, #112]                                    // ......................................*........................................................................................................................
        mls v0.4S, v18.4S, v7.S[0]                             // ........................................*......................................................................................................................
        add v11.4S, v5.4S, v8.4S                               // .........................................*.....................................................................................................................
        sub v9.4S, v5.4S, v8.4S                                // ..........................................*....................................................................................................................
        sub v4.4S, v21.4S, v27.4S                              // ...........................................*...................................................................................................................
        sqrdmulh v10.4S, v11.4S, v25.S[3]                      // ............................................*..................................................................................................................
        mul v14.4S, v11.4S, v25.S[2]                           // .............................................*.................................................................................................................
        add v2.4S, v4.4S, v0.4S                                // ..............................................*................................................................................................................
        ldr q15, [x1, #-16]                                    // ...............................................*...............................................................................................................
        mls v14.4S, v10.4S, v7.S[0]                            // .................................................*.............................................................................................................
        sub v28.4S, v4.4S, v0.4S                               // ..................................................*............................................................................................................
        mul v31.4S, v9.4S, v15.S[0]                            // ...................................................*...........................................................................................................
        sqrdmulh v0.4S, v9.4S, v15.S[1]                        // ....................................................*..........................................................................................................
        add v11.4S, v2.4S, v14.4S                              // .....................................................*.........................................................................................................
        sub v14.4S, v2.4S, v14.4S                              // ......................................................*........................................................................................................
        ldr q10, [x2, #160]                                    // .......................................................*.......................................................................................................
        trn1 v20.4S, v11.4S, v14.4S                            // .........................................................*.....................................................................................................
        mls v31.4S, v0.4S, v7.S[0]                             // ..........................................................*....................................................................................................
        ldr q4, [x2, #176]                                     // ...........................................................*...................................................................................................
        trn2 v3.4S, v11.4S, v14.4S                             // .............................................................*.................................................................................................
        sub count, count, #1
ntt_layer45678_start:
                                                               // Instructions:    168
                                                               // Expected cycles: 157
                                                               // Expected IPC:    1.07

                                                               // --------------------------------------------------------------------- cycle (expected) --------------------------------------------------------------------->
                                                               // 0                        25                       50                       75                       100                      125                      150
                                                               // |------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------
        mls v1.4S, v17.4S, v7.S[0]                             // *............................................................................................................................................................
        add v5.4S, v21.4S, v27.4S                              // .*...........................................................................................................................................................
        sub v29.4S, v28.4S, v31.4S                             // ..*..........................................................................................................................................................
        add v31.4S, v28.4S, v31.4S                             // ...*.........................................................................................................................................................
        add v9.4S, v16.4S, v1.4S                               // ....*........................................................................................................................................................
        sub v15.4S, v16.4S, v1.4S                              // .....*.......................................................................................................................................................
        trn2 v8.4S, v31.4S, v29.4S                             // ......*......................................................................................................................................................
        sqrdmulh v27.4S, v9.4S, v19.S[3]                       // .......*.....................................................................................................................................................
        mul v12.4S, v9.4S, v19.S[2]                            // ........*....................................................................................................................................................
        ldr q28, [x2, #96]                                     // .........*...................................................................................................................................................
        trn2 v0.2D, v3.2D, v8.2D                               // ...........*.................................................................................................................................................
        sqrdmulh v19.4S, v15.4S, v25.S[1]                      // ............*................................................................................................................................................
        mul v14.4S, v0.4S, v28.4S                              // .............*...............................................................................................................................................
        sqrdmulh v21.4S, v0.4S, v26.4S                         // ..............*..............................................................................................................................................
        mul v13.4S, v30.4S, v13.S[2]                           // ...............*.............................................................................................................................................
        trn1 v11.2D, v3.2D, v8.2D                              // ................*............................................................................................................................................
        trn1 v18.4S, v31.4S, v29.4S                            // .................*...........................................................................................................................................
        mls v14.4S, v21.4S, v7.S[0]                            // ..................*..........................................................................................................................................
        mls v13.4S, v22.4S, v7.S[0]                            // ...................*.........................................................................................................................................
        ldr q17, [x2, #128]                                    // ....................*........................................................................................................................................
        sub v30.4S, v11.4S, v14.4S                             // ......................*......................................................................................................................................
        sub v8.4S, v5.4S, v13.4S                               // .......................*.....................................................................................................................................
        add v3.4S, v5.4S, v13.4S                               // ........................*....................................................................................................................................
        mul v13.4S, v30.4S, v10.4S                             // .........................*...................................................................................................................................
        trn2 v9.2D, v20.2D, v18.2D                             // ..........................*..................................................................................................................................
        add v29.4S, v11.4S, v14.4S                             // ...........................*.................................................................................................................................
        mul v5.4S, v9.4S, v28.4S                               // ............................*................................................................................................................................
        sqrdmulh v16.4S, v9.4S, v26.4S                         // .............................*...............................................................................................................................
        ldr q21, [x2, #144]                                    // ..............................*..............................................................................................................................
        mul v9.4S, v29.4S, v17.4S                              // ................................*............................................................................................................................
        mls v5.4S, v16.4S, v7.S[0]                             // .................................*...........................................................................................................................
        sqrdmulh v28.4S, v29.4S, v21.4S                        // ..................................*..........................................................................................................................
        mul v21.4S, v15.4S, v25.S[0]                           // ...................................*.........................................................................................................................
        trn1 v14.2D, v20.2D, v18.2D                            // ....................................*........................................................................................................................
        mls v12.4S, v27.4S, v7.S[0]                            // .....................................*.......................................................................................................................
        mls v9.4S, v28.4S, v7.S[0]                             // ......................................*......................................................................................................................
        add v26.4S, v14.4S, v5.4S                              // .......................................*.....................................................................................................................
        mls v21.4S, v19.4S, v7.S[0]                            // ........................................*....................................................................................................................
        add v18.4S, v3.4S, v12.4S                              // .........................................*...................................................................................................................
        add v10.4S, v26.4S, v9.4S                              // ..........................................*..................................................................................................................
        sub v16.4S, v3.4S, v12.4S                              // ...........................................*.................................................................................................................
        add v11.4S, v8.4S, v21.4S                              // ............................................*................................................................................................................
        sub v0.4S, v8.4S, v21.4S                               // .............................................*...............................................................................................................
        trn1 v27.4S, v18.4S, v16.4S                            // ..............................................*..............................................................................................................
        trn2 v1.4S, v18.4S, v16.4S                             // ...............................................*.............................................................................................................
        trn2 v16.4S, v11.4S, v0.4S                             // ................................................*............................................................................................................
        trn1 v29.4S, v11.4S, v0.4S                             // .................................................*...........................................................................................................
        sqrdmulh v2.4S, v30.4S, v4.4S                          // ..................................................*..........................................................................................................
        trn2 v0.2D, v1.2D, v16.2D                              // ...................................................*.........................................................................................................
        trn2 v18.2D, v27.2D, v29.2D                            // ....................................................*........................................................................................................
        sqrdmulh v19.4S, v0.4S, v23.4S                         // .....................................................*.......................................................................................................
        sqrdmulh v4.4S, v18.4S, v23.4S                         // ......................................................*......................................................................................................
        ldr q21, [x2], #(12*16)                                // .......................................................*.....................................................................................................
        ldr q25, [x2, #-112]                                   // .........................................................*...................................................................................................
        mul v15.4S, v0.4S, v21.4S                              // ...........................................................*.................................................................................................
        mul v31.4S, v18.4S, v21.4S                             // ............................................................*................................................................................................
        mls v13.4S, v2.4S, v7.S[0]                             // .............................................................*...............................................................................................
        sub v0.4S, v14.4S, v5.4S                               // ..............................................................*..............................................................................................
        trn1 v3.2D, v1.2D, v16.2D                              // ...............................................................*.............................................................................................
        mls v15.4S, v19.4S, v7.S[0]                            // ................................................................*............................................................................................
        mls v31.4S, v4.4S, v7.S[0]                             // .................................................................*...........................................................................................
        sub v11.4S, v26.4S, v9.4S                              // ..................................................................*..........................................................................................
        trn1 v30.2D, v27.2D, v29.2D                            // ...................................................................*.........................................................................................
        add v27.4S, v3.4S, v15.4S                              // ....................................................................*........................................................................................
        sub v29.4S, v3.4S, v15.4S                              // .....................................................................*.......................................................................................
        add v12.4S, v0.4S, v13.4S                              // ......................................................................*......................................................................................
        sqrdmulh v3.4S, v27.4S, v24.4S                         // .......................................................................*.....................................................................................
        mul v16.4S, v29.4S, v6.4S                              // ........................................................................*....................................................................................
        sqrdmulh v8.4S, v29.4S, v25.4S                         // .........................................................................*...................................................................................
        sub v13.4S, v0.4S, v13.4S                              // ..........................................................................*..................................................................................
        ldr q15, [x2, #-160]                                   // ...........................................................................*.................................................................................
        st4 {v10.4S, v11.4S, v12.4S, v13.4S}, [x6], #64        // .............................................................................*...............................................................................
        mul v24.4S, v27.4S, v15.4S                             // ..................................................................................*..........................................................................
        add x6, x6, #64                                        // ..................................................................................*..........................................................................
        mls v16.4S, v8.4S, v7.S[0]                             // ...................................................................................*.........................................................................
        ldr x9, [x6, #48]                                      // ...................................................................................*.........................................................................
        sub v20.4S, v30.4S, v31.4S                             // ....................................................................................*........................................................................
        ldr x8, [x6, #56]                                      // ....................................................................................*........................................................................
        add v31.4S, v30.4S, v31.4S                             // .....................................................................................*.......................................................................
        ldr x15, [x6, #32]                                     // .....................................................................................*.......................................................................
        mls v24.4S, v3.4S, v7.S[0]                             // ......................................................................................*......................................................................
        ldr x5, [x6, #16]                                      // ......................................................................................*......................................................................
        add v17.4S, v20.4S, v16.4S                             // .......................................................................................*.....................................................................
        ins v4.d[0], x9                                        // .......................................................................................*.....................................................................
        sub v18.4S, v20.4S, v16.4S                             // ........................................................................................*....................................................................
        ldr x13, [x6, #40]                                     // ........................................................................................*....................................................................
        ldr q13, [x1], #(4*16)                                 // .........................................................................................*...................................................................
        ins v4.d[1], x8                                        // .........................................................................................*...................................................................
        ins v30.d[0], x5                                       // ..........................................................................................*..................................................................
        ldr x17, [x6, #24]                                     // ..........................................................................................*..................................................................
        sub v16.4S, v31.4S, v24.4S                             // ...........................................................................................*.................................................................
        ins v14.d[0], x15                                      // ...........................................................................................*.................................................................
        add v15.4S, v31.4S, v24.4S                             // ............................................................................................*................................................................
        ldr x7, [x6, #0]                                       // ............................................................................................*................................................................
        ldr q19, [x1, #-48]                                    // .............................................................................................*...............................................................
        ins v14.d[1], x13                                      // .............................................................................................*...............................................................
        ins v30.d[1], x17                                      // ..............................................................................................*..............................................................
        ldr x3, [x6, #8]                                       // ..............................................................................................*..............................................................
        st4 {v15.4S, v16.4S, v17.4S, v18.4S}, [x0], #64        // ...............................................................................................*.............................................................
        sqrdmulh v2.4S, v30.4S, v13.S[1]                       // ....................................................................................................*........................................................
        ins v18.d[0], x7                                       // ....................................................................................................*........................................................
        mul v1.4S, v4.4S, v13.S[0]                             // .....................................................................................................*.......................................................
        add x0, x0, #64                                        // .....................................................................................................*.......................................................
        sqrdmulh v9.4S, v4.4S, v13.S[1]                        // ......................................................................................................*......................................................
        ins v18.d[1], x3                                       // ......................................................................................................*......................................................
        ldr q25, [x1, #-32]                                    // .......................................................................................................*.....................................................
        ldr x5, [x0, #48]                                      // .......................................................................................................*.....................................................
        ldr x9, [x0, #56]                                      // ........................................................................................................*....................................................
        mul v27.4S, v18.4S, v13.S[0]                           // .........................................................................................................*...................................................
        ldr x7, [x0, #16]                                      // .........................................................................................................*...................................................
        mls v1.4S, v9.4S, v7.S[0]                              // ..........................................................................................................*..................................................
        ldr x15, [x0, #32]                                     // ..........................................................................................................*..................................................
        mul v10.4S, v14.4S, v13.S[0]                           // ...........................................................................................................*.................................................
        ins v28.d[0], x5                                       // ...........................................................................................................*.................................................
        sqrdmulh v23.4S, v14.4S, v13.S[1]                      // ............................................................................................................*................................................
        ldr x3, [x0, #24]                                      // ............................................................................................................*................................................
        mul v14.4S, v30.4S, v13.S[0]                           // .............................................................................................................*...............................................
        ins v28.d[1], x9                                       // .............................................................................................................*...............................................
        sqrdmulh v22.4S, v18.4S, v13.S[1]                      // ..............................................................................................................*..............................................
        ldr x17, [x0, #40]                                     // ..............................................................................................................*..............................................
        sub v6.4S, v28.4S, v1.4S                               // ...............................................................................................................*.............................................
        ins v26.d[0], x15                                      // ...............................................................................................................*.............................................
        mls v10.4S, v23.4S, v7.S[0]                            // ................................................................................................................*............................................
        ldr x9, [x0, #8]                                       // ................................................................................................................*............................................
        mls v14.4S, v2.4S, v7.S[0]                             // .................................................................................................................*...........................................
        ins v4.d[0], x7                                        // .................................................................................................................*...........................................
        mul v24.4S, v6.4S, v19.S[0]                            // ..................................................................................................................*..........................................
        ldr x8, [x0, #0]                                       // ..................................................................................................................*..........................................
        sqrdmulh v0.4S, v6.4S, v19.S[1]                        // ...................................................................................................................*.........................................
        ins v26.d[1], x17                                      // ...................................................................................................................*.........................................
        mls v27.4S, v22.4S, v7.S[0]                            // ....................................................................................................................*........................................
        ins v4.d[1], x3                                        // ....................................................................................................................*........................................
        sub v30.4S, v26.4S, v10.4S                             // .....................................................................................................................*.......................................
        sub v11.4S, v4.4S, v14.4S                              // ......................................................................................................................*......................................
        ins v21.d[0], x8                                       // ......................................................................................................................*......................................
        mls v24.4S, v0.4S, v7.S[0]                             // .......................................................................................................................*.....................................
        mul v18.4S, v30.4S, v19.S[0]                           // ........................................................................................................................*....................................
        ins v21.d[1], x9                                       // ........................................................................................................................*....................................
        sqrdmulh v6.4S, v30.4S, v19.S[1]                       // .........................................................................................................................*...................................
        sub v5.4S, v21.4S, v27.4S                              // ..........................................................................................................................*..................................
        add v3.4S, v11.4S, v24.4S                              // ...........................................................................................................................*.................................
        ldr q15, [x1, #-16]                                    // ............................................................................................................................*................................
        mul v9.4S, v3.4S, v25.S[2]                             // ..............................................................................................................................*..............................
        sqrdmulh v3.4S, v3.4S, v25.S[3]                        // ...............................................................................................................................*.............................
        mls v18.4S, v6.4S, v7.S[0]                             // ................................................................................................................................*............................
        sub v30.4S, v11.4S, v24.4S                             // .................................................................................................................................*...........................
        add v16.4S, v4.4S, v14.4S                              // ..................................................................................................................................*..........................
        mls v9.4S, v3.4S, v7.S[0]                              // ...................................................................................................................................*.........................
        add v0.4S, v5.4S, v18.4S                               // ....................................................................................................................................*........................
        mul v31.4S, v30.4S, v15.S[0]                           // .....................................................................................................................................*.......................
        add v6.4S, v28.4S, v1.4S                               // ......................................................................................................................................*......................
        sub v17.4S, v0.4S, v9.4S                               // .......................................................................................................................................*.....................
        sqrdmulh v8.4S, v30.4S, v15.S[1]                       // ........................................................................................................................................*....................
        add v20.4S, v0.4S, v9.4S                               // .........................................................................................................................................*...................
        add v30.4S, v26.4S, v10.4S                             // ..........................................................................................................................................*..................
        ldr q10, [x2, #160]                                    // ...........................................................................................................................................*.................
        mul v1.4S, v6.4S, v13.S[2]                             // .............................................................................................................................................*...............
        trn2 v3.4S, v20.4S, v17.4S                             // ..............................................................................................................................................*..............
        sub v28.4S, v5.4S, v18.4S                              // ...............................................................................................................................................*.............
        sqrdmulh v22.4S, v30.4S, v13.S[3]                      // ................................................................................................................................................*............
        mls v31.4S, v8.4S, v7.S[0]                             // .................................................................................................................................................*...........
        trn1 v20.4S, v20.4S, v17.4S                            // ..................................................................................................................................................*..........
        sqrdmulh v17.4S, v6.4S, v13.S[3]                       // ...................................................................................................................................................*.........
        ldr q4, [x2, #176]                                     // ....................................................................................................................................................*........
        ldr q26, [x2, #112]                                    // ......................................................................................................................................................*......
        ldr q23, [x2, #16]                                     // ........................................................................................................................................................*....
        ldr q24, [x2, #48]                                     // ..........................................................................................................................................................*..
        ldr q6, [x2, #64]                                      // ............................................................................................................................................................*

                                                                // --------------------------------------------------------------------- cycle (expected) --------------------------------------------------------------------->
                                                                // 0                        25                       50                       75                       100                      125                      150
                                                                // |------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------
        // sub v2.4S, v28.4S, v31.4S                            // ..*..........................................................................................................................................................
        // add v8.4S, v28.4S, v31.4S                            // ...*.........................................................................................................................................................
        // ldr q0, [x2, #96]                                    // .........*...................................................................................................................................................
        // trn2 v18.4S, v8.4S, v2.4S                            // ......*......................................................................................................................................................
        // ldr q14, [x2, #128]                                  // ....................*........................................................................................................................................
        // trn2 v9.2D, v3.2D, v18.2D                            // ...........*.................................................................................................................................................
        // trn1 v29.4S, v8.4S, v2.4S                            // .................*...........................................................................................................................................
        // mul v11.4S, v9.4S, v0.4S                             // .............*...............................................................................................................................................
        // sqrdmulh v28.4S, v9.4S, v26.4S                       // ..............*..............................................................................................................................................
        // trn2 v9.2D, v20.2D, v29.2D                           // ..........................*..................................................................................................................................
        // trn1 v2.2D, v3.2D, v18.2D                            // ................*............................................................................................................................................
        // mul v12.4S, v9.4S, v0.4S                             // ............................*................................................................................................................................
        // mls v11.4S, v28.4S, v7.S[0]                          // ..................*..........................................................................................................................................
        // sqrdmulh v0.4S, v9.4S, v26.4S                        // .............................*...............................................................................................................................
        // ldr q5, [x2, #144]                                   // ..............................*..............................................................................................................................
        // add v15.4S, v2.4S, v11.4S                            // ...........................*.................................................................................................................................
        // sub v18.4S, v2.4S, v11.4S                            // ......................*......................................................................................................................................
        // mls v12.4S, v0.4S, v7.S[0]                           // .................................*...........................................................................................................................
        // sqrdmulh v3.4S, v15.4S, v5.4S                        // ..................................*..........................................................................................................................
        // mul v31.4S, v15.4S, v14.4S                           // ................................*............................................................................................................................
        // mul v11.4S, v18.4S, v10.4S                           // .........................*...................................................................................................................................
        // sqrdmulh v14.4S, v18.4S, v4.4S                       // ..................................................*..........................................................................................................
        // trn1 v8.2D, v20.2D, v29.2D                           // ....................................*........................................................................................................................
        // mls v31.4S, v3.4S, v7.S[0]                           // ......................................*......................................................................................................................
        // add v15.4S, v8.4S, v12.4S                            // .......................................*.....................................................................................................................
        // mls v11.4S, v14.4S, v7.S[0]                          // .............................................................*...............................................................................................
        // sub v0.4S, v8.4S, v12.4S                             // ..............................................................*..............................................................................................
        // mls v1.4S, v17.4S, v7.S[0]                           // *............................................................................................................................................................
        // add v20.4S, v21.4S, v27.4S                           // .*...........................................................................................................................................................
        // mul v13.4S, v30.4S, v13.S[2]                         // ...............*.............................................................................................................................................
        // sub v18.4S, v0.4S, v11.4S                            // ..........................................................................*..................................................................................
        // add v14.4S, v16.4S, v1.4S                            // ....*........................................................................................................................................................
        // sub v10.4S, v16.4S, v1.4S                            // .....*.......................................................................................................................................................
        // mls v13.4S, v22.4S, v7.S[0]                          // ...................*.........................................................................................................................................
        // sqrdmulh v8.4S, v14.4S, v19.S[3]                     // .......*.....................................................................................................................................................
        // mul v9.4S, v14.4S, v19.S[2]                          // ........*....................................................................................................................................................
        // sqrdmulh v3.4S, v10.4S, v25.S[1]                     // ............*................................................................................................................................................
        // mul v10.4S, v10.4S, v25.S[0]                         // ...................................*.........................................................................................................................
        // add v12.4S, v20.4S, v13.4S                           // ........................*....................................................................................................................................
        // mls v9.4S, v8.4S, v7.S[0]                            // .....................................*.......................................................................................................................
        // sub v26.4S, v20.4S, v13.4S                           // .......................*.....................................................................................................................................
        // mls v10.4S, v3.4S, v7.S[0]                           // ........................................*....................................................................................................................
        // sub v16.4S, v15.4S, v31.4S                           // ..................................................................*..........................................................................................
        // sub v8.4S, v12.4S, v9.4S                             // ...........................................*.................................................................................................................
        // add v12.4S, v12.4S, v9.4S                            // .........................................*...................................................................................................................
        // sub v2.4S, v26.4S, v10.4S                            // .............................................*...............................................................................................................
        // add v9.4S, v26.4S, v10.4S                            // ............................................*................................................................................................................
        // trn2 v26.4S, v12.4S, v8.4S                           // ...............................................*.............................................................................................................
        // trn1 v20.4S, v12.4S, v8.4S                           // ..............................................*..............................................................................................................
        // trn2 v25.4S, v9.4S, v2.4S                            // ................................................*............................................................................................................
        // ldr q4, [x2], #(12*16)                               // .......................................................*.....................................................................................................
        // trn2 v1.2D, v26.2D, v25.2D                           // ...................................................*.........................................................................................................
        // trn1 v8.2D, v26.2D, v25.2D                           // ...............................................................*.............................................................................................
        // mul v13.4S, v1.4S, v4.4S                             // ...........................................................*.................................................................................................
        // sqrdmulh v10.4S, v1.4S, v23.4S                       // .....................................................*.......................................................................................................
        // add v15.4S, v15.4S, v31.4S                           // ..........................................*..................................................................................................................
        // ldr q29, [x2, #-160]                                 // ...........................................................................*.................................................................................
        // mls v13.4S, v10.4S, v7.S[0]                          // ................................................................*............................................................................................
        // trn1 v12.4S, v9.4S, v2.4S                            // .................................................*...........................................................................................................
        // ldr q3, [x2, #-112]                                  // .........................................................*...................................................................................................
        // add v17.4S, v8.4S, v13.4S                            // ....................................................................*........................................................................................
        // trn1 v21.2D, v20.2D, v12.2D                          // ...................................................................*.........................................................................................
        // trn2 v10.2D, v20.2D, v12.2D                          // ....................................................*........................................................................................................
        // sub v14.4S, v8.4S, v13.4S                            // .....................................................................*.......................................................................................
        // mul v28.4S, v10.4S, v4.4S                            // ............................................................*................................................................................................
        // sqrdmulh v13.4S, v10.4S, v23.4S                      // ......................................................*......................................................................................................
        // sqrdmulh v12.4S, v17.4S, v24.4S                      // .......................................................................*.....................................................................................
        // mul v10.4S, v14.4S, v6.4S                            // ........................................................................*....................................................................................
        // sqrdmulh v27.4S, v14.4S, v3.4S                       // .........................................................................*...................................................................................
        // mls v28.4S, v13.4S, v7.S[0]                          // .................................................................*...........................................................................................
        // mul v13.4S, v17.4S, v29.4S                           // ..................................................................................*..........................................................................
        // add v17.4S, v0.4S, v11.4S                            // ......................................................................*......................................................................................
        // mls v10.4S, v27.4S, v7.S[0]                          // ...................................................................................*.........................................................................
        // sub v20.4S, v21.4S, v28.4S                           // ....................................................................................*........................................................................
        // mls v13.4S, v12.4S, v7.S[0]                          // ......................................................................................*......................................................................
        // add v23.4S, v21.4S, v28.4S                           // .....................................................................................*.......................................................................
        // sub v12.4S, v20.4S, v10.4S                           // ........................................................................................*....................................................................
        // add v11.4S, v20.4S, v10.4S                           // .......................................................................................*.....................................................................
        // sub v10.4S, v23.4S, v13.4S                           // ...........................................................................................*.................................................................
        // add v9.4S, v23.4S, v13.4S                            // ............................................................................................*................................................................
        // st4 {v15.4S, v16.4S, v17.4S, v18.4S}, [x6], #64      // .............................................................................*...............................................................................
        // st4 {v9.4S, v10.4S, v11.4S, v12.4S}, [x0], #64       // ...............................................................................................*.............................................................
        // add x0, x0, #64                                      // .....................................................................................................*.......................................................
        // add x6, x6, #64                                      // ..................................................................................*..........................................................................
        // ldr q13, [x1], #(4*16)                               // .........................................................................................*...................................................................
        // ldr x5, [x6, #48]                                    // ...................................................................................*.........................................................................
        // ldr x16, [x6, #16]                                   // ......................................................................................*......................................................................
        // ldr q19, [x1, #-48]                                  // .............................................................................................*...............................................................
        // ldr x7, [x6, #56]                                    // ....................................................................................*........................................................................
        // ldr x9, [x6, #24]                                    // ..........................................................................................*..................................................................
        // ldr q6, [x2, #64]                                    // ............................................................................................................................................................*
        // ins v3.d[0], x5                                      // .......................................................................................*.....................................................................
        // ins v4.d[0], x16                                     // ..........................................................................................*..................................................................
        // ldr x10, [x6, #32]                                   // .....................................................................................*.......................................................................
        // ldr q23, [x2, #16]                                   // ........................................................................................................................................................*....
        // ins v3.d[1], x7                                      // .........................................................................................*...................................................................
        // ldr x3, [x6, #40]                                    // ........................................................................................*....................................................................
        // ins v4.d[1], x9                                      // ..............................................................................................*..............................................................
        // sqrdmulh v31.4S, v3.4S, v13.S[1]                     // ......................................................................................................*......................................................
        // ldr x9, [x0, #48]                                    // .......................................................................................................*.....................................................
        // sqrdmulh v11.4S, v4.4S, v13.S[1]                     // ....................................................................................................*........................................................
        // ins v12.d[0], x10                                    // ...........................................................................................*.................................................................
        // mul v5.4S, v4.4S, v13.S[0]                           // .............................................................................................................*...............................................
        // ldr x11, [x6, #0]                                    // ............................................................................................*................................................................
        // mul v18.4S, v3.4S, v13.S[0]                          // .....................................................................................................*.......................................................
        // ins v12.d[1], x3                                     // .............................................................................................*...............................................................
        // ldr q24, [x2, #48]                                   // ..........................................................................................................................................................*..
        // ldr x7, [x6, #8]                                     // ..............................................................................................*..............................................................
        // ins v29.d[0], x9                                     // ...........................................................................................................*.................................................
        // ldr x15, [x0, #56]                                   // ........................................................................................................*....................................................
        // mul v16.4S, v12.4S, v13.S[0]                         // ...........................................................................................................*.................................................
        // ins v15.d[0], x11                                    // ....................................................................................................*........................................................
        // mls v5.4S, v11.4S, v7.S[0]                           // .................................................................................................................*...........................................
        // ldr x13, [x0, #32]                                   // ..........................................................................................................*..................................................
        // mls v18.4S, v31.4S, v7.S[0]                          // ..........................................................................................................*..................................................
        // ins v15.d[1], x7                                     // ......................................................................................................*......................................................
        // sqrdmulh v12.4S, v12.4S, v13.S[1]                    // ............................................................................................................*................................................
        // ldr x8, [x0, #40]                                    // ..............................................................................................................*..............................................
        // sqrdmulh v9.4S, v15.4S, v13.S[1]                     // ..............................................................................................................*..............................................
        // ins v29.d[1], x15                                    // .............................................................................................................*...............................................
        // mul v27.4S, v15.4S, v13.S[0]                         // .........................................................................................................*...................................................
        // ldr x10, [x0, #16]                                   // .........................................................................................................*...................................................
        // add v10.4S, v29.4S, v18.4S                           // ......................................................................................................................................*......................
        // ins v8.d[0], x13                                     // ...............................................................................................................*.............................................
        // mls v16.4S, v12.4S, v7.S[0]                          // ................................................................................................................*............................................
        // ldr x14, [x0, #24]                                   // ............................................................................................................*................................................
        // sub v28.4S, v29.4S, v18.4S                           // ...............................................................................................................*.............................................
        // ins v8.d[1], x8                                      // ...................................................................................................................*.........................................
        // sqrdmulh v17.4S, v10.4S, v13.S[3]                    // ...................................................................................................................................................*.........
        // ldr x7, [x0, #0]                                     // ..................................................................................................................*..........................................
        // mul v1.4S, v10.4S, v13.S[2]                          // .............................................................................................................................................*...............
        // ins v14.d[0], x10                                    // .................................................................................................................*...........................................
        // add v30.4S, v8.4S, v16.4S                            // ..........................................................................................................................................*..................
        // ldr x8, [x0, #8]                                     // ................................................................................................................*............................................
        // sub v11.4S, v8.4S, v16.4S                            // .....................................................................................................................*.......................................
        // ins v14.d[1], x14                                    // ....................................................................................................................*........................................
        // mls v27.4S, v9.4S, v7.S[0]                           // ....................................................................................................................*........................................
        // ins v21.d[0], x7                                     // ......................................................................................................................*......................................
        // add v16.4S, v14.4S, v5.4S                            // ..................................................................................................................................*..........................
        // sqrdmulh v22.4S, v30.4S, v13.S[3]                    // ................................................................................................................................................*............
        // mul v0.4S, v11.4S, v19.S[0]                          // ........................................................................................................................*....................................
        // ins v21.d[1], x8                                     // ........................................................................................................................*....................................
        // sqrdmulh v2.4S, v28.4S, v19.S[1]                     // ...................................................................................................................*.........................................
        // mul v8.4S, v28.4S, v19.S[0]                          // ..................................................................................................................*..........................................
        // ldr q25, [x1, #-32]                                  // .......................................................................................................*.....................................................
        // sub v5.4S, v14.4S, v5.4S                             // ......................................................................................................................*......................................
        // sqrdmulh v18.4S, v11.4S, v19.S[1]                    // .........................................................................................................................*...................................
        // mls v8.4S, v2.4S, v7.S[0]                            // .......................................................................................................................*.....................................
        // ldr q26, [x2, #112]                                  // ......................................................................................................................................................*......
        // mls v0.4S, v18.4S, v7.S[0]                           // ................................................................................................................................*............................
        // add v11.4S, v5.4S, v8.4S                             // ...........................................................................................................................*.................................
        // sub v9.4S, v5.4S, v8.4S                              // .................................................................................................................................*...........................
        // sub v4.4S, v21.4S, v27.4S                            // ..........................................................................................................................*..................................
        // sqrdmulh v10.4S, v11.4S, v25.S[3]                    // ...............................................................................................................................*.............................
        // mul v14.4S, v11.4S, v25.S[2]                         // ..............................................................................................................................*..............................
        // add v2.4S, v4.4S, v0.4S                              // ....................................................................................................................................*........................
        // ldr q15, [x1, #-16]                                  // ............................................................................................................................*................................
        // mls v14.4S, v10.4S, v7.S[0]                          // ...................................................................................................................................*.........................
        // sub v28.4S, v4.4S, v0.4S                             // ...............................................................................................................................................*.............
        // mul v31.4S, v9.4S, v15.S[0]                          // .....................................................................................................................................*.......................
        // sqrdmulh v0.4S, v9.4S, v15.S[1]                      // ........................................................................................................................................*....................
        // add v11.4S, v2.4S, v14.4S                            // .........................................................................................................................................*...................
        // sub v14.4S, v2.4S, v14.4S                            // .......................................................................................................................................*.....................
        // ldr q10, [x2, #160]                                  // ...........................................................................................................................................*.................
        // trn1 v20.4S, v11.4S, v14.4S                          // ..................................................................................................................................................*..........
        // mls v31.4S, v0.4S, v7.S[0]                           // .................................................................................................................................................*...........
        // ldr q4, [x2, #176]                                   // ....................................................................................................................................................*........
        // trn2 v3.4S, v11.4S, v14.4S                           // ..............................................................................................................................................*..............

        subs count, count, 1
        cbnz count, ntt_layer45678_start
        sub v2.4S, v28.4S, v31.4S                              // ..............................................................*................................................................................................
        add v8.4S, v28.4S, v31.4S                              // ...............................................................*...............................................................................................
        ldr q0, [x2, #96]                                      // ................................................................*..............................................................................................
        trn2 v18.4S, v8.4S, v2.4S                              // ..................................................................*............................................................................................
        ldr q14, [x2, #128]                                    // ...................................................................*...........................................................................................
        trn2 v9.2D, v3.2D, v18.2D                              // .....................................................................*.........................................................................................
        trn1 v29.4S, v8.4S, v2.4S                              // ......................................................................*........................................................................................
        mul v11.4S, v9.4S, v0.4S                               // .......................................................................*.......................................................................................
        sqrdmulh v28.4S, v9.4S, v26.4S                         // ........................................................................*......................................................................................
        trn2 v9.2D, v20.2D, v29.2D                             // .........................................................................*.....................................................................................
        trn1 v2.2D, v3.2D, v18.2D                              // ..........................................................................*....................................................................................
        mul v12.4S, v9.4S, v0.4S                               // ...........................................................................*...................................................................................
        mls v11.4S, v28.4S, v7.S[0]                            // ............................................................................*..................................................................................
        sqrdmulh v0.4S, v9.4S, v26.4S                          // .............................................................................*.................................................................................
        ldr q5, [x2, #144]                                     // ..............................................................................*................................................................................
        add v15.4S, v2.4S, v11.4S                              // ................................................................................*..............................................................................
        sub v18.4S, v2.4S, v11.4S                              // .................................................................................*.............................................................................
        mls v12.4S, v0.4S, v7.S[0]                             // ..................................................................................*............................................................................
        sqrdmulh v3.4S, v15.4S, v5.4S                          // ...................................................................................*...........................................................................
        mul v31.4S, v15.4S, v14.4S                             // ....................................................................................*..........................................................................
        mul v11.4S, v18.4S, v10.4S                             // .....................................................................................*.........................................................................
        sqrdmulh v14.4S, v18.4S, v4.4S                         // ......................................................................................*........................................................................
        trn1 v8.2D, v20.2D, v29.2D                             // .......................................................................................*.......................................................................
        mls v31.4S, v3.4S, v7.S[0]                             // ........................................................................................*......................................................................
        add v15.4S, v8.4S, v12.4S                              // .........................................................................................*.....................................................................
        mls v11.4S, v14.4S, v7.S[0]                            // ..........................................................................................*....................................................................
        sub v0.4S, v8.4S, v12.4S                               // ...........................................................................................*...................................................................
        mls v1.4S, v17.4S, v7.S[0]                             // ............................................................................................*..................................................................
        add v20.4S, v21.4S, v27.4S                             // .............................................................................................*.................................................................
        mul v13.4S, v30.4S, v13.S[2]                           // ..............................................................................................*................................................................
        sub v18.4S, v0.4S, v11.4S                              // ...............................................................................................*...............................................................
        add v14.4S, v16.4S, v1.4S                              // ................................................................................................*..............................................................
        sub v10.4S, v16.4S, v1.4S                              // .................................................................................................*.............................................................
        mls v13.4S, v22.4S, v7.S[0]                            // ..................................................................................................*............................................................
        sqrdmulh v8.4S, v14.4S, v19.S[3]                       // ...................................................................................................*...........................................................
        mul v9.4S, v14.4S, v19.S[2]                            // ....................................................................................................*..........................................................
        sqrdmulh v3.4S, v10.4S, v25.S[1]                       // .....................................................................................................*.........................................................
        mul v10.4S, v10.4S, v25.S[0]                           // ......................................................................................................*........................................................
        add v12.4S, v20.4S, v13.4S                             // .......................................................................................................*.......................................................
        mls v9.4S, v8.4S, v7.S[0]                              // ........................................................................................................*......................................................
        sub v26.4S, v20.4S, v13.4S                             // .........................................................................................................*.....................................................
        mls v10.4S, v3.4S, v7.S[0]                             // ..........................................................................................................*....................................................
        sub v16.4S, v15.4S, v31.4S                             // ...........................................................................................................*...................................................
        sub v8.4S, v12.4S, v9.4S                               // ............................................................................................................*..................................................
        add v12.4S, v12.4S, v9.4S                              // .............................................................................................................*.................................................
        sub v2.4S, v26.4S, v10.4S                              // ..............................................................................................................*................................................
        add v9.4S, v26.4S, v10.4S                              // ...............................................................................................................*...............................................
        trn2 v26.4S, v12.4S, v8.4S                             // ................................................................................................................*..............................................
        trn1 v20.4S, v12.4S, v8.4S                             // .................................................................................................................*.............................................
        trn2 v25.4S, v9.4S, v2.4S                              // ..................................................................................................................*............................................
        ldr q4, [x2], #(12*16)                                 // ...................................................................................................................*...........................................
        trn2 v1.2D, v26.2D, v25.2D                             // .....................................................................................................................*.........................................
        trn1 v8.2D, v26.2D, v25.2D                             // ......................................................................................................................*........................................
        mul v13.4S, v1.4S, v4.4S                               // .......................................................................................................................*.......................................
        sqrdmulh v10.4S, v1.4S, v23.4S                         // ........................................................................................................................*......................................
        add v15.4S, v15.4S, v31.4S                             // .........................................................................................................................*.....................................
        ldr q29, [x2, #-160]                                   // ..........................................................................................................................*....................................
        mls v13.4S, v10.4S, v7.S[0]                            // ............................................................................................................................*..................................
        trn1 v12.4S, v9.4S, v2.4S                              // .............................................................................................................................*.................................
        ldr q3, [x2, #-112]                                    // ..............................................................................................................................*................................
        add v17.4S, v8.4S, v13.4S                              // ................................................................................................................................*..............................
        trn1 v21.2D, v20.2D, v12.2D                            // .................................................................................................................................*.............................
        trn2 v10.2D, v20.2D, v12.2D                            // ..................................................................................................................................*............................
        sub v14.4S, v8.4S, v13.4S                              // ...................................................................................................................................*...........................
        mul v28.4S, v10.4S, v4.4S                              // ....................................................................................................................................*..........................
        sqrdmulh v13.4S, v10.4S, v23.4S                        // .....................................................................................................................................*.........................
        sqrdmulh v12.4S, v17.4S, v24.4S                        // ......................................................................................................................................*........................
        mul v10.4S, v14.4S, v6.4S                              // .......................................................................................................................................*.......................
        sqrdmulh v27.4S, v14.4S, v3.4S                         // ........................................................................................................................................*......................
        mls v28.4S, v13.4S, v7.S[0]                            // .........................................................................................................................................*.....................
        mul v13.4S, v17.4S, v29.4S                             // ..........................................................................................................................................*....................
        add v17.4S, v0.4S, v11.4S                              // ...........................................................................................................................................*...................
        mls v10.4S, v27.4S, v7.S[0]                            // ............................................................................................................................................*..................
        sub v20.4S, v21.4S, v28.4S                             // .............................................................................................................................................*.................
        mls v13.4S, v12.4S, v7.S[0]                            // ..............................................................................................................................................*................
        add v23.4S, v21.4S, v28.4S                             // ...............................................................................................................................................*...............
        sub v12.4S, v20.4S, v10.4S                             // ................................................................................................................................................*..............
        add v11.4S, v20.4S, v10.4S                             // .................................................................................................................................................*.............
        sub v10.4S, v23.4S, v13.4S                             // ..................................................................................................................................................*............
        add v9.4S, v23.4S, v13.4S                              // ...................................................................................................................................................*...........
        st4 {v15.4S, v16.4S, v17.4S, v18.4S}, [x6], #64        // ....................................................................................................................................................*..........
        st4 {v9.4S, v10.4S, v11.4S, v12.4S}, [x0], #64         // .........................................................................................................................................................*.....
        add x0, x0, #64                                        // ..............................................................................................................................................................*
        add x6, x6, #64                                        // ..............................................................................................................................................................*

        pop_stack
        ret

/* ***************** REGISTER DEALLOCATIONS ****************** */
    .unreq in
    .unreq r012345_ptr
    .unreq r67_ptr
    .unreq inp
    .unreq count
    .unreq wtmp
    .unreq in2
    .unreq data0
    .unreq data1
    .unreq data2
    .unreq data3
    .unreq data4
    .unreq data5
    .unreq data6
    .unreq data7
    .unreq q_data0
    .unreq q_data1
    .unreq q_data2
    .unreq q_data3
    .unreq q_data4
    .unreq q_data5
    .unreq q_data6
    .unreq q_data7
    .unreq root0
    .unreq root1
    .unreq root2
    .unreq root3
    .unreq root0_tw
    .unreq root1_tw
    .unreq root2_tw
    .unreq q_root0
    .unreq q_root1
    .unreq q_root2
    .unreq q_root3
    .unreq q_root0_tw
    .unreq q_root1_tw
    .unreq q_root2_tw
    .unreq consts
    .unreq tmp
    .unreq t0
    .unreq t1
    .unreq t2
    .unreq t3

/* simpasm: footer-start */
#endif /* MLD_ARITH_BACKEND_AARCH64 && !MLD_CONFIG_MULTILEVEL_NO_SHARED */
